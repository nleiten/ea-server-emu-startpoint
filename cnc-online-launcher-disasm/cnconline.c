/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

WPARAM __stdcall sub_401000(HINSTANCE hInstance, int a2, void *Src, int nCmdShow);
ATOM __thiscall sub_401170(HINSTANCE hInstance);
// HWND __usercall sub_401200@<eax>(HINSTANCE hInstance@<ecx>, int nCmdShow@<edx>, LONG dwNewLong);
LRESULT __stdcall sub_4012A0(HWND hWnd, int a2, WPARAM wParam, LPARAM lParam);
void __thiscall sub_402190(void **this);
void __thiscall sub_4021C0(void **this);
void __thiscall sub_4021F0(int this);
BOOL __stdcall DialogFunc(HWND, UINT, WPARAM, LPARAM); // idb
// void *__usercall sub_402280@<eax>(void *Dst@<ecx>, int a2@<edx>, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12);
// void __usercall sub_402530(UINT item@<ecx>, int a2@<edx>, HWND hWnd, int a4, int a5, int a6, int a7, int a8, int a9);
int __thiscall sub_402730(_DWORD *this, int a2);
int __thiscall sub_402890(_DWORD *this, int a2);
int __thiscall sub_4029B0(_DWORD *this, void *Src);
void *__thiscall sub_402B10(void *Dst, void *Src);
int __thiscall sub_402BB0(int this, int a2);
void __thiscall sub_402C30(int this);
void __thiscall sub_402C80(int this);
void __thiscall sub_402CB0(int this);
bool __stdcall sub_402D20(int a1, int a2);
unsigned int __thiscall sub_402DF0(int this, int a2);
int __thiscall sub_402E60(void *this, int a2);
int *__thiscall sub_402F40(void *this, int *a2, int a3, int a4);
int *__thiscall sub_403000(void *this, int *a2, int a3, int a4);
int __thiscall sub_4030C0(const void **this, unsigned int a2);
_DWORD *__thiscall sub_403140(_DWORD *this);
int *__thiscall sub_403190(void *this, int *a2, int a3);
int *__thiscall sub_403440(void *this, int *a2, int a3);
void *__thiscall sub_403730(void *this, int a2);
int __thiscall sub_4037A0(void *this, int a2);
int __thiscall sub_403800(void *this, int a2);
int __fastcall sub_403860(int a1);
void *__thiscall sub_403880(void *this, int a2);
void sub_403930();
void sub_403960();
_DWORD *__thiscall sub_403990(void *Dst, void *Src, int a3);
// _DWORD *__usercall sub_403A30@<eax>(void *Dst@<ecx>, void *Src@<edx>, int a3);
bool __fastcall sub_403B20(int a1, const char *a2);
int __thiscall sub_403B80(int this, int a2, void *Src, int a4);
int __thiscall sub_403C10(int, void *Src, void *, int); // idb
int __thiscall sub_403C80(int this, void *Src, size_t Size);
bool __fastcall sub_403DA0(int a1, const char *a2);
_DWORD *__thiscall sub_403E00(_DWORD *this, void *Src);
_DWORD *__thiscall sub_403E30(int this, _DWORD *a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_404060(_DWORD *this, void *Src);
_DWORD *__thiscall sub_404090(int this, _DWORD *a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_4042C0(_DWORD *this, void *Src);
_DWORD *__thiscall sub_4042F0(int this, _DWORD *a2, int a3, int a4, int a5);
void __stdcall sub_404520(int a1);
_DWORD *__thiscall sub_404580(_DWORD *this);
void __stdcall sub_4045C0(int a1);
_DWORD *__thiscall sub_404600(_DWORD *this);
void __stdcall sub_404640(void *a1);
_DWORD *__thiscall sub_404660(_DWORD *this);
void *__thiscall sub_4046A0(void *this);
_DWORD *__thiscall sub_404700(int this, _DWORD *a2, char a3, int a4, int a5, int a6);
int __thiscall sub_404950(int *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_404B60(int this, _DWORD *a2, char a3, int a4, int a5, int a6);
int __thiscall sub_404D90(int *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_404FC0(int this, _DWORD *a2, char a3, int a4, int a5, int a6);
int __thiscall sub_4051D0(int *this, int a2, int a3, int a4, int a5);
_DWORD *__cdecl sub_4053F0(_DWORD *a1, _DWORD *a2);
void *__thiscall sub_405420(void *Dst, void *Src, int a3);
_DWORD *__thiscall sub_4054F0(void *Dst, void *Src, int a3);
int __thiscall sub_405560(int, void *Src, int); // idb
// int __usercall sub_4055E0@<eax>(int a1@<edx>, int a2@<ecx>, unsigned int a3);
int __thiscall sub_405640(void *this, int a2, unsigned int a3, unsigned int a4);
_DWORD *__thiscall sub_405730(void *Dst, void *Src);
int __thiscall sub_4057A0(void *Dst, void *Src); // idb
_DWORD *__thiscall sub_405800(void *Dst, void *Src);
// void *__usercall sub_405840@<eax>(void *Dst@<ecx>, void *Src@<edx>, size_t Size);
char *__thiscall sub_405860(char *this, unsigned int a2, unsigned int a3);
int __thiscall sub_405900(void *this, int a2, int a3, size_t Size);
void *__stdcall sub_405A20(unsigned int a1);
void *__thiscall sub_405A60(int this, int a2, size_t Size);
int __thiscall sub_405BB0(void *Dst, size_t Size, int); // idb
// void *__usercall sub_405C60@<eax>(void *Dst@<ecx>, void *Src@<edx>, size_t Size);
int __thiscall sub_405C80(int this, int a2);
int __thiscall sub_405CB0(int, void *Src, size_t Size); // idb
int __thiscall sub_405DB0(int, void *Src); // idb
void *__thiscall sub_405E10(void *this, char a2);
int __thiscall sub_405E40(void *this, int a2, int a3);
bool __thiscall sub_405E60(void *this, int a2, int a3);
bool __thiscall sub_405EA0(void *this, int a2, int a3);
const char *sub_405EC0();
int __stdcall sub_405ED0(int a1, int a2);
const char *sub_405F50();
int __stdcall sub_405F60(int a1, int a2);
const char *sub_405FB0();
int __stdcall sub_405FC0(int a1, int a2);
int __stdcall sub_406040(int a1, int a2);
int __thiscall sub_406080(int this, int a2);
void __thiscall sub_407540(void **this);
void __thiscall sub_407570(int **this);
void __thiscall sub_4075A0(void **this);
void __thiscall sub_4075D0(void **this);
void __thiscall sub_407680(char *this);
int __thiscall sub_407970(int, int, int, int, int, int, int); // idb
int __thiscall sub_4084A0(int this, int a2);
char __thiscall sub_408530(void *this);
char __thiscall sub_408B60(int this);
bool __thiscall sub_408DA0(_DWORD *this, HANDLE hProcess, LPCVOID lpBaseAddress, LPVOID lpBuffer, int a5, char *Str2);
char __thiscall sub_408EC0(_DWORD *this, HANDLE hProcess, LPVOID lpAddress, int a4, int a5);
void __thiscall sub_409080(_DWORD *this);
char __thiscall sub_4092A0(int this);
int __stdcall sub_4094F0(LPCSTR lptstrFilename, int); // idb
signed int __thiscall sub_409570(void *this, void *a2, int a3, int a4, int a5, int a6, unsigned int a7);
int __stdcall sub_409880(int, int, LPCSTR lpSubKey, LPCSTR lpValueName); // idb
int __stdcall sub_409A80(int a1, int a2);
void __thiscall sub_409C40(char *this, int a2);
void __thiscall sub_409D70(char *this, int a2);
void __thiscall sub_409E00(_DWORD *this, char a2, int Dst, int a4, int a5, int a6, int a7, int a8);
void __thiscall sub_409F20(_DWORD *this, void *Src, int a3);
_DWORD __stdcall sub_409F80(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
void __thiscall sub_40A000(_DWORD *this, void *Src);
void __thiscall sub_40A0C0(_DWORD *this, LPCSTR lpText, int a3, int a4, int a5, int a6, int a7);
void __thiscall sub_40A160(_DWORD *this, int a2);
void *__stdcall sub_40A1A0(void *Dst);
int __thiscall sub_40A270(void *this, void *Src);
int __thiscall sub_40A2B0(_DWORD *this, void *Src);
int __thiscall sub_40A430(_DWORD *this, int a2);
int __thiscall sub_40A5C0(_DWORD *this, void *Src);
int __thiscall sub_40A740(_DWORD *this, int a2);
int __thiscall sub_40A8D0(_DWORD *this, void *Src);
int __thiscall sub_40AA30(_DWORD *this, void *Src);
int __thiscall sub_40AB90(_DWORD *this, int a2);
char *__thiscall sub_40AD10(char *this, int a2, int a3);
void *__thiscall sub_40ADC0(void *this, void *Dst);
int __thiscall sub_40ADE0(int this);
signed int __thiscall sub_40AE50(int this, int a2);
signed int __thiscall sub_40B020(int this, signed int a2);
signed int __thiscall sub_40B080(int this);
int __thiscall sub_40B0E0(int this, int a2, __int64 a3, int a4, char a5);
int __thiscall sub_40B2B0(int this, int a2, __int64 a3, __int64 a4, int a5, int a6, char a7);
char *__thiscall sub_40B3E0(char *this, int a2);
int __thiscall sub_40B4B0(int this);
int __thiscall sub_40B530(int this);
int __thiscall sub_40B5B0(int this);
int __thiscall sub_40B5C0(int this);
signed int __thiscall sub_40B5D0(int this, signed int a2);
signed int __thiscall sub_40B7C0(int this, signed int a2);
int __thiscall sub_40B850(int this);
int __thiscall sub_40B890(int this);
int __thiscall sub_40BAB0(int this, int a2, int a3, int a4, int Origin, int a6);
int __thiscall sub_40BBC0(int this, int a2, __int64 Offset, int a4, int a5, int a6, int a7, int a8);
int __thiscall sub_40BCB0(int this, char *Buf, size_t Size, int a4);
signed int __thiscall sub_40BD40(_DWORD *this);
char __thiscall sub_40BD70(_DWORD *this, void *a2);
void __thiscall sub_40BDB0(int this, void *Src);
void __thiscall sub_40BE30(int this, void *Src);
unsigned int __thiscall sub_40BEB0(int this, unsigned int *a2);
char *__thiscall sub_40BF20(char *this, const char *a2, int a3, int a4, int a5);
int __thiscall sub_40C020(int this);
void __thiscall sub_40C0B0(int this);
char *__thiscall sub_40C190(char *this, char a2);
void *__thiscall sub_40C1F0(void *this, char a2);
char *__thiscall sub_40C220(char *this, char a2);
void *__thiscall sub_40C280(void *this, char a2);
char *__thiscall sub_40C2B0(char *this, char a2);
int __thiscall sub_40C310(void *Buf, int, int, int); // idb
int *__thiscall sub_40C400(int this, int a2, int a3);
// void __usercall __noreturn sub_40C476(int a1@<ebp>);
void *__thiscall sub_40C4A0(int this, void *Dst);
int __thiscall sub_40C600(int this, const char *a2, int a3, int a4);
char __thiscall sub_40C710(_DWORD *this);
_DWORD *__thiscall sub_40C870(int this);
_DWORD *__thiscall sub_40C8A0(int this);
void __thiscall sub_40C8E0(int *this);
unsigned int __thiscall sub_40C920(int this, int a2);
void __thiscall sub_40C9C0(int this);
unsigned int __thiscall sub_40CA00(int this, int a2);
int *__thiscall sub_40CAA0(void *this, int *a2, int a3, int a4);
int *__thiscall sub_40CB60(int **this, int *a2, int a3, int *a4);
int *__thiscall sub_40CC20(void *this, int *a2, int a3, int a4);
int *__thiscall sub_40CCE0(void *this, int *a2, int a3, int a4);
int __thiscall sub_40CDA0(void *this, unsigned int a2);
int __thiscall sub_40CE50(void *this, unsigned int a2);
int *__thiscall sub_40CEF0(void *this, int *a2, int a3);
int *__thiscall sub_40D1D0(int **this, int *a2, int a3);
void *__thiscall sub_40D4C0(void *this, int a2);
int *__thiscall sub_40D590(void *this, int *a2, int a3);
int *__thiscall sub_40D860(void *this, int *a2, int a3);
void __stdcall sub_40DB30(int a1, int a2);
void *__thiscall sub_40DB80(void *this, int a2);
void *__thiscall sub_40DC20(void *this, int a2);
void *__thiscall sub_40DCB0(void *this, int a2);
void sub_40DD40();
void sub_40DD70();
int __thiscall sub_40DDA0(int, int, int); // idb
// _DWORD *__usercall sub_40DE60@<eax>(void *Dst@<ecx>, int a2@<edx>, void *Src);
// _DWORD *__usercall sub_40DF50@<eax>(void *Dst@<ecx>, void *a2@<edx>, int a3);
// _DWORD *__usercall sub_40DFD0@<eax>(void *Dst@<ecx>, int a2@<edx>, int a3);
// _DWORD *__usercall sub_40E090@<eax>(void *Dst@<ecx>, int a2@<edx>, void *Src);
// _DWORD *__usercall sub_40E130@<eax>(void *Dst@<ecx>, int a2@<edx>, int a3);
// int __usercall sub_40E1E0@<eax>(int@<ecx>, void *Src@<edx>, int); idb
int __fastcall sub_40E270(int a1, int a2);
_DWORD *__thiscall sub_40E460(void *Dst, void *Src, int a3, int a4);
void *__thiscall sub_40E510(void *Dst, void *Src, void *a3, int a4);
int __thiscall sub_40E5E0(void *this);
int __thiscall sub_40E6D0(int *this, int a2, int a3);
int __thiscall sub_40E8A0(int this, int a2, void *Src, size_t Size);
_BYTE *__thiscall sub_40E9E0(void *Dst, int a2, int a3, int a4);
_DWORD *__thiscall sub_40EAC0(_DWORD *this, void *Src);
int *__thiscall sub_40EAF0(int this, int *a2, int a3, int a4, int a5);
int *__thiscall sub_40ED20(int this, int *a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_40EF50(int this, _DWORD *a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_40F180(_DWORD *this, int a2, int a3, int a4);
// void __usercall __noreturn sub_40F21F(int a1@<ebp>);
int __fastcall sub_40F240(int a1, _DWORD *a2);
void __stdcall sub_40F2A0(int a1);
_DWORD *__thiscall sub_40F310(_DWORD *this);
void __stdcall sub_40F350(int a1);
void __stdcall sub_40F3C0(int a1);
int *__thiscall sub_40F420(int this, int *a2, char a3, int a4, int a5, int a6);
int __thiscall sub_40F630(int *this, int a2, int a3, int a4, int a5);
int *__thiscall sub_40F840(int this, int *a2, char a3, int a4, int a5, int a6);
int __thiscall sub_40FA50(int *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_40FC60(int this, _DWORD *a2, char a3, int a4, int a5, int a6);
int __thiscall sub_40FEB0(int *this, int a2, int a3, int a4, int a5);
// void *__usercall sub_4100C0@<eax>(int a1@<ecx>, void *a2@<edx>, void *Dst);
// void *__usercall sub_410100@<eax>(int a1@<edx>, int a2@<ecx>, void *Dst);
void __stdcall sub_410190(int a1);
_DWORD *__thiscall sub_4101C0(_DWORD *this, int a2);
// void __usercall __noreturn sub_410256(int a1@<ebp>);
int __thiscall sub_410270(int this, int a2);
// void __usercall __noreturn sub_410309(int a1@<ebp>);
int __cdecl sub_410390(int a1, int a2);
int __thiscall sub_41044A(char *this);
int __thiscall sub_410456(char *this);
int __thiscall sub_410462(char *this);
char *__thiscall sub_41046E(char *this, char a2);
char *__thiscall sub_410476(char *this, char a2);
char *__thiscall sub_41047E(char *this, char a2);
void *__stdcall sub_410490(unsigned int a1);
int __thiscall sub_4104D0(int this, unsigned int a2, int a3);
int __thiscall sub_410630(void *Dst, int, int); // idb
int __thiscall sub_4106F0(int this, int a2, __int16 a3);
__m128i *__thiscall sub_4107B0(int this, int a2, int a3);
void *__thiscall sub_410880(int this, int a2, size_t Size, char a4);
int __thiscall sub_4108D0(int this, size_t Size, char a3);
void *__cdecl sub_4109BE(unsigned int a1);
int (__thiscall ***__thiscall sub_4109DA(int this))(_DWORD, _DWORD);
_DWORD *__cdecl sub_410A13(int a1);
// int __security_check_cookie(); weak
// void __cdecl operator delete(void *); idb
// void *__cdecl operator new(unsigned int); idb
signed int sub_410A88();
_onexit_t __cdecl sub_410AC4(_onexit_t Func);
int __cdecl sub_410B69(_onexit_t Func); // idb
char *__thiscall sub_410B84(void *this, char a2);
int sub_410BE0();
int sub_410C99();
int __cdecl sub_410E9F(int a1);
// int __usercall sub_410EDC@<eax>(int a1@<ebx>, int a2@<edi>, int a3@<esi>, char a4);
// int __cdecl lock(_DWORD); weak
// int __stdcall unlock(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __stdcall _dllonexit(_DWORD); weak
int __cdecl sub_411049(int a1, int a2, int a3, int a4);
signed int __stdcall sub_41106C(int a1, int a2, int a3, void (__thiscall *a4)(int));
int __stdcall sub_4110DB(int a1, int a2, int a3, int (*a4)(void));
// _DWORD __thiscall type_info::~type_info(type_info *this); idb
int __stdcall sub_411140(_DWORD *a1);
int sub_411181();
// int __cdecl amsg_exit(_DWORD); weak
int sub_41119C();
int __cdecl sub_4111A0(int a1, unsigned int a2);
int __cdecl sub_4111F0(int a1);
bool __cdecl sub_4112B0(int a1);
int sub_4112E1();
void sub_41137B();
void __cdecl Func();
errno_t sub_4113BB();
// int __cdecl crt_debugger_hook(_DWORD); weak
// int __cdecl _crtUnhandledException(_DWORD); weak
// int __cdecl _crtTerminateProcess(_DWORD); weak
// int __cdecl except_handler4_common(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// void __cdecl terminate(); idb
// int __cdecl _crtSetUnhandledExceptionFilter(_DWORD); weak
// int __stdcall invoke_watson(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// errno_t __cdecl controlfp_s(unsigned int *CurrentState, unsigned int NewValue, unsigned int Mask);
// BOOL __stdcall IsProcessorFeaturePresent(DWORD ProcessorFeature);
// int __cdecl CxxThrowException(_DWORD, _DWORD); weak
// int __thiscall _CxxFrameHandler3(_DWORD); weak
// void *__cdecl memcpy(void *Dst, const void *Src, size_t Size);
// void *__cdecl memset(void *Dst, int Val, size_t Size);
int __cdecl sub_411440(int a1, int a2);
int __cdecl sub_411460(int a1, int a2);
int __cdecl sub_411480(int a1, int a2);
int __cdecl sub_4114A0(int a1, int a2);
int __cdecl sub_4114C0(int a1, int a2);
int __cdecl sub_4114E0(int a1, int a2);
// void __usercall sub_411500(int a1@<ebp>);
int __cdecl sub_411508(int a1, int a2);
// void __usercall sub_411530(int a1@<ebp>);
// void __usercall sub_411538(int a1@<ebp>);
int __cdecl sub_411540(int a1, int a2);
// void __usercall sub_411570(int a1@<ebp>);
// void __usercall sub_411578(int a1@<ebp>);
int __cdecl sub_411580(int a1, int a2);
// void __usercall sub_4115B0(int a1@<ebp>);
// void __usercall sub_4115B8(int a1@<ebp>);
// void __usercall sub_4115C0(int a1@<ebp>);
// void __usercall sub_4115C8(int a1@<ebp>);
// void __usercall sub_4115D0(int a1@<ebp>);
int __cdecl sub_4115D8(int a1, int a2);
// void __usercall sub_411600(int a1@<ebp>);
// void __usercall sub_41160B(int a1@<ebp>);
// void __usercall sub_411616(int a1@<ebp>);
// void __usercall sub_41161E(int a1@<ebp>);
// void __usercall sub_411629(int a1@<ebp>);
// void __usercall sub_411631(int a1@<ebp>);
// void __usercall sub_41163C(int a1@<ebp>);
// void __usercall sub_411644(int a1@<ebp>);
// void __usercall sub_41164F(int a1@<ebp>);
// void __usercall sub_411657(int a1@<ebp>);
// void __usercall sub_411662(int a1@<ebp>);
// void __usercall sub_41166A(int a1@<ebp>);
// void __usercall sub_411675(int a1@<ebp>);
// void __usercall sub_41167D(int a1@<ebp>);
// void __usercall sub_411688(int a1@<ebp>);
// void __usercall sub_411690(int a1@<ebp>);
// void __usercall sub_41169B(int a1@<ebp>);
// void __usercall sub_4116A3(int a1@<ebp>);
// void __usercall sub_4116AE(int a1@<ebp>);
// void __usercall sub_4116B9(int a1@<ebp>);
// void __usercall sub_4116C1(int a1@<ebp>);
// void __usercall sub_4116CC(int a1@<ebp>);
// void __usercall sub_4116D4(int a1@<ebp>);
int __cdecl sub_4116DF(int a1, int a2);
int __cdecl sub_411710(int a1, int a2);
// void __usercall sub_411730(int a1@<ebp>);
// void __usercall sub_411738(int a1@<ebp>);
int __cdecl sub_411740(int a1, int a2);
// void __usercall sub_411770(int a1@<ebp>);
int __cdecl sub_411778(int a1, int a2);
// int __usercall sub_4117A0@<eax>(int a1@<ebp>);
// int __usercall sub_4117A8@<eax>(int a1@<ebp>);
int __cdecl sub_4117B0(int a1, int a2);
// void __usercall sub_4117D0(int a1@<ebp>);
int __cdecl sub_4117E9(int a1, int a2);
// void __usercall sub_411810(int a1@<ebp>);
int __cdecl sub_411829(int a1, int a2);
// void __usercall sub_411855(int a1@<ebp>);
int __cdecl sub_41185D(int a1, int a2);
int __cdecl sub_411880(int a1, int a2);
int __cdecl sub_4118A0(int a1, int a2);
int __cdecl sub_4118C0(int a1, int a2);
int __cdecl sub_4118E0(int a1, int a2);
int __cdecl sub_411900(int a1, int a2);
int __cdecl sub_411920(int a1, int a2);
int __cdecl sub_411940(int a1, int a2);
int __cdecl sub_411960(int a1, int a2);
int __cdecl sub_411985(int a1, int a2);
// int __usercall sub_4119A0@<eax>(int a1@<ebp>);
int __cdecl sub_4119A9(int a1, int a2);
// void __usercall sub_4119D0(int a1@<ebp>);
int __cdecl sub_4119D8(int a1, int a2);
// int __usercall sub_411A00@<eax>(int a1@<ebp>);
// int __usercall sub_411A1D@<eax>(int a1@<ebp>);
// int __usercall sub_411A29@<eax>(int a1@<ebp>);
// int __usercall sub_411A32@<eax>(int a1@<ebp>);
int __cdecl sub_411A3D(int a1, int a2);
// int __usercall sub_411A60@<eax>(int a1@<ebp>);
// int __usercall sub_411A7D@<eax>(int a1@<ebp>);
// int __usercall sub_411A89@<eax>(int a1@<ebp>);
int __cdecl sub_411A92(int a1, int a2);
// int __usercall sub_411AB0@<eax>(int a1@<ebp>);
// int __usercall sub_411ACD@<eax>(int a1@<ebp>);
// int __usercall sub_411AD9@<eax>(int a1@<ebp>);
int __cdecl sub_411AE2(int a1, int a2);
// void __usercall sub_411B00(int a1@<ebp>);
int __cdecl sub_411B08(int a1, int a2);
int __cdecl sub_411B30(int a1, int a2);
// void __usercall sub_411B50(int a1@<ebp>);
// void __usercall sub_411B5B(int a1@<ebp>);
// void __usercall sub_411B69(int a1@<ebp>);
// void __usercall sub_411B77(int a1@<ebp>);
// void __usercall sub_411B85(int a1@<ebp>);
// void __usercall sub_411B93(int a1@<ebp>);
// void __usercall sub_411BA1(int a1@<ebp>);
// void __usercall sub_411BAF(int a1@<ebp>);
// void __usercall sub_411BBD(int a1@<ebp>);
// void __usercall sub_411BCB(int a1@<ebp>);
// void __usercall sub_411BD9(int a1@<ebp>);
// void __usercall sub_411BEA(int a1@<ebp>);
// void __usercall sub_411BFB(int a1@<ebp>);
// void __usercall sub_411C0C(int a1@<ebp>);
// void __usercall sub_411C1D(int a1@<ebp>);
// void __usercall sub_411C2E(int a1@<ebp>);
// void __usercall sub_411C3F(int a1@<ebp>);
// int __usercall sub_411C50@<eax>(int a1@<ebp>);
// void __usercall sub_411C61(int a1@<ebp>);
// void __usercall sub_411C69(int a1@<ebp>);
// void __usercall sub_411C71(int a1@<ebp>);
// void __usercall sub_411C79(int a1@<ebp>);
// void __usercall sub_411C81(int a1@<ebp>);
// void __usercall sub_411C89(int a1@<ebp>);
// void __usercall sub_411C91(int a1@<ebp>);
// void __usercall sub_411C99(int a1@<ebp>);
// void __usercall sub_411CA1(int a1@<ebp>);
// void __usercall sub_411CA9(int a1@<ebp>);
// void __usercall sub_411CB1(int a1@<ebp>);
// void __usercall sub_411CB9(int a1@<ebp>);
// void __usercall sub_411CC1(int a1@<ebp>);
// void __usercall sub_411CC9(int a1@<ebp>);
// void __usercall sub_411CD1(int a1@<ebp>);
// void __usercall sub_411CD9(int a1@<ebp>);
// void __usercall sub_411CE1(int a1@<ebp>);
// void __usercall sub_411CE9(int a1@<ebp>);
// void __usercall sub_411CF1(int a1@<ebp>);
// void __usercall sub_411CF9(int a1@<ebp>);
// void __usercall sub_411D01(int a1@<ebp>);
// void __usercall sub_411D09(int a1@<ebp>);
// void __usercall sub_411D11(int a1@<ebp>);
// void __usercall sub_411D19(int a1@<ebp>);
// void __usercall sub_411D21(int a1@<ebp>);
// void __usercall sub_411D29(int a1@<ebp>);
// void __usercall sub_411D31(int a1@<ebp>);
// void __usercall sub_411D39(int a1@<ebp>);
// void __usercall sub_411D41(int a1@<ebp>);
// void __usercall sub_411D49(int a1@<ebp>);
// void __usercall sub_411D51(int a1@<ebp>);
// void __usercall sub_411D59(int a1@<ebp>);
// void __usercall sub_411D61(int a1@<ebp>);
// void __usercall sub_411D69(int a1@<ebp>);
// void __usercall sub_411D71(int a1@<ebp>);
// void __usercall sub_411D79(int a1@<ebp>);
// void __usercall sub_411D81(int a1@<ebp>);
// void __usercall sub_411D89(int a1@<ebp>);
// void __usercall sub_411D91(int a1@<ebp>);
// void __usercall sub_411D99(int a1@<ebp>);
// void __usercall sub_411DA1(int a1@<ebp>);
// void __usercall sub_411DA9(int a1@<ebp>);
// void __usercall sub_411DB1(int a1@<ebp>);
// void __usercall sub_411DB9(int a1@<ebp>);
// void __usercall sub_411DC1(int a1@<ebp>);
// void __usercall sub_411DC9(int a1@<ebp>);
// void __usercall sub_411DD1(int a1@<ebp>);
// void __usercall sub_411DD9(int a1@<ebp>);
// void __usercall sub_411DE1(int a1@<ebp>);
// void __usercall sub_411DE9(int a1@<ebp>);
// void __usercall sub_411DF1(int a1@<ebp>);
// void __usercall sub_411DFC(int a1@<ebp>);
// void __usercall sub_411E04(int a1@<ebp>);
// void __usercall sub_411E0F(int a1@<ebp>);
// void __usercall sub_411E1A(int a1@<ebp>);
// void __usercall sub_411E25(int a1@<ebp>);
// void __usercall sub_411E30(int a1@<ebp>);
// void __usercall sub_411E3B(int a1@<ebp>);
// void __usercall sub_411E46(int a1@<ebp>);
// void __usercall sub_411E51(int a1@<ebp>);
// void __usercall sub_411E5C(int a1@<ebp>);
// void __usercall sub_411E67(int a1@<ebp>);
// void __usercall sub_411E72(int a1@<ebp>);
// void __usercall sub_411E7D(int a1@<ebp>);
// void __usercall sub_411E88(int a1@<ebp>);
// void __usercall sub_411E93(int a1@<ebp>);
// void __usercall sub_411E9E(int a1@<ebp>);
// void __usercall sub_411EA9(int a1@<ebp>);
// void __usercall sub_411EB4(int a1@<ebp>);
// void __usercall sub_411EBF(int a1@<ebp>);
// void __usercall sub_411ECA(int a1@<ebp>);
// void __usercall sub_411ED5(int a1@<ebp>);
// void __usercall sub_411EE0(int a1@<ebp>);
int __cdecl sub_411EE8(int a1, int a2);
// void __usercall sub_411F20(int a1@<ebp>);
// void __usercall sub_411F28(int a1@<ebp>);
// void __usercall sub_411F33(int a1@<ebp>);
// void __usercall sub_411F3E(int a1@<ebp>);
// void __usercall sub_411F49(int a1@<ebp>);
// void __usercall sub_411F54(int a1@<ebp>);
// void __usercall sub_411F5F(int a1@<ebp>);
// void __usercall sub_411F6A(int a1@<ebp>);
// void __usercall sub_411F75(int a1@<ebp>);
// void __usercall sub_411F80(int a1@<ebp>);
// void __usercall sub_411F8B(int a1@<ebp>);
// void __usercall sub_411F99(int a1@<ebp>);
// void __usercall sub_411FA7(int a1@<ebp>);
// void __usercall sub_411FB5(int a1@<ebp>);
// void __usercall sub_411FC3(int a1@<ebp>);
// void __usercall sub_411FD1(int a1@<ebp>);
// void __usercall sub_411FDF(int a1@<ebp>);
// void __usercall sub_411FED(int a1@<ebp>);
int __cdecl sub_411FFB(int a1, int a2);
void sub_412020();
// void __usercall sub_412028(int a1@<ebp>);
int __cdecl sub_412030(int a1, int a2);
void sub_412060();
// void __usercall sub_412068(int a1@<ebp>);
int __cdecl sub_412070(int a1, int a2);
// void __usercall sub_4120A0(int a1@<ebp>);
// void __usercall sub_4120A8(int a1@<ebp>);
int __cdecl sub_4120B0(int a1, int a2);
// void __usercall sub_4120E0(int a1@<ebp>);
// void __usercall sub_4120E8(int a1@<ebp>);
int __cdecl sub_4120F0(int a1, int a2);
// void __usercall sub_412120(int a1@<ebp>);
// int __usercall sub_412128@<eax>(int a1@<ebp>);
int __cdecl sub_412133(int a1, int a2);
int __cdecl sub_412160(int a1, int a2);
// void __usercall sub_412180(int a1@<ebp>);
int __cdecl sub_412188(int a1, int a2);
// void __usercall sub_4121B0(int a1@<ebp>);
// void __usercall sub_4121B8(int a1@<ebp>);
int __cdecl sub_4121C0(int a1, int a2);
// BOOL __usercall sub_4121F0@<eax>(int a1@<ebp>);
// void __usercall sub_4121FB(int a1@<ebp>);
// void __usercall sub_412206(int a1@<ebp>);
// void __usercall sub_41220E(int a1@<ebp>);
// void __usercall sub_412219(int a1@<ebp>);
// void __usercall sub_412224(int a1@<ebp>);
// void __usercall sub_41222C(int a1@<ebp>);
// void __usercall sub_412234(int a1@<ebp>);
// void __usercall sub_41223C(int a1@<ebp>);
int __cdecl sub_412244(int a1, int a2);
// void __usercall sub_412270(int a1@<ebp>);
// void __usercall sub_412289(int a1@<ebp>);
int __cdecl sub_412291(int a1, int a2);
void sub_4122C0();
int __cdecl sub_4122CB(int a1, int a2);
// int __usercall sub_412300@<eax>(int a1@<ebp>);
// void __usercall sub_412308(int a1@<ebp>);
// int __usercall sub_412310@<eax>(int a1@<ebp>);
// void __usercall sub_41231B(int a1@<ebp>);
int __cdecl sub_412323(int a1, int a2);
// void __usercall sub_412350(int a1@<ebp>);
int __cdecl sub_412358(int a1, int a2);
// void __usercall sub_412380(int a1@<ebp>);
// void __usercall sub_412388(int a1@<ebp>);
int __cdecl sub_412390(int a1, int a2);
// void __usercall sub_4123C0(int a1@<ebp>);
int __cdecl sub_4123C8(int a1, int a2);
// void __usercall sub_4123F0(int a1@<ebp>);
int __cdecl sub_4123F8(int a1, int a2);
// void __usercall sub_412420(int a1@<ebp>);
// void __usercall sub_412428(int a1@<ebp>);
// void __usercall sub_412430(int a1@<ebp>);
// void __usercall sub_412438(int a1@<ebp>);
int __cdecl sub_412440(int a1, int a2);
// void __usercall sub_412470(int a1@<ebp>);
// void __usercall sub_412478(int a1@<ebp>);
int __cdecl sub_412480(int a1, int a2);
// void __usercall sub_4124B0(int a1@<ebp>);
int __cdecl sub_4124B8(int a1, int a2);
// void __usercall sub_4124E0(int a1@<ebp>);
int __cdecl sub_4124E8(int a1, int a2);
// void __usercall sub_412510(int a1@<ebp>);
int __cdecl sub_412518(int a1, int a2);
// void __usercall sub_412540(int a1@<ebp>);
// void __usercall sub_412548(int a1@<ebp>);
// void __usercall sub_412553(int a1@<ebp>);
// void __usercall sub_41255E(int a1@<ebp>);
// void __usercall sub_412569(int a1@<ebp>);
// void __usercall sub_412571(int a1@<ebp>);
// void __usercall sub_41257C(int a1@<ebp>);
// void __usercall sub_412584(int a1@<ebp>);
// void __usercall sub_41258F(int a1@<ebp>);
// void __usercall sub_41259A(int a1@<ebp>);
// void __usercall sub_4125A5(int a1@<ebp>);
// void __usercall sub_4125B0(int a1@<ebp>);
// void __usercall sub_4125BB(int a1@<ebp>);
// void __usercall sub_4125C6(int a1@<ebp>);
// void __usercall sub_4125D1(int a1@<ebp>);
// void __usercall sub_4125DC(int a1@<ebp>);
int __cdecl sub_4125E7(int a1, int a2);
// void __usercall sub_412610(int a1@<ebp>);
// void __usercall sub_412618(int a1@<ebp>);
// void __usercall sub_412620(int a1@<ebp>);
// void __usercall sub_412628(int a1@<ebp>);
// void __usercall sub_412630(int a1@<ebp>);
// void __usercall sub_41263B(int a1@<ebp>);
// void __usercall sub_412646(int a1@<ebp>);
// void __usercall sub_412651(int a1@<ebp>);
int __cdecl sub_412659(int a1, int a2);
int sub_412690();
int sub_4126A0();
int sub_4126B0();
void sub_4126C0();
void sub_4126D0();
int sub_4126DB();
void __cdecl sub_4126F0();
void __cdecl sub_412700();
void __cdecl sub_412710();
void __cdecl sub_41271B();
// LSTATUS __stdcall RegCloseKey(HKEY hKey);
// LSTATUS __stdcall RegOpenKeyA(HKEY hKey, LPCSTR lpSubKey, PHKEY phkResult);
// LSTATUS __stdcall RegQueryValueExA(HKEY hKey, LPCSTR lpValueName, LPDWORD lpReserved, LPDWORD lpType, LPBYTE lpData, LPDWORD lpcbData);
// int __stdcall RhInjectLibrary(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// HBRUSH __stdcall CreatePatternBrush(HBITMAP hbm);
// BOOL __stdcall Process32Next(HANDLE hSnapshot, LPPROCESSENTRY32 lppe);
// void __stdcall Sleep(DWORD dwMilliseconds);
// BOOL __stdcall GetExitCodeProcess(HANDLE hProcess, LPDWORD lpExitCode);
// HANDLE __stdcall OpenProcess(DWORD dwDesiredAccess, BOOL bInheritHandle, DWORD dwProcessId);
// BOOL __stdcall ReadProcessMemory(HANDLE hProcess, LPCVOID lpBaseAddress, LPVOID lpBuffer, SIZE_T nSize, SIZE_T *lpNumberOfBytesRead);
// BOOL __stdcall VirtualProtectEx(HANDLE hProcess, LPVOID lpAddress, SIZE_T dwSize, DWORD flNewProtect, PDWORD lpflOldProtect);
// BOOL __stdcall WriteProcessMemory(HANDLE hProcess, LPVOID lpBaseAddress, LPCVOID lpBuffer, SIZE_T nSize, SIZE_T *lpNumberOfBytesWritten);
// DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
// DWORD __stdcall GetTempPathA(DWORD nBufferLength, LPSTR lpBuffer);
// DWORD __stdcall GetLastError();
// BOOL __stdcall Process32First(HANDLE hSnapshot, LPPROCESSENTRY32 lppe);
// HLOCAL __stdcall LocalFree(HLOCAL hMem);
// void __stdcall GetSystemTimeAsFileTime(LPFILETIME lpSystemTimeAsFileTime);
// DWORD __stdcall GetCurrentThreadId();
// DWORD __stdcall GetCurrentProcessId();
// BOOL __stdcall QueryPerformanceCounter(LARGE_INTEGER *lpPerformanceCount);
// BOOL __stdcall IsDebuggerPresent();
// PVOID __stdcall DecodePointer(PVOID Ptr);
// PVOID __stdcall EncodePointer(PVOID Ptr);
// HANDLE __stdcall CreateToolhelp32Snapshot(DWORD dwFlags, DWORD th32ProcessID);
// BOOL __stdcall DebugActiveProcessStop(DWORD dwProcessId);
// BOOL __stdcall DebugSetProcessKillOnExit(BOOL KillOnExit);
// BOOL __stdcall WaitForDebugEvent(LPDEBUG_EVENT lpDebugEvent, DWORD dwMilliseconds);
// BOOL __stdcall CreateProcessA(LPCSTR lpApplicationName, LPSTR lpCommandLine, LPSECURITY_ATTRIBUTES lpProcessAttributes, LPSECURITY_ATTRIBUTES lpThreadAttributes, BOOL bInheritHandles, DWORD dwCreationFlags, LPVOID lpEnvironment, LPCSTR lpCurrentDirectory, LPSTARTUPINFOA lpStartupInfo, LPPROCESS_INFORMATION lpProcessInformation);
// BOOL __stdcall CloseHandle(HANDLE hObject);
// DWORD __stdcall FormatMessageA(DWORD dwFlags, LPCVOID lpSource, DWORD dwMessageId, DWORD dwLanguageId, LPSTR lpBuffer, DWORD nSize, va_list *Arguments);
// void __stdcall OutputDebugStringA(LPCSTR lpOutputString);
// int __thiscall std::codecvt<char,char,int>::in(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::codecvt<char,char,int>::out(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::setg(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::basic_istream<char,std::char_traits<char>>::basic_istream<char,std::char_traits<char>>(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD); weak
// int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD); weak
// int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD); weak
// int __thiscall std::codecvt<char,char,int>::unshift(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::basic_streambuf<char,std::char_traits<char>>(_DWORD); weak
// void __cdecl std::_Xbad_alloc(); weak
// void __cdecl std::_Xlength_error(const char *); weak
// void __cdecl std::_Xout_of_range(const char *); weak
// void __thiscall std::_Container_base0::_Orphan_all(std::_Container_base0 *__hidden this); weak
// const char *__cdecl std::_Winerror_map(_DWORD); weak
// const char *__cdecl std::_Syserror_map(_DWORD); weak
// int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD); weak
// int std::basic_ostream<char,std::char_traits<char>>::flush(void); weak
// int __thiscall std::basic_ios<char,std::char_traits<char>>::setstate(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::basic_ios<char,std::char_traits<char>>::clear(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::basic_ostream<char,std::char_traits<char>>::_Osfx(_DWORD); weak
// bool __cdecl std::uncaught_exception(); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sputc(_DWORD, _DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Pninc(_DWORD); weak
// int __thiscall std::basic_ios<char,std::char_traits<char>>::basic_ios<char,std::char_traits<char>>(_DWORD); weak
// int __thiscall std::basic_ostream<char,std::char_traits<char>>::basic_ostream<char,std::char_traits<char>>(_DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this); weak
// _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this, _DWORD); weak
// int std::locale::_Getgloballocale(void); weak
// int __thiscall std::locale::id::operator unsigned int(_DWORD); weak
// int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(_DWORD); weak
// int __thiscall std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(_DWORD); weak
// struct _iobuf *__cdecl std::_Fiopen(const char *, _DWORD, _DWORD); weak
// bool __thiscall std::codecvt_base::always_noconv(std::codecvt_base *__hidden this); weak
// int __thiscall std::basic_ostream<char,std::char_traits<char>>::_Add_vtordisp2(_DWORD); weak
// int __thiscall std::basic_istream<char,std::char_traits<char>>::_Add_vtordisp1(_DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sputn(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __cdecl std::codecvt<char,char,int>::_Getcat(_DWORD, _DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD); weak
// int __thiscall std::basic_streambuf<char,std::char_traits<char>>::getloc(_DWORD, _DWORD); weak
// int __cdecl fseeki64(FILE *File, __int64 Offset, int Origin);
// int __cdecl _setusermatherr(_DWORD); weak
// int __cdecl configthreadlocale(_DWORD); weak
// int __cdecl _set_app_type(_DWORD); weak
// int __cdecl _getmainargs(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// _onexit_t __cdecl onexit(_onexit_t Func);
// void __cdecl operator delete(void *); weak
// void *__cdecl operator new(unsigned int); weak
// void *__cdecl memmove(void *Dst, const void *Src, size_t Size);
// int __cdecl strncmp(const char *Str1, const char *Str2, size_t MaxCount);
// int __cdecl atoi(const char *Str);
// void __cdecl operator delete[](void *); weak
// _DWORD __thiscall std::bad_cast::bad_cast(std::bad_cast *__hidden this, const char *); weak
// int __cdecl lock_file(_DWORD); weak
// int __cdecl unlock_file(_DWORD); weak
// int __cdecl fputc(int Ch, FILE *File);
// size_t __cdecl fwrite(const void *Str, size_t Size, size_t Count, FILE *File);
// int __cdecl ungetc(int Ch, FILE *File);
// int __cdecl fgetc(FILE *File);
// errno_t __cdecl memcpy_s(void *Dst, rsize_t DstSize, const void *Src, rsize_t MaxCount);
// int __cdecl fgetpos(FILE *File, fpos_t *Pos);
// int __cdecl fsetpos(FILE *File, const fpos_t *Pos);
// int __cdecl setvbuf(FILE *File, char *Buf, int Mode, size_t Size);
// int __cdecl fflush(FILE *File);
// void *__cdecl memchr(const void *Buf, int Val, size_t MaxCount);
// int __cdecl fclose(FILE *File);
// int __cdecl calloc_crt(_DWORD, _DWORD); weak
// HINSTANCE __stdcall ShellExecuteA(HWND hwnd, LPCSTR lpOperation, LPCSTR lpFile, LPCSTR lpParameters, LPCSTR lpDirectory, INT nShowCmd);
// BOOL __stdcall ShellExecuteExA(SHELLEXECUTEINFOA *pExecInfo);
// ATOM __stdcall RegisterClassExA(const WNDCLASSEXA *);
// int __stdcall LoadStringA(HINSTANCE hInstance, UINT uID, LPSTR lpBuffer, int cchBufferMax);
// HACCEL __stdcall LoadAcceleratorsA(HINSTANCE hInstance, LPCSTR lpTableName);
// BOOL __stdcall GetMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax);
// int __stdcall TranslateAcceleratorA(HWND hWnd, HACCEL hAccTable, LPMSG lpMsg);
// BOOL __stdcall TranslateMessage(const MSG *lpMsg);
// LRESULT __stdcall DispatchMessageA(const MSG *lpMsg);
// HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
// int __stdcall GetSystemMetrics(int nIndex);
// LONG __stdcall SetWindowLongA(HWND hWnd, int nIndex, LONG dwNewLong);
// BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow);
// BOOL __stdcall UpdateWindow(HWND hWnd);
// LONG __stdcall GetWindowLongA(HWND hWnd, int nIndex);
// INT_PTR __stdcall DialogBoxParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// BOOL __stdcall DestroyWindow(HWND hWnd);
// LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// HDC __stdcall BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint);
// BOOL __stdcall EndPaint(HWND hWnd, const PAINTSTRUCT *lpPaint);
// void __stdcall PostQuitMessage(int nExitCode);
// BOOL __stdcall EndDialog(HWND hDlg, INT_PTR nResult);
// HMENU __stdcall GetMenu(HWND hWnd);
// BOOL __stdcall GetMenuItemInfoA(HMENU hmenu, UINT item, BOOL fByPosition, LPMENUITEMINFOA lpmii);
// BOOL __stdcall SetMenuItemInfoA(HMENU hmenu, UINT item, BOOL fByPositon, LPCMENUITEMINFOA lpmii);
// int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType);
// HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);
// HICON __stdcall LoadIconA(HINSTANCE hInstance, LPCSTR lpIconName);
// HBITMAP __stdcall LoadBitmapA(HINSTANCE hInstance, LPCSTR lpBitmapName);
// BOOL __stdcall VerQueryValueA(LPCVOID pBlock, LPCSTR lpSubBlock, LPVOID *lplpBuffer, PUINT puLen);
// BOOL __stdcall GetFileVersionInfoA(LPCSTR lptstrFilename, DWORD dwHandle, DWORD dwLen, LPVOID lpData);
// DWORD __stdcall GetFileVersionInfoSizeA(LPCSTR lptstrFilename, LPDWORD lpdwHandle);
// int win_sparkle_check_update_with_ui(void); weak
// int win_sparkle_cleanup(void); weak
// int win_sparkle_init(void); weak
// int __cdecl win_sparkle_set_appcast_url(_DWORD); weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_402C00; // weak
_UNKNOWN loc_402D80; // weak
_UNKNOWN loc_407600; // weak
_UNKNOWN loc_407640; // weak
_UNKNOWN loc_40E750; // weak
_UNKNOWN loc_410320; // weak
_UNKNOWN loc_4109B0; // weak
// extern _UNKNOWN initterm_e; weak
// extern _UNKNOWN std::endl; weak
// extern _UNKNOWN std::basic_ostream<char,std::char_traits<char>>::`vftable'; weak
// extern const __int64 std::_BADOFF; weak
// extern _UNKNOWN std::codecvt<char,char,int>::id; weak
// extern _UNKNOWN commode; weak
// extern int fmode;
int *off_413348[2] = { &dword_4184C0, &dword_418510 }; // weak
_UNKNOWN unk_413610; // weak
int (__stdcall *off_4136D8)(char) = &sub_405E10; // weak
int (*off_413E28[2])() = { &sub_410476, &sub_410456 }; // weak
_UNKNOWN unk_413E34; // weak
int (__stdcall *off_413E44)(char) = &sub_40C280; // weak
int (*off_413E84)() = &sub_41047E; // weak
_UNKNOWN unk_413E90; // weak
int (__stdcall *off_413E9C)(char) = &sub_40C1F0; // weak
int (*off_413EDC)() = &sub_41046E; // weak
_UNKNOWN unk_413EF4; // weak
_UNKNOWN unk_413EFC; // weak
_UNKNOWN unk_414524; // weak
_UNKNOWN unk_41452C; // weak
_UNKNOWN unk_4145F4; // weak
int __security_cookie = 3141592654; // weak
int dword_41801C = 1153374641; // weak
int dword_418020 = 1; // weak
int dword_418024 = 4294967294; // weak
char aC[4] = "çÍ·Ø"; // idb
char Str2[5] = "’u¡[\b"; // idb
int (__stdcall **off_418488[3])(char) = { &off_4136A0, &off_413684, &off_4136BC }; // weak
int (__stdcall **off_41848C[2])(char) = { &off_413684, &off_4136BC }; // weak
int (__stdcall **off_418490)(char) = &off_4136BC; // weak
void *dword_418498 = NULL; // idb
_UNKNOWN unk_4184A8; // weak
_UNKNOWN unk_4184AC; // weak
_UNKNOWN unk_4184B0; // weak
int dword_4184B4 = 0; // weak
int dword_4184B8 = 0; // weak
int dword_4184BC = 0; // weak
int dword_4184C0 = 0; // weak
int dword_4184C4 = 0; // weak
int dword_4184CC = 0; // weak
int dword_4184D0 = 0; // weak
int dword_4184D4 = 0; // weak
int dword_418510 = 0; // weak
__int16 word_41859C = 0; // weak
__int16 word_4185A0 = 0; // weak
__int16 word_4185A4 = 0; // weak
__int16 word_4185A8 = 0; // weak
int dword_4185AC = 0; // weak
int dword_4185B0 = 0; // weak
int dword_4185B4 = 0; // weak
int dword_4185B8 = 0; // weak
int dword_4185BC = 0; // weak
int dword_4185C0 = 0; // weak
int dword_4185C4 = 0; // weak
int dword_4185C8 = 0; // weak
__int16 word_4185CC = 0; // weak
int dword_4185D0 = 0; // weak
int dword_4185D4 = 0; // weak
__int16 word_4185D8 = 0; // weak
int dword_4187DC; // weak
int dword_4187E0; // weak
int dword_4187E4; // weak
int dword_4187E8; // weak
int dword_4187EC; // weak
CHAR ClassName[100]; // idb
HINSTANCE hInstance; // idb
CHAR WindowName[108]; // idb
int dword_4188C4; // weak
int dword_4188C8; // weak
int dword_4188CC; // weak
int dword_4188D0; // weak
PVOID dword_4188E0; // idb
PVOID Ptr; // idb


//----- (00401000) --------------------------------------------------------
WPARAM __stdcall sub_401000(HINSTANCE hInstance, int a2, void *Src, int nCmdShow)
{
  bool v4; // zf@1
  size_t v5; // ecx@2
  WPARAM v6; // esi@5
  HACCEL hAccTable; // [sp+10h] [bp-308h]@6
  struct tagMSG Msg; // [sp+14h] [bp-304h]@6
  int v10; // [sp+30h] [bp-2E8h]@1
  int v11; // [sp+40h] [bp-2D8h]@1
  unsigned int v12; // [sp+44h] [bp-2D4h]@1
  LONG dwNewLong; // [sp+48h] [bp-2D0h]@4

  v4 = *(_BYTE *)Src == 0;
  v12 = 15;
  v11 = 0;
  LOBYTE(v10) = 0;
  if ( v4 )
    v5 = 0;
  else
    v5 = strlen((const char *)Src);
  sub_405CB0((int)&v10, Src, v5);
  sub_406080((int)&dwNewLong, (int)&v10);
  LoadStringA(hInstance, 0x67u, WindowName, 100);
  LoadStringA(hInstance, 0x6Du, ClassName, 100);
  sub_401170(hInstance);
  if ( sub_401200(hInstance, nCmdShow, (LONG)&dwNewLong) )
  {
    hAccTable = LoadAcceleratorsA(hInstance, (LPCSTR)0x6D);
    win_sparkle_set_appcast_url("http://online.the3rdage.net/update/AppcastCNC.xml");
    win_sparkle_init();
    while ( GetMessageA(&Msg, 0, 0, 0) )
    {
      if ( !TranslateAcceleratorA(Msg.hwnd, hAccTable, &Msg) )
      {
        TranslateMessage(&Msg);
        DispatchMessageA(&Msg);
      }
    }
    win_sparkle_cleanup();
    v6 = Msg.wParam;
  }
  else
  {
    v6 = 0;
  }
  sub_407680((char *)&dwNewLong);
  if ( v12 >= 0x10 )
    operator delete((void *)v10);
  return v6;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4132F4: using guessed type int win_sparkle_cleanup(void);
// 4132F8: using guessed type int win_sparkle_init(void);
// 4132FC: using guessed type int __cdecl win_sparkle_set_appcast_url(_DWORD);

//----- (00401170) --------------------------------------------------------
ATOM __thiscall sub_401170(HINSTANCE hInstance)
{
  HINSTANCE v1; // edi@1
  HBITMAP v2; // eax@1
  WNDCLASSEXA v4; // [sp+8h] [bp-30h]@1

  v1 = hInstance;
  v4.cbSize = 48;
  v4.style = 3;
  v4.lpfnWndProc = (WNDPROC)sub_4012A0;
  v4.cbClsExtra = 0;
  v4.cbWndExtra = 0;
  v4.hInstance = hInstance;
  v4.hIcon = LoadIconA(hInstance, (LPCSTR)0x6B);
  v4.hIconSm = LoadIconA(v4.hInstance, (LPCSTR)0x6C);
  v4.hCursor = LoadCursorA(0, (LPCSTR)0x7F00);
  v2 = LoadBitmapA(v1, (LPCSTR)0x12D);
  v4.hbrBackground = CreatePatternBrush(v2);
  v4.lpszMenuName = (LPCSTR)109;
  v4.lpszClassName = ClassName;
  return RegisterClassExA(&v4);
}

//----- (00401200) --------------------------------------------------------
HWND __usercall sub_401200@<eax>(HINSTANCE hInstance@<ecx>, int nCmdShow@<edx>, LONG dwNewLong)
{
  HINSTANCE v3; // ST28_4@1
  int v4; // edi@1
  int v5; // ST14_4@1
  int v6; // eax@1
  HWND result; // eax@1
  HWND v8; // esi@1

  v3 = hInstance;
  v4 = nCmdShow;
  ::hInstance = hInstance;
  v5 = GetSystemMetrics(1) / 2 - 253;
  v6 = GetSystemMetrics(0);
  result = CreateWindowExA(0, ClassName, WindowName, 0xCA0000u, v6 / 2 - 300, v5, 600, 406, 0, 0, v3, 0);
  v8 = result;
  if ( result )
  {
    SetWindowLongA(result, -21, dwNewLong);
    ShowWindow(v8, v4);
    UpdateWindow(v8);
    result = (HWND)1;
  }
  return result;
}

//----- (004012A0) --------------------------------------------------------
LRESULT __stdcall sub_4012A0(HWND hWnd, int a2, WPARAM wParam, LPARAM lParam)
{
  int *v4; // eax@1
  int *v5; // eax@1
  HINSTANCE v6; // ecx@1
  void *v7; // eax@1
  void (__cdecl *v8)(void *); // ebx@1
  HINSTANCE v9; // ecx@7
  void *v10; // eax@7
  HINSTANCE v11; // ecx@13
  void *v12; // eax@13
  HINSTANCE v13; // ecx@19
  void *v14; // eax@19
  HINSTANCE v15; // ecx@25
  void *v16; // eax@25
  HINSTANCE v17; // ecx@31
  void *v18; // eax@31
  HINSTANCE v19; // ecx@37
  void *v20; // eax@37
  HINSTANCE v21; // ecx@43
  void *v22; // eax@43
  HINSTANCE v23; // ecx@49
  void *v24; // eax@49
  void *v25; // esi@51
  LRESULT v26; // edi@55
  int *v27; // esi@56
  int v28; // eax@56
  int v29; // edi@57
  const CHAR *v30; // ebx@57
  HWND *v31; // eax@59
  char v33; // [sp-28h] [bp-104h]@1
  int v34; // [sp-24h] [bp-100h]@1
  int v35; // [sp-20h] [bp-FCh]@1
  int v36; // [sp-1Ch] [bp-F8h]@1
  void *v37; // [sp-18h] [bp-F4h]@1
  int v38; // [sp-14h] [bp-F0h]@1
  HWND v39; // [sp-10h] [bp-ECh]@1
  HMENU v40; // [sp-Ch] [bp-E8h]@1
  HINSTANCE v41; // [sp-8h] [bp-E4h]@1
  int *v42; // [sp-4h] [bp-E0h]@1
  HWND hWndParent; // [sp+14h] [bp-C8h]@1
  int *v44; // [sp+18h] [bp-C4h]@57
  int *v45; // [sp+1Ch] [bp-C0h]@1
  int v46; // [sp+20h] [bp-BCh]@1
  int *v47; // [sp+24h] [bp-B8h]@1
  int v48; // [sp+28h] [bp-B4h]@1
  int *v49; // [sp+2Ch] [bp-B0h]@57
  int v50; // [sp+30h] [bp-ACh]@60
  int v51; // [sp+34h] [bp-A8h]@60
  int *v52; // [sp+38h] [bp-A4h]@56
  int Dst; // [sp+3Ch] [bp-A0h]@1
  int v54; // [sp+4Ch] [bp-90h]@5
  unsigned int v55; // [sp+50h] [bp-8Ch]@3
  void *v56; // [sp+54h] [bp-88h]@1
  int v57; // [sp+58h] [bp-84h]@2
  int v58; // [sp+5Ch] [bp-80h]@2
  LPCSTR lpWindowName; // [sp+60h] [bp-7Ch]@1
  int v60; // [sp+70h] [bp-6Ch]@1
  unsigned int v61; // [sp+74h] [bp-68h]@1
  struct tagPAINTSTRUCT Paint; // [sp+84h] [bp-58h]@68
  int v63; // [sp+D8h] [bp-4h]@1

  hWndParent = hWnd;
  v48 = 0;
  sub_403930();
  v47 = v4;
  v63 = 0;
  v46 = 0;
  sub_403960();
  v45 = v5;
  LOBYTE(v63) = 1;
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "generals", 8u);
  v42 = (int *)411;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)39;
  LOBYTE(v63) = 2;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "Generals", 8u);
  v42 = (int *)sub_402280(&Dst, 21, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v6;
  LOBYTE(v63) = 3;
  v7 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v7, v42);
  v8 = operator delete;
  if ( v56 )
  {
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "generalszh", 0xAu);
  v42 = (int *)412;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)91;
  LOBYTE(v63) = 4;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "Zero Hour", 9u);
  v42 = (int *)sub_402280(&Dst, 21, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v9;
  LOBYTE(v63) = 5;
  v10 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v10, v42);
  if ( v56 )
  {
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "cnc3", 4u);
  v42 = (int *)413;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)143;
  LOBYTE(v63) = 6;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "C&&C3", 5u);
  v42 = (int *)sub_402280(&Dst, 21, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v11;
  LOBYTE(v63) = 7;
  v12 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v12, v42);
  if ( v56 )
  {
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "cnc3kw", 6u);
  v42 = (int *)414;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)195;
  LOBYTE(v63) = 8;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "Kane's Wrath", 0xCu);
  v42 = (int *)sub_402280(&Dst, 21, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v13;
  LOBYTE(v63) = 9;
  v14 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v14, v42);
  if ( v56 )
  {
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "ra3", 3u);
  v42 = (int *)415;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)247;
  LOBYTE(v63) = 10;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "Red Alert 3", 0xBu);
  v42 = (int *)sub_402280(&Dst, 21, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v15;
  LOBYTE(v63) = 11;
  v16 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v16, v42);
  if ( v56 )
  {
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "update", 6u);
  v42 = (int *)403;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)39;
  LOBYTE(v63) = 12;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "Update", 6u);
  v42 = (int *)sub_402280(&Dst, 461, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v17;
  LOBYTE(v63) = 13;
  v18 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v18, v42);
  if ( v56 )
  {
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "website", 7u);
  v42 = (int *)401;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)91;
  LOBYTE(v63) = 14;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "Website", 7u);
  v42 = (int *)sub_402280(&Dst, 461, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v19;
  LOBYTE(v63) = 15;
  v20 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v20, v42);
  if ( v56 )
  {
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  v61 = 15;
  v60 = 0;
  LOBYTE(lpWindowName) = 0;
  sub_405CB0((int)&lpWindowName, "facebook", 8u);
  v42 = (int *)402;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)143;
  LOBYTE(v63) = 16;
  v38 = 15;
  v37 = 0;
  v33 = 0;
  sub_405CB0((int)&v33, "Facebook", 8u);
  v42 = (int *)sub_402280(&Dst, 461, *(int *)&v33, v34, v35, v36, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
  v41 = v21;
  LOBYTE(v63) = 17;
  v22 = (void *)sub_4029B0(&v45, &lpWindowName);
  sub_402B10(v22, v42);
  LOBYTE(v63) = 16;
  if ( v56 )
  {
    std::_Container_base0::_Orphan_all((std::_Container_base0 *)&v56);
    operator delete(v56);
    v56 = 0;
    v57 = 0;
    v58 = 0;
  }
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  LOBYTE(v63) = 1;
  v55 = 15;
  v54 = 0;
  LOBYTE(Dst) = 0;
  if ( v61 >= 0x10 )
    operator delete((void *)lpWindowName);
  sub_405DB0((int)&Dst, "donate");
  v42 = (int *)404;
  v41 = (HINSTANCE)30;
  v40 = (HMENU)116;
  v39 = (HWND)195;
  LOBYTE(v63) = 18;
  sub_405DB0((int)&v33, "Donate!");
  v42 = (int *)sub_402280(
                 &lpWindowName,
                 461,
                 *(int *)&v33,
                 v34,
                 v35,
                 v36,
                 (int)v37,
                 v38,
                 (int)v39,
                 (int)v40,
                 (int)v41,
                 (int)v42);
  v41 = v23;
  LOBYTE(v63) = 19;
  v24 = (void *)sub_4029B0(&v45, &Dst);
  sub_402B10(v24, v42);
  sub_4021F0((int)&lpWindowName);
  LOBYTE(v63) = 1;
  if ( v55 >= 0x10 )
    operator delete((void *)Dst);
  v25 = (void *)GetWindowLongA(hWnd, -21);
  if ( (unsigned int)a2 > 0xF )
  {
    if ( a2 == 273 )
    {
      if ( (signed int)(unsigned __int16)wParam > 401 )
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x19Bu:
LABEL_87:
            sub_405DB0((int)&v37, "generals");
            sub_407970((int)v25, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0x19Cu:
LABEL_88:
            sub_405DB0((int)&v37, "generalszh");
            sub_407970((int)v25, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0x19Du:
LABEL_89:
            sub_405DB0((int)&v37, "cnc3");
            sub_407970((int)v25, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0x19Eu:
LABEL_90:
            sub_405DB0((int)&v37, "cnc3kw");
            sub_407970((int)v25, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0x19Fu:
LABEL_91:
            sub_405DB0((int)&v37, "ra3");
            sub_407970((int)v25, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0x193u:
LABEL_92:
            win_sparkle_check_update_with_ui();
            v26 = 0;
            goto LABEL_98;
          case 0x192u:
LABEL_93:
            ShellExecuteA(0, "open", "https://www.facebook.com/cnconline.revora", 0, 0, 1);
            v26 = 0;
            goto LABEL_98;
          case 0x194u:
LABEL_94:
            ShellExecuteA(
              0,
              "open",
              "https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=RFZVABURKTVRG",
              0,
              0,
              1);
            goto LABEL_95;
          default:
            break;
        }
      }
      else
      {
        if ( (unsigned __int16)wParam == 401 )
        {
LABEL_85:
          ShellExecuteA(0, "open", "http://cnc-online.net/", 0, 0, 1);
          v26 = 0;
          goto LABEL_98;
        }
        switch ( (unsigned __int16)wParam )
        {
          case 0x68u:
            DialogBoxParamA(hInstance, (LPCSTR)0x67, hWnd, DialogFunc, 0);
            v26 = 0;
            goto LABEL_98;
          case 0x70u:
            DialogBoxParamA(hInstance, (LPCSTR)0x6F, hWnd, DialogFunc, 0);
            v26 = 0;
            goto LABEL_98;
          case 0x69u:
            DestroyWindow(hWnd);
            v26 = 0;
            goto LABEL_98;
          case 0xCBu:
            ShellExecuteA(0, "open", "http://forums.revora.net/forum/2728-c-conline/", 0, 0, 1);
            v26 = 0;
            goto LABEL_98;
          case 0xCCu:
            ShellExecuteA(0, "open", "http://forums.revora.net/forum/2735-c-conline-support/", 0, 0, 1);
            v26 = 0;
            goto LABEL_98;
          case 0xDDu:
            sub_405DB0((int)&v37, "generals");
            sub_409570(v25, v37, v38, (int)v39, (int)v40, (int)v41, (unsigned int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0xDEu:
            sub_405DB0((int)&v37, "cnc3");
            sub_409570(v25, v37, v38, (int)v39, (int)v40, (int)v41, (unsigned int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0xDFu:
            sub_405DB0((int)&v37, "cnc3kw");
            sub_409570(v25, v37, v38, (int)v39, (int)v40, (int)v41, (unsigned int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0xE0u:
            sub_405DB0((int)&v37, "ra3");
            sub_409570(v25, v37, v38, (int)v39, (int)v40, (int)v41, (unsigned int)v42);
            v26 = 0;
            goto LABEL_98;
          case 0xC9u:
            goto LABEL_85;
          case 0xD3u:
            goto LABEL_87;
          case 0xD4u:
            goto LABEL_88;
          case 0xD5u:
            goto LABEL_89;
          case 0xD6u:
            goto LABEL_90;
          case 0xD7u:
            goto LABEL_91;
          case 0xCDu:
            goto LABEL_92;
          case 0xCAu:
            goto LABEL_93;
          case 0xCEu:
            goto LABEL_94;
          default:
            break;
        }
      }
      v42 = (int *)lParam;
      v41 = (HINSTANCE)wParam;
      v40 = (HMENU)273;
LABEL_97:
      v26 = DefWindowProcA(hWnd, (UINT)v40, (WPARAM)v41, (LPARAM)v42);
      goto LABEL_98;
    }
    if ( a2 == 279 )
    {
      sub_405DB0((int)&v37, "generals");
      sub_402530(0xDDu, (int)v25, hWnd, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
      sub_405DB0((int)&v37, "cnc3");
      sub_402530(0xDEu, (int)v25, hWnd, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
      sub_405DB0((int)&v37, "cnc3kw");
      sub_402530(0xDFu, (int)v25, hWnd, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
      sub_405DB0((int)&v37, "ra3");
      sub_402530(0xE0u, (int)v25, hWnd, (int)v37, v38, (int)v39, (int)v40, (int)v41, (int)v42);
      v26 = 0;
      goto LABEL_98;
    }
LABEL_71:
    v42 = (int *)lParam;
    v41 = (HINSTANCE)wParam;
    v40 = (HMENU)a2;
    goto LABEL_97;
  }
  if ( a2 == 15 )
  {
    BeginPaint(hWnd, &Paint);
    EndPaint(hWnd, &Paint);
    v26 = 0;
    goto LABEL_98;
  }
  if ( a2 != 1 )
  {
    if ( a2 == 2 )
    {
      PostQuitMessage(0);
      v26 = 0;
      goto LABEL_98;
    }
    goto LABEL_71;
  }
  v27 = v45;
  v28 = *v45;
  v52 = (int *)v28;
  if ( (int *)v28 == v45 )
  {
LABEL_95:
    v26 = 0;
  }
  else
  {
    do
    {
      v29 = v28 + 16;
      v55 = 15;
      v54 = 0;
      LOBYTE(Dst) = 0;
      sub_405900(&Dst, v28 + 16, 0, 0xFFFFFFFF);
      LOBYTE(v63) = 20;
      v61 = 15;
      v60 = 0;
      LOBYTE(lpWindowName) = 0;
      sub_405900(&lpWindowName, v29 + 24, 0, 0xFFFFFFFF);
      LOBYTE(v63) = 21;
      sub_402BB0((int)&v49, v29 + 48);
      LOBYTE(v63) = 22;
      v44 = v49;
      v30 = (const CHAR *)&lpWindowName;
      if ( v61 >= 0x10 )
        v30 = lpWindowName;
      v31 = (HWND *)sub_402890(&v47, (int)&Dst);
      v42 = 0;
      v41 = hInstance;
      v40 = (HMENU)v44[4];
      v39 = hWndParent;
      *v31 = CreateWindowExA(0, "button", v30, 0x50000000u, *v49, v44[1], v44[2], v44[3], hWndParent, v40, hInstance, 0);
      LOBYTE(v63) = 21;
      if ( v49 )
      {
        std::_Container_base0::_Orphan_all((std::_Container_base0 *)&v49);
        v8 = operator delete;
        operator delete(v49);
        v49 = 0;
        v50 = 0;
        v51 = 0;
      }
      else
      {
        v8 = operator delete;
      }
      if ( v61 >= 0x10 )
        v8((void *)lpWindowName);
      LOBYTE(v63) = 1;
      v61 = 15;
      v60 = 0;
      LOBYTE(lpWindowName) = 0;
      if ( v55 >= 0x10 )
        v8((void *)Dst);
      sub_403140(&v52);
      v28 = (int)v52;
    }
    while ( v52 != v27 );
    v26 = 0;
  }
LABEL_98:
  LOBYTE(v63) = 0;
  v42 = v45;
  sub_403000(&v45, (int *)&hWndParent, *v45, (int)v45);
  v8(v45);
  v63 = -1;
  v42 = v47;
  sub_402F40(&v47, (int *)&hWndParent, *v47, (int)v47);
  v8(v47);
  return v26;
}
// 4130C4: using guessed type void __thiscall std::_Container_base0::_Orphan_all(std::_Container_base0 *__hidden this);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4132F0: using guessed type int win_sparkle_check_update_with_ui(void);

//----- (00402190) --------------------------------------------------------
void __thiscall sub_402190(void **this)
{
  void **v1; // esi@1
  char v2; // [sp+4h] [bp-4h]@1

  v1 = this;
  sub_402F40(this, (int *)&v2, *(_DWORD *)*this, (int)*this);
  operator delete(*v1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004021C0) --------------------------------------------------------
void __thiscall sub_4021C0(void **this)
{
  void **v1; // esi@1
  char v2; // [sp+4h] [bp-4h]@1

  v1 = this;
  sub_403000(this, (int *)&v2, *(_DWORD *)*this, (int)*this);
  operator delete(*v1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004021F0) --------------------------------------------------------
void __thiscall sub_4021F0(int this)
{
  int v1; // esi@1

  v1 = this;
  if ( *(_DWORD *)(this + 24) )
  {
    operator delete(*(void **)(this + 24));
    *(_DWORD *)(v1 + 24) = 0;
    *(_DWORD *)(v1 + 28) = 0;
    *(_DWORD *)(v1 + 32) = 0;
  }
  if ( *(_DWORD *)(v1 + 20) >= 0x10u )
    operator delete(*(void **)v1);
  *(_DWORD *)(v1 + 20) = 15;
  *(_DWORD *)(v1 + 16) = 0;
  *(_BYTE *)v1 = 0;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402240) --------------------------------------------------------
BOOL __stdcall DialogFunc(HWND hDlg, UINT a2, WPARAM a3, LPARAM a4)
{
  if ( a2 == 272 )
    return 1;
  if ( a2 == 273 && ((_WORD)a3 == 1 || (_WORD)a3 == 2) )
  {
    EndDialog(hDlg, (unsigned __int16)a3);
    return 1;
  }
  return 0;
}

//----- (00402280) --------------------------------------------------------
void *__usercall sub_402280@<eax>(void *Dst@<ecx>, int a2@<edx>, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12)
{
  int v12; // esi@1
  void *v13; // edi@1
  _DWORD *v14; // ecx@1
  int v15; // esi@3
  int *v16; // ecx@12
  int v17; // esi@14
  int v18; // eax@17
  int *v19; // ecx@23
  int v20; // esi@25
  int v21; // eax@28
  int *v22; // ecx@34
  int v23; // esi@36
  int v24; // eax@39
  int *v25; // ecx@45
  int v26; // esi@47
  int v27; // eax@50
  int v29; // [sp+10h] [bp-38h]@1
  void *Src; // [sp+14h] [bp-34h]@1
  int v31; // [sp+24h] [bp-24h]@1
  unsigned int v32; // [sp+28h] [bp-20h]@1
  int *v33; // [sp+2Ch] [bp-1Ch]@1
  unsigned int v34; // [sp+30h] [bp-18h]@1
  int *v35; // [sp+34h] [bp-14h]@1
  int v36; // [sp+44h] [bp-4h]@1

  v12 = a2;
  v29 = a2;
  v13 = Dst;
  v36 = 0;
  v32 = 15;
  v31 = 0;
  LOBYTE(Src) = 0;
  v33 = 0;
  v34 = 0;
  v35 = 0;
  LOBYTE(v36) = 1;
  sub_405900(&Src, (int)&a3, 0, 0xFFFFFFFF);
  v14 = (_DWORD *)v34;
  if ( (unsigned int)&v29 >= v34 || v33 > &v29 )
  {
    if ( (int *)v34 == v35 )
    {
      sub_402DF0((int)&v33, v34);
      v14 = (_DWORD *)v34;
    }
    if ( v14 )
    {
      *v14 = v12;
      goto LABEL_11;
    }
  }
  else
  {
    v15 = &v29 - v33;
    if ( (int *)v34 == v35 )
    {
      sub_402DF0((int)&v33, v34);
      v14 = (_DWORD *)v34;
    }
    if ( v14 )
    {
      *v14 = v33[v15];
LABEL_11:
      v14 = (_DWORD *)v34;
      goto LABEL_12;
    }
  }
LABEL_12:
  v16 = v14 + 1;
  v34 = (unsigned int)v16;
  if ( &a9 >= v16 || v33 > &a9 )
  {
    if ( v16 == v35 )
    {
      sub_402DF0((int)&v33, (int)v16);
      v16 = (int *)v34;
    }
    if ( v16 )
    {
      v18 = a9;
      goto LABEL_22;
    }
  }
  else
  {
    v17 = &a9 - v33;
    if ( v16 == v35 )
    {
      sub_402DF0((int)&v33, (int)v16);
      v16 = (int *)v34;
    }
    if ( v16 )
    {
      v18 = v33[v17];
LABEL_22:
      *v16 = v18;
      v16 = (int *)v34;
      goto LABEL_23;
    }
  }
LABEL_23:
  v19 = v16 + 1;
  v34 = (unsigned int)v19;
  if ( &a10 >= v19 || v33 > &a10 )
  {
    if ( v19 == v35 )
    {
      sub_402DF0((int)&v33, (int)v19);
      v19 = (int *)v34;
    }
    if ( v19 )
    {
      v21 = a10;
      goto LABEL_33;
    }
  }
  else
  {
    v20 = &a10 - v33;
    if ( v19 == v35 )
    {
      sub_402DF0((int)&v33, (int)v19);
      v19 = (int *)v34;
    }
    if ( v19 )
    {
      v21 = v33[v20];
LABEL_33:
      *v19 = v21;
      v19 = (int *)v34;
      goto LABEL_34;
    }
  }
LABEL_34:
  v22 = v19 + 1;
  v34 = (unsigned int)v22;
  if ( &a11 >= v22 || v33 > &a11 )
  {
    if ( v22 == v35 )
    {
      sub_402DF0((int)&v33, (int)v22);
      v22 = (int *)v34;
    }
    if ( v22 )
    {
      v24 = a11;
      goto LABEL_44;
    }
  }
  else
  {
    v23 = &a11 - v33;
    if ( v22 == v35 )
    {
      sub_402DF0((int)&v33, (int)v22);
      v22 = (int *)v34;
    }
    if ( v22 )
    {
      v24 = v33[v23];
LABEL_44:
      *v22 = v24;
      v22 = (int *)v34;
      goto LABEL_45;
    }
  }
LABEL_45:
  v25 = v22 + 1;
  v34 = (unsigned int)v25;
  if ( &a12 >= v25 || v33 > &a12 )
  {
    if ( v25 == v35 )
    {
      sub_402DF0((int)&v33, (int)v25);
      v25 = (int *)v34;
    }
    if ( v25 )
    {
      v27 = a12;
      goto LABEL_55;
    }
  }
  else
  {
    v26 = &a12 - v33;
    if ( v25 == v35 )
    {
      sub_402DF0((int)&v33, (int)v25);
      v25 = (int *)v34;
    }
    if ( v25 )
    {
      v27 = v33[v26];
LABEL_55:
      *v25 = v27;
      v25 = (int *)v34;
      goto LABEL_56;
    }
  }
LABEL_56:
  v34 = (unsigned int)(v25 + 1);
  sub_403990(v13, &Src, (int)(v25 + 1));
  if ( v33 )
  {
    operator delete(v33);
    v33 = 0;
    v34 = 0;
    v35 = 0;
  }
  if ( v32 >= 0x10 )
    operator delete(Src);
  v32 = 15;
  v31 = 0;
  LOBYTE(Src) = 0;
  if ( (unsigned int)a8 >= 0x10 )
    operator delete((void *)a3);
  return v13;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402530) --------------------------------------------------------
void __usercall sub_402530(UINT item@<ecx>, int a2@<edx>, HWND hWnd, int a4, int a5, int a6, int a7, int a8, int a9)
{
  UINT v9; // edi@1
  int v10; // eax@1
  int v11; // ecx@1
  int v12; // eax@1
  int v13; // esi@1
  int v14; // eax@3
  bool v15; // zf@3
  bool v16; // bl@5
  struct tagMENUITEMINFOA mii; // [sp+14h] [bp-A8h]@1
  HMENU hmenu; // [sp+44h] [bp-78h]@1
  int v19; // [sp+48h] [bp-74h]@1
  int v20; // [sp+58h] [bp-64h]@7
  unsigned int v21; // [sp+5Ch] [bp-60h]@5
  void *SubKey[4]; // [sp+60h] [bp-5Ch]@1
  int v23; // [sp+70h] [bp-4Ch]@14
  unsigned int v24; // [sp+74h] [bp-48h]@12
  void *ValueName[4]; // [sp+78h] [bp-44h]@1
  int v26; // [sp+88h] [bp-34h]@1
  unsigned int v27; // [sp+8Ch] [bp-30h]@1
  int v28; // [sp+90h] [bp-2Ch]@1
  int v29; // [sp+A0h] [bp-1Ch]@1
  unsigned int v30; // [sp+A4h] [bp-18h]@1
  int v31; // [sp+B8h] [bp-4h]@1

  v9 = item;
  v31 = 0;
  v10 = sub_402730((_DWORD *)(a2 + 48), (int)&a4);
  v30 = 15;
  v29 = 0;
  LOBYTE(v28) = 0;
  sub_405900(&v28, v10, 0, 0xFFFFFFFF);
  LOBYTE(v31) = 1;
  sub_403A30(SubKey, "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Image File Execution Options\\", (int)&v28);
  LOBYTE(v31) = 2;
  mii.cbSize = 48;
  memset(&mii.fMask, 0, 0x2Cu);
  mii.fMask = 1;
  hmenu = GetMenu(hWnd);
  GetMenuItemInfoA(hmenu, v9, 0, &mii);
  v27 = 15;
  v26 = 0;
  LOBYTE(ValueName[0]) = 0;
  sub_405CB0((int)ValueName, "Debugger", 8u);
  LOBYTE(v31) = 3;
  v12 = sub_409880((int)&v19, v11, (LPCSTR)SubKey, (LPCSTR)ValueName);
  v13 = *(_DWORD *)(v12 + 16);
  if ( *(_DWORD *)(v12 + 20) >= 0x10u )
    v12 = *(_DWORD *)v12;
  v14 = sub_4055E0((int)&unk_413610, v12, 0);
  v15 = v14 == 0;
  if ( !v14 )
    v15 = v13 == 0;
  v16 = !v15;
  if ( v21 >= 0x10 )
    operator delete((void *)v19);
  v21 = 15;
  v20 = 0;
  LOBYTE(v19) = 0;
  if ( v27 >= 0x10 )
    operator delete(ValueName[0]);
  if ( v16 )
  {
    mii.fState |= 8u;
    OutputDebugStringA("Checking menu item.");
  }
  else
  {
    mii.fState &= 0xFFFFFFF7;
    OutputDebugStringA("Unchecking menu item.");
  }
  SetMenuItemInfoA(hmenu, v9, 0, &mii);
  if ( v24 >= 0x10 )
    operator delete(SubKey[0]);
  v24 = 15;
  v23 = 0;
  LOBYTE(SubKey[0]) = 0;
  if ( v30 >= 0x10 )
    operator delete((void *)v28);
  v30 = 15;
  v29 = 0;
  LOBYTE(v28) = 0;
  if ( (unsigned int)a9 >= 0x10 )
    operator delete((void *)a4);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402730) --------------------------------------------------------
int __thiscall sub_402730(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // ecx@1
  int v5; // esi@1
  unsigned int v6; // ecx@2
  _DWORD *v7; // edx@2
  unsigned int v8; // ebx@4
  unsigned int v9; // eax@7
  int v10; // eax@9
  bool v11; // sf@9
  signed int v12; // eax@11
  void *v13; // eax@16
  _DWORD *v14; // eax@16
  unsigned int v16; // [sp+14h] [bp-68h]@2
  int v17; // [sp+18h] [bp-64h]@5
  _DWORD *v18; // [sp+1Ch] [bp-60h]@1
  void *v19; // [sp+20h] [bp-5Ch]@16
  int v20; // [sp+30h] [bp-4Ch]@20
  unsigned int v21; // [sp+34h] [bp-48h]@18
  void *v22; // [sp+38h] [bp-44h]@17
  int v23; // [sp+48h] [bp-34h]@18
  unsigned int v24; // [sp+4Ch] [bp-30h]@16
  void *Src; // [sp+50h] [bp-2Ch]@16
  int v26; // [sp+60h] [bp-1Ch]@16
  unsigned int v27; // [sp+64h] [bp-18h]@16
  int v28; // [sp+78h] [bp-4h]@16

  v2 = this;
  v18 = this;
  v3 = sub_402E60(this, a2);
  v5 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v6 = *(_DWORD *)(v3 + 32);
  v7 = (_DWORD *)(v3 + 16);
  v16 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v7 = (_DWORD *)*v7;
  v8 = *(_DWORD *)(a2 + 16);
  if ( *(_DWORD *)(a2 + 20) < 0x10u )
    v17 = a2;
  else
    v17 = *(_DWORD *)a2;
  v9 = *(_DWORD *)(v3 + 32);
  if ( v8 < v6 )
    v9 = *(_DWORD *)(a2 + 16);
  v10 = sub_4055E0((int)v7, v17, v9);
  v11 = v10 < 0;
  if ( !v10 )
  {
    v4 = v16;
    if ( v8 >= v16 )
      v12 = v8 != v16;
    else
      v12 = -1;
    v11 = v12 < 0;
  }
  if ( v11 )
  {
    v2 = v18;
LABEL_16:
    v27 = 15;
    v26 = 0;
    LOBYTE(Src) = 0;
    v28 = 0;
    v13 = (void *)sub_403B80((int)&v19, a2, &Src, v4);
    LOBYTE(v28) = 1;
    v14 = sub_403E00(v2, v13);
    sub_403E30((int)v2, &v18, v5, (int)(v14 + 4), (int)v14);
    v5 = (int)v18;
    if ( v24 >= 0x10 )
      operator delete(v22);
    v24 = 15;
    v23 = 0;
    LOBYTE(v22) = 0;
    if ( v21 >= 0x10 )
      operator delete(v19);
    v21 = 15;
    v20 = 0;
    LOBYTE(v19) = 0;
    if ( v27 >= 0x10 )
      operator delete(Src);
  }
  return v5 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402890) --------------------------------------------------------
int __thiscall sub_402890(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // esi@1
  unsigned int v5; // ecx@2
  _DWORD *v6; // edx@2
  unsigned int v7; // ebx@4
  unsigned int v8; // eax@7
  int v9; // eax@9
  bool v10; // sf@9
  signed int v11; // eax@11
  _DWORD *v12; // eax@16
  unsigned int v14; // [sp+14h] [bp-38h]@2
  int v15; // [sp+18h] [bp-34h]@5
  _DWORD *v16; // [sp+1Ch] [bp-30h]@1
  void *Src; // [sp+20h] [bp-2Ch]@16
  int v18; // [sp+30h] [bp-1Ch]@16
  unsigned int v19; // [sp+34h] [bp-18h]@16
  int v20; // [sp+38h] [bp-14h]@16
  int v21; // [sp+48h] [bp-4h]@16

  v2 = this;
  v16 = this;
  v3 = sub_402E60(this, a2);
  v4 = v3;
  if ( v3 == *v2 )
  {
LABEL_16:
    v19 = 15;
    v18 = 0;
    LOBYTE(Src) = 0;
    sub_405900(&Src, a2, 0, 0xFFFFFFFF);
    v20 = 0;
    v21 = 0;
    v12 = sub_404060(v2, &Src);
    sub_404090((int)v2, &v16, v4, (int)(v12 + 4), (int)v12);
    v4 = (int)v16;
    if ( v19 >= 0x10 )
      operator delete(Src);
    return v4 + 40;
  }
  v5 = *(_DWORD *)(v3 + 32);
  v6 = (_DWORD *)(v3 + 16);
  v14 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v6 = (_DWORD *)*v6;
  v7 = *(_DWORD *)(a2 + 16);
  if ( *(_DWORD *)(a2 + 20) < 0x10u )
    v15 = a2;
  else
    v15 = *(_DWORD *)a2;
  v8 = *(_DWORD *)(v3 + 32);
  if ( v7 < v5 )
    v8 = *(_DWORD *)(a2 + 16);
  v9 = sub_4055E0((int)v6, v15, v8);
  v10 = v9 < 0;
  if ( !v9 )
  {
    if ( v7 >= v14 )
      v11 = v7 != v14;
    else
      v11 = -1;
    v10 = v11 < 0;
  }
  if ( v10 )
  {
    v2 = v16;
    goto LABEL_16;
  }
  return v4 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004029B0) --------------------------------------------------------
int __thiscall sub_4029B0(_DWORD *this, void *Src)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // ecx@1
  int v5; // esi@1
  unsigned int v6; // ecx@2
  _DWORD *v7; // edx@2
  unsigned int v8; // ebx@4
  unsigned int v9; // eax@7
  int v10; // eax@9
  bool v11; // sf@9
  signed int v12; // eax@11
  void *v13; // eax@16
  _DWORD *v14; // eax@16
  unsigned int v16; // [sp+10h] [bp-7Ch]@2
  void *v17; // [sp+14h] [bp-78h]@5
  _DWORD *v18; // [sp+18h] [bp-74h]@1
  int v19; // [sp+1Ch] [bp-70h]@16
  void *v20; // [sp+58h] [bp-34h]@16
  int v21; // [sp+68h] [bp-24h]@16
  unsigned int v22; // [sp+6Ch] [bp-20h]@16
  void *v23; // [sp+70h] [bp-1Ch]@16
  int v24; // [sp+74h] [bp-18h]@16
  int v25; // [sp+78h] [bp-14h]@16
  int v26; // [sp+88h] [bp-4h]@16

  v2 = this;
  v18 = this;
  v3 = sub_402E60(this, (int)Src);
  v5 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v6 = *(_DWORD *)(v3 + 32);
  v7 = (_DWORD *)(v3 + 16);
  v16 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v7 = (_DWORD *)*v7;
  v8 = *((_DWORD *)Src + 4);
  if ( *((_DWORD *)Src + 5) < 0x10u )
    v17 = Src;
  else
    v17 = *(void **)Src;
  v9 = *(_DWORD *)(v3 + 32);
  if ( v8 < v6 )
    v9 = *((_DWORD *)Src + 4);
  v10 = sub_4055E0((int)v7, (int)v17, v9);
  v11 = v10 < 0;
  if ( !v10 )
  {
    v4 = v16;
    if ( v8 >= v16 )
      v12 = v8 != v16;
    else
      v12 = -1;
    v11 = v12 < 0;
  }
  if ( v11 )
  {
    v2 = v18;
LABEL_16:
    v22 = 15;
    v21 = 0;
    LOBYTE(v20) = 0;
    v23 = 0;
    v24 = 0;
    v25 = 0;
    v26 = 0;
    v13 = (void *)sub_403C10((int)&v19, Src, &v20, v4);
    LOBYTE(v26) = 1;
    v14 = sub_4042C0(v2, v13);
    sub_4042F0((int)v2, &v18, v5, (int)(v14 + 4), (int)v14);
    v5 = (int)v18;
    sub_402CB0((int)&v19);
    if ( v23 )
    {
      operator delete(v23);
      v23 = 0;
      v24 = 0;
      v25 = 0;
    }
    if ( v22 >= 0x10 )
      operator delete(v20);
  }
  return v5 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402B10) --------------------------------------------------------
void *__thiscall sub_402B10(void *Dst, void *Src)
{
  void *v2; // esi@1
  void (__cdecl *v3)(void *); // ecx@1
  char *v4; // ebx@5
  void **v5; // edi@5

  v2 = Dst;
  v3 = operator delete;
  if ( v2 != Src )
  {
    if ( *((_DWORD *)v2 + 5) >= 0x10u )
      operator delete(*(void **)v2);
    *((_DWORD *)v2 + 5) = 15;
    *((_DWORD *)v2 + 4) = 0;
    *(_BYTE *)v2 = 0;
    sub_4057A0(v2, Src);
    v3 = operator delete;
  }
  v4 = (char *)Src + 24;
  v5 = (void **)((char *)v2 + 24);
  if ( (char *)v2 + 24 != (char *)Src + 24 )
  {
    if ( *v5 )
    {
      v3(*v5);
      *v5 = 0;
      *((_DWORD *)v2 + 7) = 0;
      *((_DWORD *)v2 + 8) = 0;
    }
    *v5 = *(void **)v4;
    *((_DWORD *)v2 + 7) = *((_DWORD *)Src + 7);
    *((_DWORD *)v2 + 8) = *((_DWORD *)Src + 8);
    *(_DWORD *)v4 = 0;
    *((_DWORD *)Src + 7) = 0;
    *((_DWORD *)Src + 8) = 0;
  }
  return v2;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402BB0) --------------------------------------------------------
int __thiscall sub_402BB0(int this, int a2)
{
  int v2; // esi@1
  int v3; // ecx@2

  v2 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  if ( (unsigned __int8)((int (__stdcall *)(int))loc_402D80)((*(_DWORD *)(a2 + 4) - *(_DWORD *)a2) >> 2) )
  {
    v3 = *(_DWORD *)v2;
    *(_DWORD *)(v2 + 4) = sub_4053F0(*(_DWORD **)a2, *(_DWORD **)(a2 + 4));
  }
  return v2;
}

//----- (00402C30) --------------------------------------------------------
void __thiscall sub_402C30(int this)
{
  int v1; // esi@1

  v1 = this;
  if ( *(_DWORD *)(this + 44) >= 0x10u )
    operator delete(*(void **)(this + 24));
  *(_DWORD *)(v1 + 44) = 15;
  *(_DWORD *)(v1 + 40) = 0;
  *(_BYTE *)(v1 + 24) = 0;
  if ( *(_DWORD *)(v1 + 20) >= 0x10u )
    operator delete(*(void **)v1);
  *(_DWORD *)(v1 + 20) = 15;
  *(_DWORD *)(v1 + 16) = 0;
  *(_BYTE *)v1 = 0;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402C80) --------------------------------------------------------
void __thiscall sub_402C80(int this)
{
  int v1; // esi@1

  v1 = this;
  if ( *(_DWORD *)(this + 20) >= 0x10u )
    operator delete(*(void **)this);
  *(_DWORD *)(v1 + 20) = 15;
  *(_DWORD *)(v1 + 16) = 0;
  *(_BYTE *)v1 = 0;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402CB0) --------------------------------------------------------
void __thiscall sub_402CB0(int this)
{
  int v1; // esi@1

  v1 = this;
  if ( *(_DWORD *)(this + 48) )
  {
    operator delete(*(void **)(this + 48));
    *(_DWORD *)(v1 + 48) = 0;
    *(_DWORD *)(v1 + 52) = 0;
    *(_DWORD *)(v1 + 56) = 0;
  }
  if ( *(_DWORD *)(v1 + 44) >= 0x10u )
    operator delete(*(void **)(v1 + 24));
  *(_DWORD *)(v1 + 44) = 15;
  *(_DWORD *)(v1 + 40) = 0;
  *(_BYTE *)(v1 + 24) = 0;
  if ( *(_DWORD *)(v1 + 20) >= 0x10u )
    operator delete(*(void **)v1);
  *(_DWORD *)(v1 + 20) = 15;
  *(_DWORD *)(v1 + 16) = 0;
  *(_BYTE *)v1 = 0;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00402D20) --------------------------------------------------------
bool __stdcall sub_402D20(int a1, int a2)
{
  int v2; // edx@1
  unsigned int v3; // esi@1
  int v4; // ecx@3
  unsigned int v5; // edi@3
  unsigned int v6; // eax@5
  int v7; // ecx@7

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 16);
  if ( *(_DWORD *)(a2 + 20) >= 0x10u )
    v2 = *(_DWORD *)a2;
  v4 = a1;
  v5 = *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 20) >= 0x10u )
    v4 = *(_DWORD *)a1;
  v6 = *(_DWORD *)(a2 + 16);
  if ( v5 < v3 )
    v6 = *(_DWORD *)(a1 + 16);
  v7 = sub_4055E0(v2, v4, v6);
  if ( !v7 )
  {
    if ( v5 < v3 )
      return 1;
    v7 = v5 != v3;
  }
  return v7 < 0;
}

//----- (00402DF0) --------------------------------------------------------
unsigned int __thiscall sub_402DF0(int this, int a2)
{
  int v2; // edx@1
  int v3; // esi@1
  unsigned int result; // eax@1
  int v5; // esi@2
  unsigned int v6; // esi@4
  unsigned int v7; // edx@4
  unsigned int v8; // edx@5
  unsigned int v9; // edx@8

  v2 = *(_DWORD *)(this + 8);
  v3 = *(_DWORD *)(this + 4);
  result = (*(_DWORD *)(this + 8) - v3) >> 2;
  if ( result < 1 )
  {
    v5 = (v3 - *(_DWORD *)this) >> 2;
    if ( (unsigned int)(0x3FFFFFFF - v5) < 1 )
      std::_Xlength_error("vector<T> too long");
    v6 = v5 + 1;
    v7 = (v2 - *(_DWORD *)this) >> 2;
    if ( 0x3FFFFFFF - (v7 >> 1) >= v7 )
    {
      v9 = (v7 >> 1) + v7;
      if ( v9 < v6 )
        v9 = v6;
      result = sub_4030C0((const void **)this, v9);
    }
    else
    {
      v8 = 0;
      if ( v6 > 0 )
        v8 = v6;
      result = sub_4030C0((const void **)this, v8);
    }
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (00402E60) --------------------------------------------------------
int __thiscall sub_402E60(void *this, int a2)
{
  int v2; // ebx@1
  int v3; // edi@1
  int v4; // edx@2
  unsigned int v5; // ecx@2
  int v6; // eax@3
  int v7; // esi@4
  unsigned int v8; // ebx@6
  unsigned int v9; // edx@8
  unsigned int v10; // edx@11
  bool v11; // cf@15
  unsigned __int8 v12; // cl@17
  unsigned __int8 v13; // cl@19
  unsigned __int8 v14; // al@21
  int v15; // eax@22
  bool v16; // sf@24
  int v18; // [sp+8h] [bp-8h]@1

  v2 = *(_DWORD *)this;
  v3 = *(_DWORD *)(*(_DWORD *)this + 4);
  v18 = *(_DWORD *)this;
  if ( !*(_BYTE *)(v3 + 13) )
  {
    v4 = a2;
    v5 = *(_DWORD *)(a2 + 16);
    do
    {
      v6 = v3 + 16;
      if ( *(_DWORD *)(v4 + 20) < 0x10u )
        v7 = v4;
      else
        v7 = *(_DWORD *)v4;
      v8 = *(_DWORD *)(v3 + 32);
      if ( *(_DWORD *)(v3 + 36) >= 0x10u )
        v6 = *(_DWORD *)v6;
      v9 = v5;
      if ( v8 < v5 )
        v9 = *(_DWORD *)(v3 + 32);
      if ( !v9 )
      {
LABEL_25:
        if ( v8 < v5 )
          goto LABEL_29;
        v16 = (v8 != v5) < 0;
        goto LABEL_27;
      }
      v11 = v9 < 4;
      v10 = v9 - 4;
      if ( v11 )
      {
LABEL_14:
        if ( v10 == -4 )
          goto LABEL_23;
      }
      else
      {
        while ( *(_DWORD *)v6 == *(_DWORD *)v7 )
        {
          v6 += 4;
          v7 += 4;
          v11 = v10 < 4;
          v10 -= 4;
          if ( v11 )
            goto LABEL_14;
        }
      }
      v11 = *(_BYTE *)v6 < *(_BYTE *)v7;
      if ( *(_BYTE *)v6 != *(_BYTE *)v7
        || v10 != -3
        && ((v12 = *(_BYTE *)(v6 + 1), v11 = v12 < *(_BYTE *)(v7 + 1), v12 != *(_BYTE *)(v7 + 1))
         || v10 != -2
         && ((v13 = *(_BYTE *)(v6 + 2), v11 = v13 < *(_BYTE *)(v7 + 2), v13 != *(_BYTE *)(v7 + 2))
          || v10 != -1 && (v14 = *(_BYTE *)(v6 + 3), v11 = v14 < *(_BYTE *)(v7 + 3), v14 != *(_BYTE *)(v7 + 3)))) )
      {
        v15 = -v11 | 1;
        goto LABEL_24;
      }
LABEL_23:
      v15 = 0;
LABEL_24:
      v5 = *(_DWORD *)(a2 + 16);
      v16 = v15 < 0;
      if ( !v15 )
        goto LABEL_25;
LABEL_27:
      if ( v16 )
      {
LABEL_29:
        v3 = *(_DWORD *)(v3 + 8);
        v2 = v18;
        goto LABEL_30;
      }
      v2 = v3;
      v3 = *(_DWORD *)v3;
      v18 = v2;
LABEL_30:
      v4 = a2;
    }
    while ( !*(_BYTE *)(v3 + 13) );
  }
  return v2;
}

//----- (00402F40) --------------------------------------------------------
int *__thiscall sub_402F40(void *this, int *a2, int a3, int a4)
{
  int v4; // eax@1
  void *v5; // esi@1
  int v6; // ecx@1
  int *v7; // eax@3
  int v8; // ecx@3
  int *result; // eax@3
  int v10; // ecx@5
  int i; // edx@6
  int j; // eax@7
  char v13; // [sp+4h] [bp-4h]@14

  v4 = a3;
  v5 = this;
  v6 = *(_DWORD *)this;
  if ( a3 != *(_DWORD *)v6 || a4 != v6 )
  {
    for ( ; a3 != a4; v4 = a3 )
    {
      v10 = v4;
      if ( !*(_BYTE *)(v4 + 13) )
      {
        i = *(_DWORD *)(v4 + 8);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *(_DWORD *)(v4 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(_DWORD *)(i + 8) )
              break;
            v4 = i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        a3 = i;
      }
      sub_403190(v5, (int *)&v13, v10);
    }
    *a2 = v4;
    result = a2;
  }
  else
  {
    sub_403730(v5, *(_DWORD *)(v6 + 4));
    *(_DWORD *)(*(_DWORD *)v5 + 4) = *(_DWORD *)v5;
    **(_DWORD **)v5 = *(_DWORD *)v5;
    *(_DWORD *)(*(_DWORD *)v5 + 8) = *(_DWORD *)v5;
    v7 = *(int **)v5;
    *((_DWORD *)v5 + 1) = 0;
    v8 = *v7;
    result = a2;
    *a2 = v8;
  }
  return result;
}

//----- (00403000) --------------------------------------------------------
int *__thiscall sub_403000(void *this, int *a2, int a3, int a4)
{
  int v4; // eax@1
  void *v5; // esi@1
  int v6; // ecx@1
  int *v7; // eax@3
  int v8; // ecx@3
  int *result; // eax@3
  int v10; // ecx@5
  int i; // edx@6
  int j; // eax@7
  char v13; // [sp+4h] [bp-4h]@14

  v4 = a3;
  v5 = this;
  v6 = *(_DWORD *)this;
  if ( a3 != *(_DWORD *)v6 || a4 != v6 )
  {
    for ( ; a3 != a4; v4 = a3 )
    {
      v10 = v4;
      if ( !*(_BYTE *)(v4 + 13) )
      {
        i = *(_DWORD *)(v4 + 8);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *(_DWORD *)(v4 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(_DWORD *)(i + 8) )
              break;
            v4 = i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        a3 = i;
      }
      sub_403440(v5, (int *)&v13, v10);
    }
    *a2 = v4;
    result = a2;
  }
  else
  {
    sub_403880(v5, *(_DWORD *)(v6 + 4));
    *(_DWORD *)(*(_DWORD *)v5 + 4) = *(_DWORD *)v5;
    **(_DWORD **)v5 = *(_DWORD *)v5;
    *(_DWORD *)(*(_DWORD *)v5 + 8) = *(_DWORD *)v5;
    v7 = *(int **)v5;
    *((_DWORD *)v5 + 1) = 0;
    v8 = *v7;
    result = a2;
    *a2 = v8;
  }
  return result;
}

//----- (004030C0) --------------------------------------------------------
int __thiscall sub_4030C0(const void **this, unsigned int a2)
{
  unsigned int v2; // ebx@1
  void *v3; // esi@1
  const void **v4; // edi@1
  int result; // eax@7
  int v6; // [sp+14h] [bp+8h]@5

  v2 = a2;
  v3 = 0;
  v4 = this;
  if ( a2 )
  {
    if ( a2 > 0x3FFFFFFF || (v3 = operator new(4 * a2)) == 0 )
      std::_Xbad_alloc();
  }
  memmove(v3, *v4, ((_BYTE *)v4[1] - (_BYTE *)*v4) & 0xFFFFFFFC);
  v6 = ((_BYTE *)v4[1] - (_BYTE *)*v4) >> 2;
  if ( *v4 )
    operator delete((void *)*v4);
  v4[2] = (char *)v3 + 4 * v2;
  *v4 = v3;
  result = (int)v3 + 4 * v6;
  v4[1] = (const void *)result;
  return result;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (00403140) --------------------------------------------------------
_DWORD *__thiscall sub_403140(_DWORD *this)
{
  _DWORD *v1; // edx@1
  int v2; // eax@1
  int v3; // ecx@2
  int j; // eax@3
  int i; // eax@6

  v1 = this;
  v2 = *this;
  if ( *(_BYTE *)(*this + 13) )
    return v1;
  v3 = *(_DWORD *)(v2 + 8);
  if ( *(_BYTE *)(v3 + 13) )
  {
    for ( i = *(_DWORD *)(v2 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
    {
      if ( *v1 != *(_DWORD *)(i + 8) )
        break;
      *v1 = i;
    }
    *v1 = i;
    return v1;
  }
  for ( j = *(_DWORD *)v3; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
    v3 = j;
  *v1 = v3;
  return v1;
}

//----- (00403190) --------------------------------------------------------
int *__thiscall sub_403190(void *this, int *a2, int a3)
{
  void *v3; // ebx@1
  int v4; // edi@4
  int v5; // ecx@7
  int v6; // esi@8
  void *v7; // edx@10
  int *v8; // eax@15
  int i; // ecx@17
  int v10; // eax@18
  int v11; // eax@25
  int v12; // eax@33
  char v13; // cl@36
  int v14; // ecx@40
  int v15; // ST00_4@48
  _DWORD *v16; // esi@48
  int v17; // ST00_4@59
  int v18; // eax@63
  int *result; // eax@65
  int v20; // [sp+Ch] [bp-8h]@7
  int v21; // [sp+Ch] [bp-8h]@22
  void *v22; // [sp+10h] [bp-4h]@1

  v3 = (void *)a3;
  v22 = this;
  if ( *(_BYTE *)(a3 + 13) )
    std::_Xout_of_range("invalid map/set<T> iterator");
  sub_403140(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v4 = *((_DWORD *)v3 + 2);
LABEL_8:
    v6 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    v7 = v22;
    if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
    {
      *(_DWORD *)(*(_DWORD *)v22 + 4) = v4;
    }
    else if ( *(void **)v6 == v3 )
    {
      *(_DWORD *)v6 = v4;
    }
    else
    {
      *(_DWORD *)(v6 + 8) = v4;
    }
    v8 = *(int **)v22;
    if ( **(void ***)v22 == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        i = v6;
      }
      else
      {
        v10 = *(_DWORD *)v4;
        for ( i = v4; !*(_BYTE *)(v10 + 13); v10 = *(_DWORD *)v10 )
          i = v10;
        v8 = *(int **)v22;
      }
      *v8 = i;
    }
    v21 = *(_DWORD *)v22;
    if ( *(void **)(*(_DWORD *)v22 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        *(_DWORD *)(v21 + 8) = v6;
      }
      else
      {
        v11 = sub_403860(v4);
        v7 = v22;
        *(_DWORD *)(v21 + 8) = v11;
      }
    }
    goto LABEL_37;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v4 = *(_DWORD *)v3;
    goto LABEL_8;
  }
  v5 = a3;
  v20 = a3;
  v4 = *(_DWORD *)(a3 + 8);
  if ( (void *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *(_DWORD *)v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD *)v3 + 2) )
  {
    v6 = v5;
  }
  else
  {
    v6 = *(_DWORD *)(v5 + 4);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    *(_DWORD *)v6 = v4;
    *(_DWORD *)(v5 + 8) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v22 + 4) = v5;
  }
  else
  {
    v12 = *((_DWORD *)v3 + 1);
    if ( *(void **)v12 == v3 )
      *(_DWORD *)v12 = v5;
    else
      *(_DWORD *)(v12 + 8) = v5;
  }
  *(_DWORD *)(v5 + 4) = *((_DWORD *)v3 + 1);
  v13 = *(_BYTE *)(v5 + 12);
  *(_BYTE *)(v20 + 12) = *((_BYTE *)v3 + 12);
  v7 = v22;
  *((_BYTE *)v3 + 12) = v13;
LABEL_37:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    for ( ; v4 != *(_DWORD *)(*(_DWORD *)v7 + 4); v6 = *(_DWORD *)(v6 + 4) )
    {
      if ( *(_BYTE *)(v4 + 12) != 1 )
        break;
      v14 = *(_DWORD *)v6;
      if ( v4 == *(_DWORD *)v6 )
      {
        v14 = *(_DWORD *)(v6 + 8);
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_4037A0(v7, v6);
          v14 = *(_DWORD *)(v6 + 8);
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_403800(v7, v14);
            v14 = *(_DWORD *)(v6 + 8);
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v15 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
          sub_4037A0(v22, v15);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      else
      {
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_403800(v7, v6);
          v14 = *(_DWORD *)v6;
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v14 + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_4037A0(v7, v14);
            v14 = *(_DWORD *)v6;
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v17 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
          sub_403800(v22, v17);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      *(_BYTE *)(v14 + 12) = 0;
LABEL_55:
      v4 = v6;
    }
    v16 = v22;
    *(_BYTE *)(v4 + 12) = 1;
  }
  else
  {
    v16 = v22;
  }
LABEL_61:
  if ( *((_DWORD *)v3 + 9) >= 0x10u )
    operator delete(*((void **)v3 + 4));
  *((_DWORD *)v3 + 9) = 15;
  *((_DWORD *)v3 + 8) = 0;
  *((_BYTE *)v3 + 16) = 0;
  operator delete(v3);
  v18 = v16[1];
  if ( v18 )
    v16[1] = v18 - 1;
  result = a2;
  *a2 = a3;
  return result;
}
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00403440) --------------------------------------------------------
int *__thiscall sub_403440(void *this, int *a2, int a3)
{
  void *v3; // ebx@1
  int v4; // edi@4
  int v5; // ecx@7
  int v6; // esi@8
  void *v7; // edx@10
  int *v8; // eax@15
  int i; // ecx@17
  int v10; // eax@18
  int v11; // eax@25
  int v12; // eax@33
  char v13; // cl@36
  int v14; // ecx@40
  int v15; // ST00_4@48
  _DWORD *v16; // esi@48
  int v17; // ST00_4@59
  int v18; // eax@67
  int *result; // eax@69
  int v20; // [sp+Ch] [bp-8h]@7
  int v21; // [sp+Ch] [bp-8h]@22
  void *v22; // [sp+10h] [bp-4h]@1

  v3 = (void *)a3;
  v22 = this;
  if ( *(_BYTE *)(a3 + 13) )
    std::_Xout_of_range("invalid map/set<T> iterator");
  sub_403140(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v4 = *((_DWORD *)v3 + 2);
LABEL_8:
    v6 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    v7 = v22;
    if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
    {
      *(_DWORD *)(*(_DWORD *)v22 + 4) = v4;
    }
    else if ( *(void **)v6 == v3 )
    {
      *(_DWORD *)v6 = v4;
    }
    else
    {
      *(_DWORD *)(v6 + 8) = v4;
    }
    v8 = *(int **)v22;
    if ( **(void ***)v22 == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        i = v6;
      }
      else
      {
        v10 = *(_DWORD *)v4;
        for ( i = v4; !*(_BYTE *)(v10 + 13); v10 = *(_DWORD *)v10 )
          i = v10;
        v8 = *(int **)v22;
      }
      *v8 = i;
    }
    v21 = *(_DWORD *)v22;
    if ( *(void **)(*(_DWORD *)v22 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        *(_DWORD *)(v21 + 8) = v6;
      }
      else
      {
        v11 = sub_403860(v4);
        v7 = v22;
        *(_DWORD *)(v21 + 8) = v11;
      }
    }
    goto LABEL_37;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v4 = *(_DWORD *)v3;
    goto LABEL_8;
  }
  v5 = a3;
  v20 = a3;
  v4 = *(_DWORD *)(a3 + 8);
  if ( (void *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *(_DWORD *)v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD *)v3 + 2) )
  {
    v6 = v5;
  }
  else
  {
    v6 = *(_DWORD *)(v5 + 4);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    *(_DWORD *)v6 = v4;
    *(_DWORD *)(v5 + 8) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v22 + 4) = v5;
  }
  else
  {
    v12 = *((_DWORD *)v3 + 1);
    if ( *(void **)v12 == v3 )
      *(_DWORD *)v12 = v5;
    else
      *(_DWORD *)(v12 + 8) = v5;
  }
  *(_DWORD *)(v5 + 4) = *((_DWORD *)v3 + 1);
  v13 = *(_BYTE *)(v5 + 12);
  *(_BYTE *)(v20 + 12) = *((_BYTE *)v3 + 12);
  v7 = v22;
  *((_BYTE *)v3 + 12) = v13;
LABEL_37:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    for ( ; v4 != *(_DWORD *)(*(_DWORD *)v7 + 4); v6 = *(_DWORD *)(v6 + 4) )
    {
      if ( *(_BYTE *)(v4 + 12) != 1 )
        break;
      v14 = *(_DWORD *)v6;
      if ( v4 == *(_DWORD *)v6 )
      {
        v14 = *(_DWORD *)(v6 + 8);
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_4037A0(v7, v6);
          v14 = *(_DWORD *)(v6 + 8);
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_403800(v7, v14);
            v14 = *(_DWORD *)(v6 + 8);
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v15 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
          sub_4037A0(v22, v15);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      else
      {
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_403800(v7, v6);
          v14 = *(_DWORD *)v6;
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v14 + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_4037A0(v7, v14);
            v14 = *(_DWORD *)v6;
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v17 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
          sub_403800(v22, v17);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      *(_BYTE *)(v14 + 12) = 0;
LABEL_55:
      v4 = v6;
    }
    v16 = v22;
    *(_BYTE *)(v4 + 12) = 1;
  }
  else
  {
    v16 = v22;
  }
LABEL_61:
  if ( *((_DWORD *)v3 + 16) )
  {
    operator delete(*((void **)v3 + 16));
    *((_DWORD *)v3 + 16) = 0;
    *((_DWORD *)v3 + 17) = 0;
    *((_DWORD *)v3 + 18) = 0;
  }
  if ( *((_DWORD *)v3 + 15) >= 0x10u )
    operator delete(*((void **)v3 + 10));
  *((_DWORD *)v3 + 15) = 15;
  *((_DWORD *)v3 + 14) = 0;
  *((_BYTE *)v3 + 40) = 0;
  if ( *((_DWORD *)v3 + 9) >= 0x10u )
    operator delete(*((void **)v3 + 4));
  *((_DWORD *)v3 + 9) = 15;
  *((_DWORD *)v3 + 8) = 0;
  *((_BYTE *)v3 + 16) = 0;
  operator delete(v3);
  v18 = v16[1];
  if ( v18 )
    v16[1] = v18 - 1;
  result = a2;
  *a2 = a3;
  return result;
}
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00403730) --------------------------------------------------------
void *__thiscall sub_403730(void *this, int a2)
{
  int v2; // esi@1
  void *result; // eax@1
  int i; // edi@1
  void *v5; // [sp+8h] [bp-4h]@1

  v2 = a2;
  result = this;
  v5 = this;
  for ( i = a2; !*(_BYTE *)(i + 13); v2 = i )
  {
    sub_403730(*(_DWORD *)(i + 8));
    i = *(_DWORD *)i;
    if ( *(_DWORD *)(v2 + 36) >= 0x10u )
      operator delete(*(void **)(v2 + 16));
    *(_DWORD *)(v2 + 36) = 15;
    *(_DWORD *)(v2 + 32) = 0;
    *(_BYTE *)(v2 + 16) = 0;
    operator delete((void *)v2);
    result = v5;
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004037A0) --------------------------------------------------------
int __thiscall sub_4037A0(void *this, int a2)
{
  int v2; // esi@1
  int result; // eax@3

  v2 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *(_DWORD *)v2;
  if ( !*(_BYTE *)(*(_DWORD *)v2 + 13) )
    *(_DWORD *)(*(_DWORD *)v2 + 4) = a2;
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)this;
  if ( a2 == *(_DWORD *)(*(_DWORD *)this + 4) )
  {
    *(_DWORD *)(result + 4) = v2;
    *(_DWORD *)v2 = a2;
    *(_DWORD *)(a2 + 4) = v2;
  }
  else
  {
    result = *(_DWORD *)(a2 + 4);
    if ( a2 == *(_DWORD *)result )
    {
      *(_DWORD *)result = v2;
      *(_DWORD *)v2 = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
    else
    {
      *(_DWORD *)(result + 8) = v2;
      *(_DWORD *)v2 = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
  }
  return result;
}

//----- (00403800) --------------------------------------------------------
int __thiscall sub_403800(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int result; // eax@3

  v2 = *(_DWORD *)a2;
  *(_DWORD *)a2 = *(_DWORD *)(*(_DWORD *)a2 + 8);
  v3 = *(_DWORD *)(v2 + 8);
  if ( !*(_BYTE *)(v3 + 13) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)this;
  if ( a2 == *(_DWORD *)(*(_DWORD *)this + 4) )
  {
    *(_DWORD *)(result + 4) = v2;
    *(_DWORD *)(v2 + 8) = a2;
    *(_DWORD *)(a2 + 4) = v2;
  }
  else
  {
    result = *(_DWORD *)(a2 + 4);
    if ( a2 == *(_DWORD *)(result + 8) )
    {
      *(_DWORD *)(result + 8) = v2;
      *(_DWORD *)(v2 + 8) = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
    else
    {
      *(_DWORD *)result = v2;
      *(_DWORD *)(v2 + 8) = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
  }
  return result;
}

//----- (00403860) --------------------------------------------------------
int __fastcall sub_403860(int a1)
{
  int i; // eax@1

  for ( i = *(_DWORD *)(a1 + 8); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 8) )
    a1 = i;
  return a1;
}

//----- (00403880) --------------------------------------------------------
void *__thiscall sub_403880(void *this, int a2)
{
  int v2; // esi@1
  void *result; // eax@1
  int i; // ebx@1
  void *v5; // [sp+8h] [bp-4h]@1

  v2 = a2;
  result = this;
  v5 = this;
  for ( i = a2; !*(_BYTE *)(i + 13); v2 = i )
  {
    sub_403880(*(_DWORD *)(i + 8));
    i = *(_DWORD *)i;
    if ( *(_DWORD *)(v2 + 64) )
    {
      operator delete(*(void **)(v2 + 64));
      *(_DWORD *)(v2 + 64) = 0;
      *(_DWORD *)(v2 + 68) = 0;
      *(_DWORD *)(v2 + 72) = 0;
    }
    if ( *(_DWORD *)(v2 + 60) >= 0x10u )
      operator delete(*(void **)(v2 + 40));
    *(_DWORD *)(v2 + 60) = 15;
    *(_DWORD *)(v2 + 56) = 0;
    *(_BYTE *)(v2 + 40) = 0;
    if ( *(_DWORD *)(v2 + 36) >= 0x10u )
      operator delete(*(void **)(v2 + 16));
    *(_DWORD *)(v2 + 36) = 15;
    *(_DWORD *)(v2 + 32) = 0;
    *(_BYTE *)(v2 + 16) = 0;
    operator delete((void *)v2);
    result = v5;
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00403930) --------------------------------------------------------
void sub_403930()
{
  _DWORD *v0; // eax@1

  v0 = operator new(0x2Cu);
  if ( v0 )
  {
    *v0 = v0;
    if ( v0 != (_DWORD *)-4 )
      v0[1] = v0;
    if ( v0 != (_DWORD *)-8 )
      v0[2] = v0;
    *((_WORD *)v0 + 6) = 257;
  }
  else
  {
    std::_Xbad_alloc();
  }
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (00403960) --------------------------------------------------------
void sub_403960()
{
  _DWORD *v0; // eax@1

  v0 = operator new(0x4Cu);
  if ( v0 )
  {
    *v0 = v0;
    if ( v0 != (_DWORD *)-4 )
      v0[1] = v0;
    if ( v0 != (_DWORD *)-8 )
      v0[2] = v0;
    *((_WORD *)v0 + 6) = 257;
  }
  else
  {
    std::_Xbad_alloc();
  }
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (00403990) --------------------------------------------------------
_DWORD *__thiscall sub_403990(void *Dst, void *Src, int a3)
{
  _DWORD *v3; // edi@1
  _DWORD *result; // eax@5

  v3 = Dst;
  *((_DWORD *)Dst + 5) = 15;
  *((_DWORD *)Dst + 4) = 0;
  *(_BYTE *)Dst = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)Dst = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove(Dst, Src, *((_DWORD *)Src + 4) + 1);
  }
  v3[4] = *((_DWORD *)Src + 4);
  v3[5] = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  v3[6] = 0;
  v3[7] = 0;
  v3[8] = 0;
  v3[6] = *((_DWORD *)Src + 6);
  v3[7] = *((_DWORD *)Src + 7);
  v3[8] = *((_DWORD *)Src + 8);
  result = v3;
  *((_DWORD *)Src + 6) = 0;
  *((_DWORD *)Src + 7) = 0;
  *((_DWORD *)Src + 8) = 0;
  return result;
}

//----- (00403A30) --------------------------------------------------------
_DWORD *__usercall sub_403A30@<eax>(void *Dst@<ecx>, void *Src@<edx>, int a3)
{
  const char *v3; // edi@1
  _DWORD *v4; // esi@1
  unsigned int v5; // ecx@2
  size_t v6; // ebx@4
  size_t v7; // eax@4
  bool v8; // cf@7
  _DWORD *v9; // eax@8
  size_t v10; // ecx@12

  v3 = (const char *)Src;
  v4 = Dst;
  *((_DWORD *)Dst + 5) = 15;
  *((_DWORD *)Dst + 4) = 0;
  *(_BYTE *)Dst = 0;
  if ( *(_BYTE *)Src )
    v5 = strlen((const char *)Src);
  else
    v5 = 0;
  v6 = v4[4];
  v7 = v5 + *(_DWORD *)(a3 + 16);
  if ( v6 <= v7 && v4[5] != v7 && (unsigned __int8)sub_405BB0(v4, v7, 1) )
  {
    v8 = v4[5] < 0x10u;
    v4[4] = v6;
    if ( v8 )
      v9 = v4;
    else
      v9 = (_DWORD *)*v4;
    *((_BYTE *)v9 + v6) = 0;
  }
  if ( *v3 )
    v10 = strlen(v3);
  else
    v10 = 0;
  sub_403C80((int)v4, (void *)v3, v10);
  sub_405640(v4, a3, 0, 0xFFFFFFFF);
  return v4;
}

//----- (00403B20) --------------------------------------------------------
bool __fastcall sub_403B20(int a1, const char *a2)
{
  unsigned int v2; // esi@2
  unsigned int v3; // edi@4
  unsigned int v4; // eax@6
  int v5; // ecx@8

  if ( *a2 )
    v2 = strlen(a2);
  else
    v2 = 0;
  v3 = *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 20) >= 0x10u )
    a1 = *(_DWORD *)a1;
  v4 = v2;
  if ( v3 < v2 )
    v4 = v3;
  v5 = sub_4055E0((int)a2, a1, v4);
  if ( !v5 )
  {
    if ( v3 < v2 )
      return 1;
    v5 = v3 != v2;
  }
  return v5 != 0;
}

//----- (00403B80) --------------------------------------------------------
int __thiscall sub_403B80(int this, int a2, void *Src, int a4)
{
  int v4; // ebx@1
  int v5; // edi@1

  v4 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  sub_405900((void *)this, a2, 0, 0xFFFFFFFF);
  v5 = v4 + 24;
  *(_DWORD *)(v5 + 20) = 15;
  *(_DWORD *)(v5 + 16) = 0;
  *(_BYTE *)v5 = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)v5 = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove((void *)(v4 + 24), Src, *((_DWORD *)Src + 4) + 1);
  }
  *(_DWORD *)(v4 + 40) = *((_DWORD *)Src + 4);
  *(_DWORD *)(v4 + 44) = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  return v4;
}

//----- (00403C10) --------------------------------------------------------
int __thiscall sub_403C10(int this, void *Src, void *a3, int a4)
{
  int v4; // edi@1

  v4 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)this = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove((void *)this, Src, *((_DWORD *)Src + 4) + 1);
  }
  *(_DWORD *)(v4 + 16) = *((_DWORD *)Src + 4);
  *(_DWORD *)(v4 + 20) = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  sub_403990((void *)(v4 + 24), a3, this);
  return v4;
}

//----- (00403C80) --------------------------------------------------------
int __thiscall sub_403C80(int this, void *Src, size_t Size)
{
  int v3; // esi@1
  unsigned int v4; // ecx@2
  unsigned int v5; // eax@3
  int v6; // edx@7
  int result; // eax@11
  size_t v8; // edx@13
  size_t v9; // ecx@13
  unsigned int v10; // edi@16
  unsigned int v11; // eax@18
  int v12; // edx@21
  bool v13; // cf@29

  v3 = this;
  if ( Src )
  {
    v4 = *(_DWORD *)(this + 20);
    v5 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
    if ( (unsigned int)Src >= v5 )
    {
      v6 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
      if ( v6 + *(_DWORD *)(v3 + 16) > (unsigned int)Src )
      {
        if ( v4 < 0x10 )
          result = sub_405640((void *)v3, v3, (unsigned int)Src - v3, Size);
        else
          result = sub_405640((void *)v3, v3, (unsigned int)Src - *(_DWORD *)v3, Size);
        return result;
      }
    }
  }
  v8 = *(_DWORD *)(v3 + 16);
  v9 = Size;
  if ( -1 - v8 <= Size )
    std::_Xlength_error("string too long");
  if ( !v9 )
    return v3;
  v10 = v8 + v9;
  if ( v8 + v9 > 0xFFFFFFFE )
    std::_Xlength_error("string too long");
  v11 = *(_DWORD *)(v3 + 20);
  if ( v11 < v10 )
  {
    sub_405A60(v3, v10, v8);
    v9 = Size;
    if ( v10 )
    {
LABEL_20:
      if ( *(_DWORD *)(v3 + 20) < 0x10u )
        v12 = v3;
      else
        v12 = *(_DWORD *)v3;
      if ( v9 )
        memcpy((void *)(v12 + *(_DWORD *)(v3 + 16)), Src, v9);
      v13 = *(_DWORD *)(v3 + 20) < 0x10u;
      *(_DWORD *)(v3 + 16) = v10;
      if ( !v13 )
      {
        *(_BYTE *)(*(_DWORD *)v3 + v10) = 0;
        return v3;
      }
      *(_BYTE *)(v3 + v10) = 0;
    }
    return v3;
  }
  if ( v10 )
    goto LABEL_20;
  *(_DWORD *)(v3 + 16) = 0;
  if ( v11 < 0x10 )
  {
    result = v3;
    *(_BYTE *)v3 = 0;
  }
  else
  {
    **(_BYTE **)v3 = 0;
    result = v3;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (00403DA0) --------------------------------------------------------
bool __fastcall sub_403DA0(int a1, const char *a2)
{
  unsigned int v2; // esi@2
  unsigned int v3; // edi@4
  unsigned int v4; // eax@6
  int v5; // ecx@8

  if ( *a2 )
    v2 = strlen(a2);
  else
    v2 = 0;
  v3 = *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 20) >= 0x10u )
    a1 = *(_DWORD *)a1;
  v4 = v2;
  if ( v3 < v2 )
    v4 = v3;
  v5 = sub_4055E0((int)a2, a1, v4);
  if ( !v5 )
  {
    if ( v3 < v2 )
      return 0;
    v5 = v3 != v2;
  }
  return v5 == 0;
}

//----- (00403E00) --------------------------------------------------------
_DWORD *__thiscall sub_403E00(_DWORD *this, void *Src)
{
  _DWORD *result; // eax@1
  _DWORD *v3; // esi@1

  result = sub_404580(this);
  v3 = result;
  *((_WORD *)result + 6) = 0;
  if ( result != (_DWORD *)-16 )
  {
    sub_405420(result + 4, Src, (int)(result + 4));
    result = v3;
  }
  return result;
}

//----- (00403E30) --------------------------------------------------------
_DWORD *__thiscall sub_403E30(int this, _DWORD *a2, int a3, int a4, int a5)
{
  int *v5; // ebx@1
  _DWORD *result; // eax@2
  int v7; // ecx@3
  int v8; // ecx@4
  int v9; // esi@10
  int v10; // ecx@10
  int v11; // ecx@11
  int v12; // edi@15
  int v13; // ecx@20
  int v14; // [sp-8h] [bp-30h]@11
  int v15; // [sp-4h] [bp-2Ch]@11
  int v16; // [sp+0h] [bp-28h]@1
  char v17; // [sp+10h] [bp-18h]@20
  int v18; // [sp+14h] [bp-14h]@10
  int *v19; // [sp+18h] [bp-10h]@1
  int v20; // [sp+24h] [bp-4h]@1

  v19 = &v16;
  v5 = (int *)this;
  v20 = 0;
  if ( !*(_DWORD *)(this + 4) )
  {
    sub_404700(this, a2, 1, *(_DWORD *)this, this, a5);
    return a2;
  }
  v7 = *(_DWORD *)this;
  if ( a3 == *(_DWORD *)*v5 )
  {
    if ( sub_402D20(a4, a3 + 16) )
    {
      sub_404700((int)v5, a2, 1, a3, v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v7 )
  {
    if ( sub_402D20(*(_DWORD *)(v7 + 8) + 16, a4) )
    {
      sub_404700((int)v5, a2, 0, *(_DWORD *)(*v5 + 8), v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( sub_402D20(a4, a3 + 16) )
  {
    v18 = a3;
    sub_4046A0(&v18);
    v9 = v18;
    if ( sub_402D20(v18 + 16, a4) )
    {
      v15 = a5;
      v14 = v10;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_404700((int)v5, a2, 1, a3, v14, a5);
        return a2;
      }
      goto LABEL_12;
    }
  }
  if ( sub_402D20(a3 + 16, a4) )
  {
    v9 = a3;
    v18 = a3;
    sub_403140(&v18);
    v12 = v18;
    if ( v18 == *v5 )
      goto LABEL_18;
    if ( sub_402D20(a4, v18 + 16) )
    {
      v9 = a3;
LABEL_18:
      v15 = a5;
      v14 = v8;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_404700((int)v5, a2, 1, v12, v14, a5);
        return a2;
      }
LABEL_12:
      sub_404700(v11, a2, 0, v9, v14, v15);
      return a2;
    }
  }
LABEL_20:
  v20 = -1;
  v13 = *(_DWORD *)sub_404950(v5, (int)&v17, v8, a4, a5);
  result = a2;
  *a2 = v13;
  return result;
}

//----- (00404060) --------------------------------------------------------
_DWORD *__thiscall sub_404060(_DWORD *this, void *Src)
{
  _DWORD *result; // eax@1
  _DWORD *v3; // esi@1

  result = sub_404600(this);
  v3 = result;
  *((_WORD *)result + 6) = 0;
  if ( result != (_DWORD *)-16 )
  {
    sub_4054F0(result + 4, Src, (int)(result + 4));
    result = v3;
  }
  return result;
}

//----- (00404090) --------------------------------------------------------
_DWORD *__thiscall sub_404090(int this, _DWORD *a2, int a3, int a4, int a5)
{
  int *v5; // ebx@1
  _DWORD *result; // eax@2
  int v7; // ecx@3
  int v8; // ecx@4
  int v9; // esi@10
  int v10; // ecx@10
  int v11; // ecx@11
  int v12; // edi@15
  int v13; // ecx@20
  int v14; // [sp-8h] [bp-30h]@11
  int v15; // [sp-4h] [bp-2Ch]@11
  int v16; // [sp+0h] [bp-28h]@1
  char v17; // [sp+10h] [bp-18h]@20
  int v18; // [sp+14h] [bp-14h]@10
  int *v19; // [sp+18h] [bp-10h]@1
  int v20; // [sp+24h] [bp-4h]@1

  v19 = &v16;
  v5 = (int *)this;
  v20 = 0;
  if ( !*(_DWORD *)(this + 4) )
  {
    sub_404B60(this, a2, 1, *(_DWORD *)this, this, a5);
    return a2;
  }
  v7 = *(_DWORD *)this;
  if ( a3 == *(_DWORD *)*v5 )
  {
    if ( sub_402D20(a4, a3 + 16) )
    {
      sub_404B60((int)v5, a2, 1, a3, v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v7 )
  {
    if ( sub_402D20(*(_DWORD *)(v7 + 8) + 16, a4) )
    {
      sub_404B60((int)v5, a2, 0, *(_DWORD *)(*v5 + 8), v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( sub_402D20(a4, a3 + 16) )
  {
    v18 = a3;
    sub_4046A0(&v18);
    v9 = v18;
    if ( sub_402D20(v18 + 16, a4) )
    {
      v15 = a5;
      v14 = v10;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_404B60((int)v5, a2, 1, a3, v14, a5);
        return a2;
      }
      goto LABEL_12;
    }
  }
  if ( sub_402D20(a3 + 16, a4) )
  {
    v9 = a3;
    v18 = a3;
    sub_403140(&v18);
    v12 = v18;
    if ( v18 == *v5 )
      goto LABEL_18;
    if ( sub_402D20(a4, v18 + 16) )
    {
      v9 = a3;
LABEL_18:
      v15 = a5;
      v14 = v8;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_404B60((int)v5, a2, 1, v12, v14, a5);
        return a2;
      }
LABEL_12:
      sub_404B60(v11, a2, 0, v9, v14, v15);
      return a2;
    }
  }
LABEL_20:
  v20 = -1;
  v13 = *(_DWORD *)sub_404D90(v5, (int)&v17, v8, a4, a5);
  result = a2;
  *a2 = v13;
  return result;
}

//----- (004042C0) --------------------------------------------------------
_DWORD *__thiscall sub_4042C0(_DWORD *this, void *Src)
{
  _DWORD *result; // eax@1
  _DWORD *v3; // esi@1

  result = sub_404660(this);
  v3 = result;
  *((_WORD *)result + 6) = 0;
  if ( result != (_DWORD *)-16 )
  {
    sub_405560((int)(result + 4), Src, (int)(result + 4));
    result = v3;
  }
  return result;
}

//----- (004042F0) --------------------------------------------------------
_DWORD *__thiscall sub_4042F0(int this, _DWORD *a2, int a3, int a4, int a5)
{
  int *v5; // ebx@1
  _DWORD *result; // eax@2
  int v7; // ecx@3
  int v8; // ecx@4
  int v9; // esi@10
  int v10; // ecx@10
  int v11; // ecx@11
  int v12; // edi@15
  int v13; // ecx@20
  int v14; // [sp-8h] [bp-30h]@11
  int v15; // [sp-4h] [bp-2Ch]@11
  int v16; // [sp+0h] [bp-28h]@1
  char v17; // [sp+10h] [bp-18h]@20
  int v18; // [sp+14h] [bp-14h]@10
  int *v19; // [sp+18h] [bp-10h]@1
  int v20; // [sp+24h] [bp-4h]@1

  v19 = &v16;
  v5 = (int *)this;
  v20 = 0;
  if ( !*(_DWORD *)(this + 4) )
  {
    sub_404FC0(this, a2, 1, *(_DWORD *)this, this, a5);
    return a2;
  }
  v7 = *(_DWORD *)this;
  if ( a3 == *(_DWORD *)*v5 )
  {
    if ( sub_402D20(a4, a3 + 16) )
    {
      sub_404FC0((int)v5, a2, 1, a3, v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v7 )
  {
    if ( sub_402D20(*(_DWORD *)(v7 + 8) + 16, a4) )
    {
      sub_404FC0((int)v5, a2, 0, *(_DWORD *)(*v5 + 8), v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( sub_402D20(a4, a3 + 16) )
  {
    v18 = a3;
    sub_4046A0(&v18);
    v9 = v18;
    if ( sub_402D20(v18 + 16, a4) )
    {
      v15 = a5;
      v14 = v10;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_404FC0((int)v5, a2, 1, a3, v14, a5);
        return a2;
      }
      goto LABEL_12;
    }
  }
  if ( sub_402D20(a3 + 16, a4) )
  {
    v9 = a3;
    v18 = a3;
    sub_403140(&v18);
    v12 = v18;
    if ( v18 == *v5 )
      goto LABEL_18;
    if ( sub_402D20(a4, v18 + 16) )
    {
      v9 = a3;
LABEL_18:
      v15 = a5;
      v14 = v8;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_404FC0((int)v5, a2, 1, v12, v14, a5);
        return a2;
      }
LABEL_12:
      sub_404FC0(v11, a2, 0, v9, v14, v15);
      return a2;
    }
  }
LABEL_20:
  v20 = -1;
  v13 = *(_DWORD *)sub_4051D0(v5, (int)&v17, v8, a4, a5);
  result = a2;
  *a2 = v13;
  return result;
}

//----- (00404520) --------------------------------------------------------
void __stdcall sub_404520(int a1)
{
  if ( *(_DWORD *)(a1 + 60) >= 0x10u )
    operator delete(*(void **)(a1 + 40));
  *(_DWORD *)(a1 + 60) = 15;
  *(_DWORD *)(a1 + 56) = 0;
  *(_BYTE *)(a1 + 40) = 0;
  if ( *(_DWORD *)(a1 + 36) >= 0x10u )
    operator delete(*(void **)(a1 + 16));
  *(_DWORD *)(a1 + 36) = 15;
  *(_DWORD *)(a1 + 32) = 0;
  *(_BYTE *)(a1 + 16) = 0;
  operator delete((void *)a1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00404580) --------------------------------------------------------
_DWORD *__thiscall sub_404580(_DWORD *this)
{
  _DWORD *v1; // esi@1
  _DWORD *v2; // edx@1

  v1 = this;
  v2 = operator new(0x40u);
  if ( !v2 )
    std::_Xbad_alloc();
  *v2 = *v1;
  if ( v2 != (_DWORD *)-4 )
    v2[1] = *v1;
  if ( v2 != (_DWORD *)-8 )
    v2[2] = *v1;
  return v2;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (004045C0) --------------------------------------------------------
void __stdcall sub_4045C0(int a1)
{
  if ( *(_DWORD *)(a1 + 36) >= 0x10u )
    operator delete(*(void **)(a1 + 16));
  *(_DWORD *)(a1 + 36) = 15;
  *(_DWORD *)(a1 + 32) = 0;
  *(_BYTE *)(a1 + 16) = 0;
  operator delete((void *)a1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00404600) --------------------------------------------------------
_DWORD *__thiscall sub_404600(_DWORD *this)
{
  _DWORD *v1; // esi@1
  _DWORD *v2; // edx@1

  v1 = this;
  v2 = operator new(0x2Cu);
  if ( !v2 )
    std::_Xbad_alloc();
  *v2 = *v1;
  if ( v2 != (_DWORD *)-4 )
    v2[1] = *v1;
  if ( v2 != (_DWORD *)-8 )
    v2[2] = *v1;
  return v2;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (00404640) --------------------------------------------------------
void __stdcall sub_404640(void *a1)
{
  sub_402CB0((int)a1 + 16);
  operator delete(a1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00404660) --------------------------------------------------------
_DWORD *__thiscall sub_404660(_DWORD *this)
{
  _DWORD *v1; // esi@1
  _DWORD *v2; // edx@1

  v1 = this;
  v2 = operator new(0x4Cu);
  if ( !v2 )
    std::_Xbad_alloc();
  *v2 = *v1;
  if ( v2 != (_DWORD *)-4 )
    v2[1] = *v1;
  if ( v2 != (_DWORD *)-8 )
    v2[2] = *v1;
  return v2;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (004046A0) --------------------------------------------------------
void *__thiscall sub_4046A0(void *this)
{
  void *v1; // edx@1
  int v2; // eax@1
  int i; // ecx@3
  int v5; // eax@4
  int v6; // ecx@5

  v1 = this;
  v2 = *(_DWORD *)this;
  if ( *(_BYTE *)(*(_DWORD *)this + 13) )
  {
    *(_DWORD *)this = *(_DWORD *)(v2 + 8);
    return this;
  }
  i = *(_DWORD *)v2;
  if ( *(_BYTE *)(*(_DWORD *)v2 + 13) )
  {
    for ( i = *(_DWORD *)(v2 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
    {
      if ( *(_DWORD *)v1 != *(_DWORD *)i )
        break;
      *(_DWORD *)v1 = i;
    }
    if ( *(_BYTE *)(*(_DWORD *)v1 + 13) )
      return v1;
    goto LABEL_11;
  }
  v5 = *(_DWORD *)(i + 8);
  if ( *(_BYTE *)(v5 + 13) )
  {
LABEL_11:
    *(_DWORD *)v1 = i;
    return v1;
  }
  do
  {
    v6 = v5;
    v5 = *(_DWORD *)(v5 + 8);
  }
  while ( !*(_BYTE *)(v5 + 13) );
  *(_DWORD *)v1 = v6;
  return v1;
}

//----- (00404700) --------------------------------------------------------
_DWORD *__thiscall sub_404700(int this, _DWORD *a2, char a3, int a4, int a5, int a6)
{
  void (__cdecl *v6)(void *); // edi@1
  unsigned int v7; // eax@1
  int v8; // eax@14
  int v9; // ecx@15
  int v10; // esi@15
  int v11; // edx@15
  int v12; // edx@18
  int v13; // ecx@22
  int v14; // edx@26
  int v15; // esi@26
  int v16; // ecx@26
  int v17; // ecx@30
  int v18; // edx@36
  int v19; // ecx@36
  int v20; // ecx@40
  int v21; // ecx@48
  _DWORD *result; // eax@54

  v6 = (void (__cdecl *)(void *))this;
  v7 = *(_DWORD *)(this + 4);
  if ( v7 >= 0x3FFFFFE )
  {
    v6 = operator delete;
    if ( *(_DWORD *)(a6 + 60) >= 0x10u )
      operator delete(*(void **)(a6 + 40));
    *(_DWORD *)(a6 + 60) = 15;
    *(_DWORD *)(a6 + 56) = 0;
    *(_BYTE *)(a6 + 40) = 0;
    if ( *(_DWORD *)(a6 + 36) >= 0x10u )
      operator delete(*(void **)(a6 + 16));
    *(_DWORD *)(a6 + 36) = 15;
    *(_DWORD *)(a6 + 32) = 0;
    *(_BYTE *)(a6 + 16) = 0;
    operator delete((void *)a6);
    std::_Xlength_error("map/set<T> too long");
  }
  *((_DWORD *)v6 + 1) = v7 + 1;
  *(_DWORD *)(a6 + 4) = a4;
  if ( a4 == *(_DWORD *)v6 )
  {
    *(_DWORD *)(*(_DWORD *)v6 + 4) = a6;
    **(_DWORD **)v6 = a6;
    *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  else if ( a3 )
  {
    *(_DWORD *)a4 = a6;
    if ( a4 == **(_DWORD **)v6 )
      **(_DWORD **)v6 = a6;
  }
  else
  {
    *(_DWORD *)(a4 + 8) = a6;
    if ( a4 == *(_DWORD *)(*(_DWORD *)v6 + 8) )
      *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  v8 = a6;
  while ( !*(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) )
  {
    v9 = *(_DWORD *)(v8 + 4);
    v10 = *(_DWORD *)(v9 + 4);
    v11 = *(_DWORD *)v10;
    if ( v9 == *(_DWORD *)v10 )
    {
      v11 = *(_DWORD *)(v10 + 8);
      if ( *(_BYTE *)(v11 + 12) )
      {
        if ( v8 == *(_DWORD *)(v9 + 8) )
        {
          v8 = *(_DWORD *)(v8 + 4);
          v12 = *(_DWORD *)(v9 + 8);
          *(_DWORD *)(v9 + 8) = *(_DWORD *)v12;
          if ( !*(_BYTE *)(*(_DWORD *)v12 + 13) )
            *(_DWORD *)(*(_DWORD *)v12 + 4) = v9;
          *(_DWORD *)(v12 + 4) = *(_DWORD *)(v9 + 4);
          if ( v9 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v12;
          }
          else
          {
            v13 = *(_DWORD *)(v9 + 4);
            if ( v8 == *(_DWORD *)v13 )
              *(_DWORD *)v13 = v12;
            else
              *(_DWORD *)(v13 + 8) = v12;
          }
          *(_DWORD *)v12 = v8;
          *(_DWORD *)(v8 + 4) = v12;
        }
        *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
        v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
        v15 = *(_DWORD *)v14;
        *(_DWORD *)v14 = *(_DWORD *)(*(_DWORD *)v14 + 8);
        v16 = *(_DWORD *)(v15 + 8);
        if ( !*(_BYTE *)(v16 + 13) )
          *(_DWORD *)(v16 + 4) = v14;
        *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
          *(_DWORD *)(v15 + 8) = v14;
        }
        else
        {
          v17 = *(_DWORD *)(v14 + 4);
          if ( v14 == *(_DWORD *)(v17 + 8) )
          {
            *(_DWORD *)(v17 + 8) = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
          else
          {
            *(_DWORD *)v17 = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
        }
LABEL_52:
        *(_DWORD *)(v14 + 4) = v15;
        continue;
      }
    }
    else if ( *(_BYTE *)(v11 + 12) )
    {
      if ( v8 == *(_DWORD *)v9 )
      {
        v8 = *(_DWORD *)(v8 + 4);
        v18 = *(_DWORD *)v9;
        *(_DWORD *)v9 = *(_DWORD *)(*(_DWORD *)v9 + 8);
        v19 = *(_DWORD *)(v18 + 8);
        if ( !*(_BYTE *)(v19 + 13) )
          *(_DWORD *)(v19 + 4) = v8;
        *(_DWORD *)(v18 + 4) = *(_DWORD *)(v8 + 4);
        if ( v8 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v18;
        }
        else
        {
          v20 = *(_DWORD *)(v8 + 4);
          if ( v8 == *(_DWORD *)(v20 + 8) )
            *(_DWORD *)(v20 + 8) = v18;
          else
            *(_DWORD *)v20 = v18;
        }
        *(_DWORD *)(v18 + 8) = v8;
        *(_DWORD *)(v8 + 4) = v18;
      }
      *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
      v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
      v15 = *(_DWORD *)(v14 + 8);
      *(_DWORD *)(v14 + 8) = *(_DWORD *)v15;
      if ( !*(_BYTE *)(*(_DWORD *)v15 + 13) )
        *(_DWORD *)(*(_DWORD *)v15 + 4) = v14;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
      if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
      }
      else
      {
        v21 = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)v21 )
          *(_DWORD *)v21 = v15;
        else
          *(_DWORD *)(v21 + 8) = v15;
      }
      *(_DWORD *)v15 = v14;
      goto LABEL_52;
    }
    *(_BYTE *)(v9 + 12) = 1;
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
    v8 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *a2 = a6;
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00404950) --------------------------------------------------------
int __thiscall sub_404950(int *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // edi@1
  char v9; // al@1
  bool v10; // zf@1
  int v11; // eax@2
  unsigned int v12; // ebx@4
  int v13; // ecx@4
  int v14; // esi@7
  unsigned int v15; // edx@9
  unsigned int v16; // edx@12
  bool v17; // cf@16
  unsigned __int8 v18; // al@18
  unsigned __int8 v19; // al@20
  unsigned __int8 v20; // al@22
  int v21; // eax@23
  bool v22; // sf@25
  signed int v23; // eax@27
  int v24; // edi@34
  int v25; // esi@36
  int *v26; // eax@38
  int v27; // ecx@39
  int result; // eax@39
  unsigned int v29; // ebx@41
  _DWORD *v30; // ecx@41
  unsigned int v31; // edi@43
  unsigned int v32; // eax@45
  int v33; // eax@47
  int v34; // ecx@47
  bool v35; // sf@47
  signed int v36; // eax@49
  int v37; // [sp+0h] [bp-38h]@1
  int v38; // [sp+10h] [bp-28h]@1
  int *v39; // [sp+14h] [bp-24h]@1
  int v40; // [sp+18h] [bp-20h]@1
  unsigned int v41; // [sp+1Ch] [bp-1Ch]@2
  int v42; // [sp+20h] [bp-18h]@1
  int v43; // [sp+24h] [bp-14h]@2
  int *v44; // [sp+28h] [bp-10h]@1
  int v45; // [sp+34h] [bp-4h]@1

  v44 = &v37;
  v5 = (int)this;
  v39 = this;
  v45 = 0;
  v6 = *this;
  v7 = v6;
  v8 = *(_DWORD *)(v6 + 4);
  v9 = 1;
  v10 = *(_BYTE *)(v8 + 13) == 0;
  v38 = v6;
  v42 = v6;
  LOBYTE(v40) = 1;
  if ( v10 )
  {
    v11 = a4;
    v43 = a4;
    v41 = *(_DWORD *)(a4 + 16);
    while ( 1 )
    {
      v17 = *(_DWORD *)(v8 + 36) < 0x10u;
      v12 = *(_DWORD *)(v8 + 32);
      v13 = v8 + 16;
      v42 = v8;
      if ( !v17 )
        v13 = *(_DWORD *)v13;
      if ( *(_DWORD *)(v11 + 20) < 0x10u )
        v14 = v11;
      else
        v14 = *(_DWORD *)v11;
      v15 = v12;
      if ( v41 < v12 )
        v15 = v41;
      if ( v15 )
        break;
LABEL_26:
      if ( v41 >= v12 )
        v23 = v41 != v12;
      else
        v23 = -1;
      v22 = v23 < 0;
LABEL_30:
      v9 = v22;
      LOBYTE(v40) = v22;
      if ( v22 )
        v8 = *(_DWORD *)v8;
      else
        v8 = *(_DWORD *)(v8 + 8);
      if ( *(_BYTE *)(v8 + 13) )
      {
        v24 = a4;
        v7 = v42;
        v6 = v38;
        v5 = (int)v39;
        goto LABEL_36;
      }
      v11 = a4;
    }
    v17 = v15 < 4;
    v16 = v15 - 4;
    if ( v17 )
    {
LABEL_15:
      if ( v16 == -4 )
        goto LABEL_24;
    }
    else
    {
      while ( *(_DWORD *)v14 == *(_DWORD *)v13 )
      {
        v14 += 4;
        v13 += 4;
        v17 = v16 < 4;
        v16 -= 4;
        if ( v17 )
          goto LABEL_15;
      }
    }
    v17 = *(_BYTE *)v14 < *(_BYTE *)v13;
    if ( *(_BYTE *)v14 != *(_BYTE *)v13
      || v16 != -3
      && ((v18 = *(_BYTE *)(v14 + 1), v17 = v18 < *(_BYTE *)(v13 + 1), v18 != *(_BYTE *)(v13 + 1))
       || v16 != -2
       && ((v19 = *(_BYTE *)(v14 + 2), v17 = v19 < *(_BYTE *)(v13 + 2), v19 != *(_BYTE *)(v13 + 2))
        || v16 != -1 && (v20 = *(_BYTE *)(v14 + 3), v17 = v20 < *(_BYTE *)(v13 + 3), v20 != *(_BYTE *)(v13 + 3)))) )
    {
      v21 = -v17 | 1;
      goto LABEL_25;
    }
LABEL_24:
    v21 = 0;
LABEL_25:
    v22 = v21 < 0;
    if ( v21 )
      goto LABEL_30;
    goto LABEL_26;
  }
  v24 = a4;
  v43 = a4;
LABEL_36:
  v25 = v7;
  a4 = v7;
  if ( v9 )
  {
    if ( v7 == *(_DWORD *)v6 )
    {
      v26 = sub_404700(v5, &a4, 1, v7, v7, a5);
LABEL_39:
      v27 = *v26;
      result = a2;
      *(_DWORD *)a2 = v27;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_4046A0(&a4);
    v25 = a4;
  }
  v29 = *(_DWORD *)(v24 + 16);
  v30 = (_DWORD *)(v25 + 16);
  if ( *(_DWORD *)(v24 + 20) >= 0x10u )
    v43 = *(_DWORD *)v24;
  v31 = *(_DWORD *)(v25 + 32);
  if ( *(_DWORD *)(v25 + 36) >= 0x10u )
    v30 = (_DWORD *)*v30;
  v32 = v29;
  if ( v31 < v29 )
    v32 = *(_DWORD *)(v25 + 32);
  v33 = sub_4055E0(v43, (int)v30, v32);
  v35 = v33 < 0;
  if ( !v33 )
  {
    if ( v31 >= v29 )
      v36 = v31 != v29;
    else
      v36 = -1;
    v35 = v36 < 0;
  }
  if ( v35 )
  {
    v26 = sub_404700((int)v39, &v38, v40, v42, v34, a5);
    goto LABEL_39;
  }
  sub_404520(a5);
  result = a2;
  *(_DWORD *)a2 = v25;
  *(_BYTE *)(a2 + 4) = 0;
  return result;
}

//----- (00404B60) --------------------------------------------------------
_DWORD *__thiscall sub_404B60(int this, _DWORD *a2, char a3, int a4, int a5, int a6)
{
  void (__cdecl *v6)(void *); // edi@1
  unsigned int v7; // eax@1
  int v8; // eax@12
  int v9; // ecx@13
  int v10; // esi@13
  int v11; // edx@13
  int v12; // edx@16
  int v13; // ecx@20
  int v14; // edx@24
  int v15; // esi@24
  int v16; // ecx@24
  int v17; // ecx@28
  int v18; // edx@34
  int v19; // ecx@34
  int v20; // ecx@38
  int v21; // ecx@46
  _DWORD *result; // eax@52

  v6 = (void (__cdecl *)(void *))this;
  v7 = *(_DWORD *)(this + 4);
  if ( v7 >= 0x5D1745C )
  {
    v6 = operator delete;
    if ( *(_DWORD *)(a6 + 36) >= 0x10u )
      operator delete(*(void **)(a6 + 16));
    *(_DWORD *)(a6 + 36) = 15;
    *(_DWORD *)(a6 + 32) = 0;
    *(_BYTE *)(a6 + 16) = 0;
    operator delete((void *)a6);
    std::_Xlength_error("map/set<T> too long");
  }
  *((_DWORD *)v6 + 1) = v7 + 1;
  *(_DWORD *)(a6 + 4) = a4;
  if ( a4 == *(_DWORD *)v6 )
  {
    *(_DWORD *)(*(_DWORD *)v6 + 4) = a6;
    **(_DWORD **)v6 = a6;
    *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  else if ( a3 )
  {
    *(_DWORD *)a4 = a6;
    if ( a4 == **(_DWORD **)v6 )
      **(_DWORD **)v6 = a6;
  }
  else
  {
    *(_DWORD *)(a4 + 8) = a6;
    if ( a4 == *(_DWORD *)(*(_DWORD *)v6 + 8) )
      *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  v8 = a6;
  while ( !*(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) )
  {
    v9 = *(_DWORD *)(v8 + 4);
    v10 = *(_DWORD *)(v9 + 4);
    v11 = *(_DWORD *)v10;
    if ( v9 == *(_DWORD *)v10 )
    {
      v11 = *(_DWORD *)(v10 + 8);
      if ( *(_BYTE *)(v11 + 12) )
      {
        if ( v8 == *(_DWORD *)(v9 + 8) )
        {
          v8 = *(_DWORD *)(v8 + 4);
          v12 = *(_DWORD *)(v9 + 8);
          *(_DWORD *)(v9 + 8) = *(_DWORD *)v12;
          if ( !*(_BYTE *)(*(_DWORD *)v12 + 13) )
            *(_DWORD *)(*(_DWORD *)v12 + 4) = v9;
          *(_DWORD *)(v12 + 4) = *(_DWORD *)(v9 + 4);
          if ( v9 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v12;
          }
          else
          {
            v13 = *(_DWORD *)(v9 + 4);
            if ( v8 == *(_DWORD *)v13 )
              *(_DWORD *)v13 = v12;
            else
              *(_DWORD *)(v13 + 8) = v12;
          }
          *(_DWORD *)v12 = v8;
          *(_DWORD *)(v8 + 4) = v12;
        }
        *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
        v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
        v15 = *(_DWORD *)v14;
        *(_DWORD *)v14 = *(_DWORD *)(*(_DWORD *)v14 + 8);
        v16 = *(_DWORD *)(v15 + 8);
        if ( !*(_BYTE *)(v16 + 13) )
          *(_DWORD *)(v16 + 4) = v14;
        *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
          *(_DWORD *)(v15 + 8) = v14;
        }
        else
        {
          v17 = *(_DWORD *)(v14 + 4);
          if ( v14 == *(_DWORD *)(v17 + 8) )
          {
            *(_DWORD *)(v17 + 8) = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
          else
          {
            *(_DWORD *)v17 = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
        }
LABEL_50:
        *(_DWORD *)(v14 + 4) = v15;
        continue;
      }
    }
    else if ( *(_BYTE *)(v11 + 12) )
    {
      if ( v8 == *(_DWORD *)v9 )
      {
        v8 = *(_DWORD *)(v8 + 4);
        v18 = *(_DWORD *)v9;
        *(_DWORD *)v9 = *(_DWORD *)(*(_DWORD *)v9 + 8);
        v19 = *(_DWORD *)(v18 + 8);
        if ( !*(_BYTE *)(v19 + 13) )
          *(_DWORD *)(v19 + 4) = v8;
        *(_DWORD *)(v18 + 4) = *(_DWORD *)(v8 + 4);
        if ( v8 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v18;
        }
        else
        {
          v20 = *(_DWORD *)(v8 + 4);
          if ( v8 == *(_DWORD *)(v20 + 8) )
            *(_DWORD *)(v20 + 8) = v18;
          else
            *(_DWORD *)v20 = v18;
        }
        *(_DWORD *)(v18 + 8) = v8;
        *(_DWORD *)(v8 + 4) = v18;
      }
      *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
      v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
      v15 = *(_DWORD *)(v14 + 8);
      *(_DWORD *)(v14 + 8) = *(_DWORD *)v15;
      if ( !*(_BYTE *)(*(_DWORD *)v15 + 13) )
        *(_DWORD *)(*(_DWORD *)v15 + 4) = v14;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
      if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
      }
      else
      {
        v21 = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)v21 )
          *(_DWORD *)v21 = v15;
        else
          *(_DWORD *)(v21 + 8) = v15;
      }
      *(_DWORD *)v15 = v14;
      goto LABEL_50;
    }
    *(_BYTE *)(v9 + 12) = 1;
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
    v8 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *a2 = a6;
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00404D90) --------------------------------------------------------
int __thiscall sub_404D90(int *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // edi@1
  char v9; // al@1
  bool v10; // zf@1
  int v11; // eax@2
  unsigned int v12; // ebx@4
  int v13; // ecx@4
  int v14; // esi@7
  unsigned int v15; // edx@9
  unsigned int v16; // edx@12
  bool v17; // cf@16
  unsigned __int8 v18; // al@18
  unsigned __int8 v19; // al@20
  unsigned __int8 v20; // al@22
  int v21; // eax@23
  bool v22; // sf@25
  signed int v23; // eax@27
  int v24; // edi@34
  int v25; // esi@36
  int *v26; // eax@38
  int v27; // ecx@39
  int result; // eax@39
  unsigned int v29; // ebx@41
  _DWORD *v30; // ecx@41
  unsigned int v31; // edi@43
  unsigned int v32; // eax@45
  int v33; // eax@47
  int v34; // ecx@47
  bool v35; // sf@47
  signed int v36; // eax@49
  int v37; // edi@54
  int v38; // [sp+0h] [bp-38h]@1
  int v39; // [sp+10h] [bp-28h]@1
  int *v40; // [sp+14h] [bp-24h]@1
  int v41; // [sp+18h] [bp-20h]@1
  unsigned int v42; // [sp+1Ch] [bp-1Ch]@2
  int v43; // [sp+20h] [bp-18h]@1
  int v44; // [sp+24h] [bp-14h]@2
  int *v45; // [sp+28h] [bp-10h]@1
  int v46; // [sp+34h] [bp-4h]@1

  v45 = &v38;
  v5 = (int)this;
  v40 = this;
  v46 = 0;
  v6 = *this;
  v7 = v6;
  v8 = *(_DWORD *)(v6 + 4);
  v9 = 1;
  v10 = *(_BYTE *)(v8 + 13) == 0;
  v39 = v6;
  v43 = v6;
  LOBYTE(v41) = 1;
  if ( v10 )
  {
    v11 = a4;
    v44 = a4;
    v42 = *(_DWORD *)(a4 + 16);
    while ( 1 )
    {
      v17 = *(_DWORD *)(v8 + 36) < 0x10u;
      v12 = *(_DWORD *)(v8 + 32);
      v13 = v8 + 16;
      v43 = v8;
      if ( !v17 )
        v13 = *(_DWORD *)v13;
      if ( *(_DWORD *)(v11 + 20) < 0x10u )
        v14 = v11;
      else
        v14 = *(_DWORD *)v11;
      v15 = v12;
      if ( v42 < v12 )
        v15 = v42;
      if ( v15 )
        break;
LABEL_26:
      if ( v42 >= v12 )
        v23 = v42 != v12;
      else
        v23 = -1;
      v22 = v23 < 0;
LABEL_30:
      v9 = v22;
      LOBYTE(v41) = v22;
      if ( v22 )
        v8 = *(_DWORD *)v8;
      else
        v8 = *(_DWORD *)(v8 + 8);
      if ( *(_BYTE *)(v8 + 13) )
      {
        v24 = a4;
        v7 = v43;
        v6 = v39;
        v5 = (int)v40;
        goto LABEL_36;
      }
      v11 = a4;
    }
    v17 = v15 < 4;
    v16 = v15 - 4;
    if ( v17 )
    {
LABEL_15:
      if ( v16 == -4 )
        goto LABEL_24;
    }
    else
    {
      while ( *(_DWORD *)v14 == *(_DWORD *)v13 )
      {
        v14 += 4;
        v13 += 4;
        v17 = v16 < 4;
        v16 -= 4;
        if ( v17 )
          goto LABEL_15;
      }
    }
    v17 = *(_BYTE *)v14 < *(_BYTE *)v13;
    if ( *(_BYTE *)v14 != *(_BYTE *)v13
      || v16 != -3
      && ((v18 = *(_BYTE *)(v14 + 1), v17 = v18 < *(_BYTE *)(v13 + 1), v18 != *(_BYTE *)(v13 + 1))
       || v16 != -2
       && ((v19 = *(_BYTE *)(v14 + 2), v17 = v19 < *(_BYTE *)(v13 + 2), v19 != *(_BYTE *)(v13 + 2))
        || v16 != -1 && (v20 = *(_BYTE *)(v14 + 3), v17 = v20 < *(_BYTE *)(v13 + 3), v20 != *(_BYTE *)(v13 + 3)))) )
    {
      v21 = -v17 | 1;
      goto LABEL_25;
    }
LABEL_24:
    v21 = 0;
LABEL_25:
    v22 = v21 < 0;
    if ( v21 )
      goto LABEL_30;
    goto LABEL_26;
  }
  v24 = a4;
  v44 = a4;
LABEL_36:
  v25 = v7;
  a4 = v7;
  if ( v9 )
  {
    if ( v7 == *(_DWORD *)v6 )
    {
      v26 = sub_404B60(v5, &a4, 1, v7, v7, a5);
LABEL_39:
      v27 = *v26;
      result = a2;
      *(_DWORD *)a2 = v27;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_4046A0(&a4);
    v25 = a4;
  }
  v29 = *(_DWORD *)(v24 + 16);
  v30 = (_DWORD *)(v25 + 16);
  if ( *(_DWORD *)(v24 + 20) >= 0x10u )
    v44 = *(_DWORD *)v24;
  v31 = *(_DWORD *)(v25 + 32);
  if ( *(_DWORD *)(v25 + 36) >= 0x10u )
    v30 = (_DWORD *)*v30;
  v32 = v29;
  if ( v31 < v29 )
    v32 = *(_DWORD *)(v25 + 32);
  v33 = sub_4055E0(v44, (int)v30, v32);
  v35 = v33 < 0;
  if ( !v33 )
  {
    if ( v31 >= v29 )
      v36 = v31 != v29;
    else
      v36 = -1;
    v35 = v36 < 0;
  }
  if ( v35 )
  {
    v26 = sub_404B60((int)v40, &a4, v41, v43, v34, a5);
    goto LABEL_39;
  }
  v37 = a5;
  if ( *(_DWORD *)(a5 + 36) >= 0x10u )
    operator delete(*(void **)(a5 + 16));
  *(_DWORD *)(v37 + 36) = 15;
  *(_DWORD *)(v37 + 32) = 0;
  *(_BYTE *)(v37 + 16) = 0;
  operator delete((void *)v37);
  result = a2;
  *(_DWORD *)a2 = v25;
  *(_BYTE *)(a2 + 4) = 0;
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00404FC0) --------------------------------------------------------
_DWORD *__thiscall sub_404FC0(int this, _DWORD *a2, char a3, int a4, int a5, int a6)
{
  int v6; // edi@1
  unsigned int v7; // eax@1
  int v8; // eax@10
  int v9; // ecx@11
  int v10; // esi@11
  int v11; // edx@11
  int v12; // edx@14
  int v13; // ecx@18
  int v14; // edx@22
  int v15; // esi@22
  int v16; // ecx@22
  int v17; // ecx@26
  int v18; // edx@32
  int v19; // ecx@32
  int v20; // ecx@36
  int v21; // ecx@44
  _DWORD *result; // eax@50

  v6 = this;
  v7 = *(_DWORD *)(this + 4);
  if ( v7 >= 0x35E50D6 )
  {
    sub_402CB0(a6 + 16);
    operator delete((void *)a6);
    std::_Xlength_error("map/set<T> too long");
  }
  *(_DWORD *)(v6 + 4) = v7 + 1;
  *(_DWORD *)(a6 + 4) = a4;
  if ( a4 == *(_DWORD *)v6 )
  {
    *(_DWORD *)(*(_DWORD *)v6 + 4) = a6;
    **(_DWORD **)v6 = a6;
    *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  else if ( a3 )
  {
    *(_DWORD *)a4 = a6;
    if ( a4 == **(_DWORD **)v6 )
      **(_DWORD **)v6 = a6;
  }
  else
  {
    *(_DWORD *)(a4 + 8) = a6;
    if ( a4 == *(_DWORD *)(*(_DWORD *)v6 + 8) )
      *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  v8 = a6;
  while ( !*(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) )
  {
    v9 = *(_DWORD *)(v8 + 4);
    v10 = *(_DWORD *)(v9 + 4);
    v11 = *(_DWORD *)v10;
    if ( v9 == *(_DWORD *)v10 )
    {
      v11 = *(_DWORD *)(v10 + 8);
      if ( *(_BYTE *)(v11 + 12) )
      {
        if ( v8 == *(_DWORD *)(v9 + 8) )
        {
          v8 = *(_DWORD *)(v8 + 4);
          v12 = *(_DWORD *)(v9 + 8);
          *(_DWORD *)(v9 + 8) = *(_DWORD *)v12;
          if ( !*(_BYTE *)(*(_DWORD *)v12 + 13) )
            *(_DWORD *)(*(_DWORD *)v12 + 4) = v9;
          *(_DWORD *)(v12 + 4) = *(_DWORD *)(v9 + 4);
          if ( v9 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v12;
          }
          else
          {
            v13 = *(_DWORD *)(v9 + 4);
            if ( v8 == *(_DWORD *)v13 )
              *(_DWORD *)v13 = v12;
            else
              *(_DWORD *)(v13 + 8) = v12;
          }
          *(_DWORD *)v12 = v8;
          *(_DWORD *)(v8 + 4) = v12;
        }
        *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
        v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
        v15 = *(_DWORD *)v14;
        *(_DWORD *)v14 = *(_DWORD *)(*(_DWORD *)v14 + 8);
        v16 = *(_DWORD *)(v15 + 8);
        if ( !*(_BYTE *)(v16 + 13) )
          *(_DWORD *)(v16 + 4) = v14;
        *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
          *(_DWORD *)(v15 + 8) = v14;
        }
        else
        {
          v17 = *(_DWORD *)(v14 + 4);
          if ( v14 == *(_DWORD *)(v17 + 8) )
          {
            *(_DWORD *)(v17 + 8) = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
          else
          {
            *(_DWORD *)v17 = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
        }
LABEL_48:
        *(_DWORD *)(v14 + 4) = v15;
        continue;
      }
    }
    else if ( *(_BYTE *)(v11 + 12) )
    {
      if ( v8 == *(_DWORD *)v9 )
      {
        v8 = *(_DWORD *)(v8 + 4);
        v18 = *(_DWORD *)v9;
        *(_DWORD *)v9 = *(_DWORD *)(*(_DWORD *)v9 + 8);
        v19 = *(_DWORD *)(v18 + 8);
        if ( !*(_BYTE *)(v19 + 13) )
          *(_DWORD *)(v19 + 4) = v8;
        *(_DWORD *)(v18 + 4) = *(_DWORD *)(v8 + 4);
        if ( v8 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v18;
        }
        else
        {
          v20 = *(_DWORD *)(v8 + 4);
          if ( v8 == *(_DWORD *)(v20 + 8) )
            *(_DWORD *)(v20 + 8) = v18;
          else
            *(_DWORD *)v20 = v18;
        }
        *(_DWORD *)(v18 + 8) = v8;
        *(_DWORD *)(v8 + 4) = v18;
      }
      *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
      v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
      v15 = *(_DWORD *)(v14 + 8);
      *(_DWORD *)(v14 + 8) = *(_DWORD *)v15;
      if ( !*(_BYTE *)(*(_DWORD *)v15 + 13) )
        *(_DWORD *)(*(_DWORD *)v15 + 4) = v14;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
      if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
      }
      else
      {
        v21 = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)v21 )
          *(_DWORD *)v21 = v15;
        else
          *(_DWORD *)(v21 + 8) = v15;
      }
      *(_DWORD *)v15 = v14;
      goto LABEL_48;
    }
    *(_BYTE *)(v9 + 12) = 1;
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
    v8 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *a2 = a6;
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004051D0) --------------------------------------------------------
int __thiscall sub_4051D0(int *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // edi@1
  char v9; // al@1
  bool v10; // zf@1
  int v11; // eax@2
  unsigned int v12; // ebx@4
  int v13; // ecx@4
  int v14; // esi@7
  unsigned int v15; // edx@9
  unsigned int v16; // edx@12
  bool v17; // cf@16
  unsigned __int8 v18; // al@18
  unsigned __int8 v19; // al@20
  unsigned __int8 v20; // al@22
  int v21; // eax@23
  bool v22; // sf@25
  signed int v23; // eax@27
  int v24; // edi@34
  int v25; // esi@36
  int *v26; // eax@38
  int v27; // ecx@39
  int result; // eax@39
  unsigned int v29; // ebx@41
  _DWORD *v30; // ecx@41
  unsigned int v31; // edi@43
  unsigned int v32; // eax@45
  int v33; // eax@47
  int v34; // ecx@47
  bool v35; // sf@47
  signed int v36; // eax@49
  void *v37; // edi@54
  int v38; // [sp+0h] [bp-38h]@1
  int v39; // [sp+10h] [bp-28h]@1
  int *v40; // [sp+14h] [bp-24h]@1
  int v41; // [sp+18h] [bp-20h]@1
  unsigned int v42; // [sp+1Ch] [bp-1Ch]@2
  int v43; // [sp+20h] [bp-18h]@1
  int v44; // [sp+24h] [bp-14h]@2
  int *v45; // [sp+28h] [bp-10h]@1
  int v46; // [sp+34h] [bp-4h]@1

  v45 = &v38;
  v5 = (int)this;
  v40 = this;
  v46 = 0;
  v6 = *this;
  v7 = v6;
  v8 = *(_DWORD *)(v6 + 4);
  v9 = 1;
  v10 = *(_BYTE *)(v8 + 13) == 0;
  v39 = v6;
  v43 = v6;
  LOBYTE(v41) = 1;
  if ( v10 )
  {
    v11 = a4;
    v44 = a4;
    v42 = *(_DWORD *)(a4 + 16);
    while ( 1 )
    {
      v17 = *(_DWORD *)(v8 + 36) < 0x10u;
      v12 = *(_DWORD *)(v8 + 32);
      v13 = v8 + 16;
      v43 = v8;
      if ( !v17 )
        v13 = *(_DWORD *)v13;
      if ( *(_DWORD *)(v11 + 20) < 0x10u )
        v14 = v11;
      else
        v14 = *(_DWORD *)v11;
      v15 = v12;
      if ( v42 < v12 )
        v15 = v42;
      if ( v15 )
        break;
LABEL_26:
      if ( v42 >= v12 )
        v23 = v42 != v12;
      else
        v23 = -1;
      v22 = v23 < 0;
LABEL_30:
      v9 = v22;
      LOBYTE(v41) = v22;
      if ( v22 )
        v8 = *(_DWORD *)v8;
      else
        v8 = *(_DWORD *)(v8 + 8);
      if ( *(_BYTE *)(v8 + 13) )
      {
        v24 = a4;
        v7 = v43;
        v6 = v39;
        v5 = (int)v40;
        goto LABEL_36;
      }
      v11 = a4;
    }
    v17 = v15 < 4;
    v16 = v15 - 4;
    if ( v17 )
    {
LABEL_15:
      if ( v16 == -4 )
        goto LABEL_24;
    }
    else
    {
      while ( *(_DWORD *)v14 == *(_DWORD *)v13 )
      {
        v14 += 4;
        v13 += 4;
        v17 = v16 < 4;
        v16 -= 4;
        if ( v17 )
          goto LABEL_15;
      }
    }
    v17 = *(_BYTE *)v14 < *(_BYTE *)v13;
    if ( *(_BYTE *)v14 != *(_BYTE *)v13
      || v16 != -3
      && ((v18 = *(_BYTE *)(v14 + 1), v17 = v18 < *(_BYTE *)(v13 + 1), v18 != *(_BYTE *)(v13 + 1))
       || v16 != -2
       && ((v19 = *(_BYTE *)(v14 + 2), v17 = v19 < *(_BYTE *)(v13 + 2), v19 != *(_BYTE *)(v13 + 2))
        || v16 != -1 && (v20 = *(_BYTE *)(v14 + 3), v17 = v20 < *(_BYTE *)(v13 + 3), v20 != *(_BYTE *)(v13 + 3)))) )
    {
      v21 = -v17 | 1;
      goto LABEL_25;
    }
LABEL_24:
    v21 = 0;
LABEL_25:
    v22 = v21 < 0;
    if ( v21 )
      goto LABEL_30;
    goto LABEL_26;
  }
  v24 = a4;
  v44 = a4;
LABEL_36:
  v25 = v7;
  a4 = v7;
  if ( v9 )
  {
    if ( v7 == *(_DWORD *)v6 )
    {
      v26 = sub_404FC0(v5, &a4, 1, v7, v7, a5);
LABEL_39:
      v27 = *v26;
      result = a2;
      *(_DWORD *)a2 = v27;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_4046A0(&a4);
    v25 = a4;
  }
  v29 = *(_DWORD *)(v24 + 16);
  v30 = (_DWORD *)(v25 + 16);
  if ( *(_DWORD *)(v24 + 20) >= 0x10u )
    v44 = *(_DWORD *)v24;
  v31 = *(_DWORD *)(v25 + 32);
  if ( *(_DWORD *)(v25 + 36) >= 0x10u )
    v30 = (_DWORD *)*v30;
  v32 = v29;
  if ( v31 < v29 )
    v32 = *(_DWORD *)(v25 + 32);
  v33 = sub_4055E0(v44, (int)v30, v32);
  v35 = v33 < 0;
  if ( !v33 )
  {
    if ( v31 >= v29 )
      v36 = v31 != v29;
    else
      v36 = -1;
    v35 = v36 < 0;
  }
  if ( v35 )
  {
    v26 = sub_404FC0((int)v40, &a4, v41, v43, v34, a5);
    goto LABEL_39;
  }
  v37 = (void *)a5;
  sub_402CB0(a5 + 16);
  operator delete(v37);
  result = a2;
  *(_DWORD *)a2 = v25;
  *(_BYTE *)(a2 + 4) = 0;
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004053F0) --------------------------------------------------------
_DWORD *__cdecl sub_4053F0(_DWORD *a1, _DWORD *a2)
{
  _DWORD *v2; // ecx@0
  _DWORD *i; // eax@1

  for ( i = a1; i != a2; ++v2 )
  {
    if ( v2 )
      *v2 = *i;
    ++i;
  }
  return v2;
}

//----- (00405420) --------------------------------------------------------
void *__thiscall sub_405420(void *Dst, void *Src, int a3)
{
  void *v3; // edi@1
  void (__cdecl *v4)(void *, const void *, size_t); // ecx@1
  int v5; // ebx@5
  char *v6; // esi@5
  void *result; // eax@9

  v3 = Dst;
  v4 = (void (__cdecl *)(void *, const void *, size_t))memmove;
  *((_DWORD *)v3 + 5) = 15;
  *((_DWORD *)v3 + 4) = 0;
  *(_BYTE *)v3 = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)v3 = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove(v3, Src, *((_DWORD *)Src + 4) + 1);
    v4 = (void (__cdecl *)(void *, const void *, size_t))memmove;
  }
  *((_DWORD *)v3 + 4) = *((_DWORD *)Src + 4);
  *((_DWORD *)v3 + 5) = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  v5 = (int)v3 + 24;
  v6 = (char *)Src + 24;
  *(_DWORD *)(v5 + 20) = 15;
  *(_DWORD *)(v5 + 16) = 0;
  *(_BYTE *)v5 = 0;
  if ( *((_DWORD *)Src + 11) >= 0x10u )
  {
    *(_DWORD *)v5 = *(_DWORD *)v6;
    *(_DWORD *)v6 = 0;
  }
  else if ( *((_DWORD *)Src + 10) != -1 )
  {
    v4((char *)v3 + 24, (char *)Src + 24, *((_DWORD *)Src + 10) + 1);
  }
  *((_DWORD *)v3 + 10) = *((_DWORD *)Src + 10);
  *((_DWORD *)v3 + 11) = *((_DWORD *)Src + 11);
  *((_DWORD *)Src + 11) = 15;
  *((_DWORD *)Src + 10) = 0;
  result = v3;
  *v6 = 0;
  return result;
}

//----- (004054F0) --------------------------------------------------------
_DWORD *__thiscall sub_4054F0(void *Dst, void *Src, int a3)
{
  _DWORD *v3; // edi@1

  v3 = Dst;
  *((_DWORD *)Dst + 5) = 15;
  *((_DWORD *)Dst + 4) = 0;
  *(_BYTE *)Dst = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)Dst = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove(Dst, Src, *((_DWORD *)Src + 4) + 1);
  }
  v3[4] = *((_DWORD *)Src + 4);
  v3[5] = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  v3[6] = *((_DWORD *)Src + 6);
  return v3;
}

//----- (00405560) --------------------------------------------------------
int __thiscall sub_405560(int this, void *Src, int a3)
{
  int v3; // edi@1

  v3 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)this = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove((void *)this, Src, *((_DWORD *)Src + 4) + 1);
  }
  *(_DWORD *)(v3 + 16) = *((_DWORD *)Src + 4);
  *(_DWORD *)(v3 + 20) = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  sub_403990((void *)(v3 + 24), (char *)Src + 24, this);
  return v3;
}

//----- (004055E0) --------------------------------------------------------
int __usercall sub_4055E0@<eax>(int a1@<edx>, int a2@<ecx>, unsigned int a3)
{
  unsigned int v3; // esi@2
  bool v4; // cf@6
  unsigned __int8 v5; // al@8
  unsigned __int8 v6; // al@10
  unsigned __int8 v7; // al@12

  if ( !a3 )
    return 0;
  v3 = a3 - 4;
  if ( a3 < 4 )
  {
LABEL_5:
    if ( v3 == -4 )
      return 0;
  }
  else
  {
    while ( *(_DWORD *)a2 == *(_DWORD *)a1 )
    {
      a2 += 4;
      a1 += 4;
      v4 = v3 < 4;
      v3 -= 4;
      if ( v4 )
        goto LABEL_5;
    }
  }
  v4 = *(_BYTE *)a2 < *(_BYTE *)a1;
  if ( *(_BYTE *)a2 != *(_BYTE *)a1 )
    return -v4 | 1;
  if ( v3 != -3 )
  {
    v5 = *(_BYTE *)(a2 + 1);
    v4 = v5 < *(_BYTE *)(a1 + 1);
    if ( v5 != *(_BYTE *)(a1 + 1) )
      return -v4 | 1;
    if ( v3 != -2 )
    {
      v6 = *(_BYTE *)(a2 + 2);
      v4 = v6 < *(_BYTE *)(a1 + 2);
      if ( v6 != *(_BYTE *)(a1 + 2) )
        return -v4 | 1;
      if ( v3 != -1 )
      {
        v7 = *(_BYTE *)(a2 + 3);
        v4 = v7 < *(_BYTE *)(a1 + 3);
        if ( v7 != *(_BYTE *)(a1 + 3) )
          return -v4 | 1;
      }
    }
  }
  return 0;
}

//----- (00405640) --------------------------------------------------------
int __thiscall sub_405640(void *this, int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // edx@1
  int v5; // esi@1
  int v6; // ecx@1
  unsigned int v7; // eax@1
  size_t v8; // ebx@3
  unsigned int v9; // eax@3
  size_t v10; // edx@3
  unsigned int v11; // edi@8
  unsigned int v12; // eax@10
  _BYTE *v13; // edx@15
  int result; // eax@18
  bool v15; // cf@23

  v4 = a3;
  v5 = (int)this;
  v6 = a2;
  v7 = *(_DWORD *)(a2 + 16);
  if ( v7 < a3 )
    std::_Xout_of_range("invalid string position");
  v8 = a4;
  v9 = v7 - v4;
  v10 = *(_DWORD *)(v5 + 16);
  if ( v9 < a4 )
    v8 = v9;
  if ( -1 - v10 <= v8 )
    std::_Xlength_error("string too long");
  if ( !v8 )
    return v5;
  v11 = v10 + v8;
  if ( v10 + v8 > 0xFFFFFFFE )
    std::_Xlength_error("string too long");
  v12 = *(_DWORD *)(v5 + 20);
  if ( v12 < v11 )
  {
    sub_405A60(v5, v11, v10);
    v6 = a2;
    if ( v11 )
    {
LABEL_12:
      if ( *(_DWORD *)(v6 + 20) >= 0x10u )
        v6 = *(_DWORD *)v6;
      if ( *(_DWORD *)(v5 + 20) < 0x10u )
        v13 = (_BYTE *)v5;
      else
        v13 = *(_BYTE **)v5;
      if ( v8 )
        memcpy(&v13[*(_DWORD *)(v5 + 16)], (const void *)(v6 + a3), v8);
      v15 = *(_DWORD *)(v5 + 20) < 0x10u;
      *(_DWORD *)(v5 + 16) = v11;
      if ( !v15 )
      {
        *(_BYTE *)(*(_DWORD *)v5 + v11) = 0;
        return v5;
      }
      *(_BYTE *)(v5 + v11) = 0;
    }
    return v5;
  }
  if ( v11 )
    goto LABEL_12;
  *(_DWORD *)(v5 + 16) = 0;
  if ( v12 < 0x10 )
  {
    result = v5;
    *(_BYTE *)v5 = 0;
  }
  else
  {
    **(_BYTE **)v5 = 0;
    result = v5;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);

//----- (00405730) --------------------------------------------------------
_DWORD *__thiscall sub_405730(void *Dst, void *Src)
{
  _DWORD *v2; // edi@1
  _DWORD *result; // eax@5

  v2 = Dst;
  *((_DWORD *)Dst + 5) = 15;
  *((_DWORD *)Dst + 4) = 0;
  *(_BYTE *)Dst = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)Dst = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove(Dst, Src, *((_DWORD *)Src + 4) + 1);
  }
  v2[4] = *((_DWORD *)Src + 4);
  v2[5] = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  result = v2;
  *(_BYTE *)Src = 0;
  return result;
}

//----- (004057A0) --------------------------------------------------------
int __thiscall sub_4057A0(void *Dst, void *Src)
{
  _DWORD *v2; // edi@1
  int result; // eax@7

  v2 = Dst;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    if ( Dst )
      *(_DWORD *)Dst = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove(Dst, Src, *((_DWORD *)Src + 4) + 1);
  }
  v2[4] = *((_DWORD *)Src + 4);
  result = *((_DWORD *)Src + 5);
  v2[5] = result;
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  return result;
}

//----- (00405800) --------------------------------------------------------
_DWORD *__thiscall sub_405800(void *Dst, void *Src)
{
  _DWORD *v2; // esi@1

  v2 = Dst;
  if ( Dst != Src )
  {
    if ( *((_DWORD *)Dst + 5) >= 0x10u )
      operator delete(*(void **)Dst);
    v2[5] = 15;
    v2[4] = 0;
    *(_BYTE *)v2 = 0;
    sub_4057A0(v2, Src);
  }
  return v2;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00405840) --------------------------------------------------------
void *__usercall sub_405840@<eax>(void *Dst@<ecx>, void *Src@<edx>, size_t Size)
{
  void *result; // eax@2

  if ( Size )
    result = memmove(Dst, Src, Size);
  else
    result = Dst;
  return result;
}

//----- (00405860) --------------------------------------------------------
char *__thiscall sub_405860(char *this, unsigned int a2, unsigned int a3)
{
  char *v3; // esi@1
  unsigned int v4; // ecx@1
  unsigned int v5; // edi@1
  bool v6; // cf@4
  char *result; // eax@5
  char *v8; // eax@9
  int v9; // edi@11

  v3 = this;
  v4 = a2;
  v5 = *((_DWORD *)v3 + 4);
  if ( v5 < a2 )
    std::_Xout_of_range("invalid string position");
  if ( v5 - v4 > a3 )
  {
    if ( a3 )
    {
      if ( *((_DWORD *)v3 + 5) < 0x10u )
        v8 = v3;
      else
        v8 = *(char **)v3;
      v9 = v5 - a3;
      if ( v9 != v4 )
        memmove(&v8[v4], &v8[v4] + a3, v9 - v4);
      v6 = *((_DWORD *)v3 + 5) < 0x10u;
      *((_DWORD *)v3 + 4) = v9;
      if ( !v6 )
      {
        *(_BYTE *)(*(_DWORD *)v3 + v9) = 0;
        return v3;
      }
      v3[v9] = 0;
    }
    result = v3;
  }
  else
  {
    v6 = *((_DWORD *)v3 + 5) < 0x10u;
    *((_DWORD *)v3 + 4) = v4;
    if ( v6 )
    {
      result = v3;
      v3[v4] = 0;
    }
    else
    {
      *(_BYTE *)(*(_DWORD *)v3 + v4) = 0;
      result = v3;
    }
  }
  return result;
}
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);

//----- (00405900) --------------------------------------------------------
int __thiscall sub_405900(void *this, int a2, int a3, size_t Size)
{
  int v4; // ebx@1
  unsigned int v5; // edi@1
  int v6; // esi@1
  int v7; // ecx@1
  unsigned int v8; // edi@3
  int v9; // eax@6
  bool v10; // cf@8
  int result; // eax@9
  unsigned int v12; // eax@13
  void *v13; // edx@18

  v4 = a2;
  v5 = *(_DWORD *)(a2 + 16);
  v6 = (int)this;
  v7 = a3;
  if ( v5 < a3 )
    std::_Xout_of_range("invalid string position");
  v8 = v5 - v7;
  if ( Size < v8 )
    v8 = Size;
  if ( v6 != a2 )
  {
    if ( v8 > 0xFFFFFFFE )
      std::_Xlength_error("string too long");
    v12 = *(_DWORD *)(v6 + 20);
    if ( v12 >= v8 )
    {
      if ( !v8 )
      {
        *(_DWORD *)(v6 + 16) = 0;
        if ( v12 < 0x10 )
        {
          result = v6;
          *(_BYTE *)v6 = 0;
        }
        else
        {
          **(_BYTE **)v6 = 0;
          result = v6;
        }
        return result;
      }
    }
    else
    {
      sub_405A60(v6, v8, *(_DWORD *)(v6 + 16));
      v7 = a3;
      if ( !v8 )
        return v6;
    }
    if ( *(_DWORD *)(a2 + 20) >= 0x10u )
      v4 = *(_DWORD *)a2;
    if ( *(_DWORD *)(v6 + 20) < 0x10u )
      v13 = (void *)v6;
    else
      v13 = *(void **)v6;
    if ( v8 )
      memcpy(v13, (const void *)(v4 + v7), v8);
    v10 = *(_DWORD *)(v6 + 20) < 0x10u;
    *(_DWORD *)(v6 + 16) = v8;
    if ( !v10 )
    {
      *(_BYTE *)(*(_DWORD *)v6 + v8) = 0;
      return v6;
    }
    *(_BYTE *)(v6 + v8) = 0;
    return v6;
  }
  v9 = v8 + v7;
  if ( *(_DWORD *)(v6 + 16) < v8 + v7 )
    std::_Xout_of_range("invalid string position");
  v10 = *(_DWORD *)(v6 + 20) < 0x10u;
  *(_DWORD *)(v6 + 16) = v9;
  if ( v10 )
  {
    *(_BYTE *)(v9 + v6) = 0;
    sub_405860((char *)v6, 0, v7);
    result = v6;
  }
  else
  {
    *(_BYTE *)(v9 + *(_DWORD *)v6) = 0;
    sub_405860((char *)v6, 0, v7);
    result = v6;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);

//----- (00405A20) --------------------------------------------------------
void *__stdcall sub_405A20(unsigned int a1)
{
  void *v1; // ecx@1

  v1 = 0;
  if ( a1 )
  {
    if ( a1 > 0xFFFFFFFF || (v1 = operator new(a1)) == 0 )
      std::_Xbad_alloc();
  }
  return v1;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (00405A60) --------------------------------------------------------
void *__thiscall sub_405A60(int this, int a2, size_t Size)
{
  int v3; // esi@1
  unsigned int v4; // edi@1
  unsigned int v5; // ebx@3
  unsigned int v6; // ecx@3
  void *v7; // eax@6
  const void *v8; // ecx@12
  void *result; // eax@18
  int v10; // [sp+0h] [bp-28h]@1
  int v11; // [sp+10h] [bp-18h]@1
  void *v12; // [sp+14h] [bp-14h]@6
  int *v13; // [sp+18h] [bp-10h]@1
  unsigned int v14; // [sp+24h] [bp-4h]@6
  int savedregs; // [sp+28h] [bp+0h]@9

  v13 = &v10;
  v3 = this;
  v11 = this;
  v4 = a2 | 0xF;
  if ( (a2 | 0xFu) <= 0xFFFFFFFE )
  {
    v5 = *(_DWORD *)(this + 20);
    v6 = *(_DWORD *)(this + 20) >> 1;
    if ( v6 > v4 / 3 )
    {
      v4 = v6 + v5;
      if ( v5 > -2 - v6 )
        v4 = -2;
    }
  }
  else
  {
    v4 = a2;
  }
  v7 = 0;
  v14 = 0;
  v12 = 0;
  if ( v4 != -1 )
  {
    if ( v4 + 1 > 0xFFFFFFFF || (v7 = operator new(v4 + 1), (v12 = v7) == 0) )
    {
      std::_Xbad_alloc();
      v13 = &savedregs;
      v14 = a2 + 1;
      LOBYTE(v14) = 2;
      v12 = sub_405A20(v14);
      v7 = v12;
      v3 = v11;
      v4 = a2;
    }
  }
  if ( Size )
  {
    v8 = (const void *)(*(_DWORD *)(v3 + 20) < 0x10u ? v3 : *(_DWORD *)v3);
    if ( Size )
      memcpy(v7, v8, Size);
  }
  if ( *(_DWORD *)(v3 + 20) >= 0x10u )
    operator delete(*(void **)v3);
  result = v12;
  *(_BYTE *)v3 = 0;
  *(_DWORD *)v3 = result;
  *(_DWORD *)(v3 + 20) = v4;
  *(_DWORD *)(v3 + 16) = Size;
  if ( v4 >= 0x10 )
    v3 = (int)result;
  *(_BYTE *)(v3 + Size) = 0;
  return result;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (00405BB0) --------------------------------------------------------
int __thiscall sub_405BB0(void *Dst, size_t Size, int a3)
{
  void *v3; // esi@1
  size_t v4; // eax@3
  int result; // eax@4
  size_t v6; // ebx@7
  const void *v7; // eax@10
  int v8; // [sp+14h] [bp+Ch]@10

  v3 = Dst;
  if ( Size > 0xFFFFFFFE )
    std::_Xlength_error("string too long");
  v4 = *((_DWORD *)v3 + 5);
  if ( v4 >= Size )
  {
    if ( (_BYTE)a3 && Size < 0x10 )
    {
      v6 = *((_DWORD *)v3 + 4);
      if ( Size < v6 )
        v6 = Size;
      if ( v4 >= 0x10 )
      {
        v7 = *(const void **)v3;
        v8 = *(_DWORD *)v3;
        if ( v6 )
        {
          memcpy(v3, v7, v6);
          v7 = (const void *)v8;
        }
        operator delete((void *)v7);
      }
      *((_DWORD *)v3 + 4) = v6;
      *((_DWORD *)v3 + 5) = 15;
      *((_BYTE *)v3 + v6) = 0;
      result = Size > 0;
    }
    else
    {
      if ( !Size )
      {
        *((_DWORD *)v3 + 4) = 0;
        if ( v4 >= 0x10 )
          v3 = *(void **)v3;
        *(_BYTE *)v3 = 0;
      }
      result = Size > 0;
    }
  }
  else
  {
    sub_405A60((int)Dst, Size, *((_DWORD *)v3 + 4));
    result = Size > 0;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00405C60) --------------------------------------------------------
void *__usercall sub_405C60@<eax>(void *Dst@<ecx>, void *Src@<edx>, size_t Size)
{
  void *result; // eax@2

  if ( Size )
    result = memcpy(Dst, Src, Size);
  else
    result = Dst;
  return result;
}

//----- (00405C80) --------------------------------------------------------
int __thiscall sub_405C80(int this, int a2)
{
  bool v2; // cf@1
  int result; // eax@2

  v2 = *(_DWORD *)(this + 20) < 0x10u;
  *(_DWORD *)(this + 16) = a2;
  if ( v2 )
  {
    *(_BYTE *)(this + a2) = 0;
  }
  else
  {
    result = *(_DWORD *)this;
    *(_BYTE *)(*(_DWORD *)this + a2) = 0;
  }
  return result;
}

//----- (00405CB0) --------------------------------------------------------
int __thiscall sub_405CB0(int this, void *Src, size_t Size)
{
  int v3; // esi@1
  unsigned int v4; // ecx@2
  unsigned int v5; // eax@3
  int v6; // edx@7
  int result; // eax@11
  size_t v8; // eax@15
  void *v9; // eax@18
  bool v10; // cf@26

  v3 = this;
  if ( Src )
  {
    v4 = *(_DWORD *)(this + 20);
    v5 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
    if ( (unsigned int)Src >= v5 )
    {
      v6 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
      if ( v6 + *(_DWORD *)(v3 + 16) > (unsigned int)Src )
      {
        if ( v4 < 0x10 )
          result = sub_405900((void *)v3, v3, (int)Src - v3, Size);
        else
          result = sub_405900((void *)v3, v3, (int)Src - *(_DWORD *)v3, Size);
        return result;
      }
    }
  }
  if ( Size > 0xFFFFFFFE )
    std::_Xlength_error("string too long");
  v8 = *(_DWORD *)(v3 + 20);
  if ( v8 < Size )
  {
    sub_405A60(v3, Size, *(_DWORD *)(v3 + 16));
    if ( !Size )
      return v3;
LABEL_17:
    if ( *(_DWORD *)(v3 + 20) < 0x10u )
      v9 = (void *)v3;
    else
      v9 = *(void **)v3;
    if ( Size )
      memcpy(v9, Src, Size);
    v10 = *(_DWORD *)(v3 + 20) < 0x10u;
    *(_DWORD *)(v3 + 16) = Size;
    if ( !v10 )
    {
      *(_BYTE *)(*(_DWORD *)v3 + Size) = 0;
      return v3;
    }
    *(_BYTE *)(v3 + Size) = 0;
    return v3;
  }
  if ( Size )
    goto LABEL_17;
  *(_DWORD *)(v3 + 16) = 0;
  if ( v8 < 0x10 )
  {
    result = v3;
    *(_BYTE *)v3 = 0;
  }
  else
  {
    **(_BYTE **)v3 = 0;
    result = v3;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (00405DB0) --------------------------------------------------------
int __thiscall sub_405DB0(int this, void *Src)
{
  int v2; // esi@1
  int result; // eax@2

  v2 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  if ( *(_BYTE *)Src )
  {
    sub_405CB0(this, Src, strlen((const char *)Src));
    result = v2;
  }
  else
  {
    sub_405CB0(this, Src, 0);
    result = v2;
  }
  return result;
}

//----- (00405E10) --------------------------------------------------------
void *__thiscall sub_405E10(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  *(_DWORD *)this = &off_4136D8;
  if ( a2 & 1 )
    operator delete(this);
  return v2;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4136D8: using guessed type int (__stdcall *off_4136D8)(char);

//----- (00405E40) --------------------------------------------------------
int __thiscall sub_405E40(void *this, int a2, int a3)
{
  int result; // eax@1

  result = a2;
  *(_DWORD *)a2 = a3;
  *(_DWORD *)(a2 + 4) = this;
  return result;
}

//----- (00405E60) --------------------------------------------------------
bool __thiscall sub_405E60(void *this, int a2, int a3)
{
  int v3; // eax@1
  char v5; // [sp+0h] [bp-8h]@1

  v3 = (*(int (__stdcall **)(char *, int))(*(_DWORD *)this + 12))(&v5, a2);
  return *(_DWORD *)(v3 + 4) == *(_DWORD *)(a3 + 4) && *(_DWORD *)v3 == *(_DWORD *)a3;
}

//----- (00405EA0) --------------------------------------------------------
bool __thiscall sub_405EA0(void *this, int a2, int a3)
{
  return this == *(void **)(a2 + 4) && *(_DWORD *)a2 == a3;
}

//----- (00405EC0) --------------------------------------------------------
const char *sub_405EC0()
{
  return "generic";
}

//----- (00405ED0) --------------------------------------------------------
int __stdcall sub_405ED0(int a1, int a2)
{
  const char *v2; // eax@1
  const char *v3; // edx@1
  int result; // eax@4

  v2 = std::_Syserror_map(a2);
  v3 = "unknown error";
  if ( v2 )
    v3 = v2;
  *(_DWORD *)(a1 + 20) = 15;
  *(_DWORD *)(a1 + 16) = 0;
  *(_BYTE *)a1 = 0;
  if ( *v3 )
  {
    sub_405CB0(a1, (void *)v3, strlen(v3));
    result = a1;
  }
  else
  {
    sub_405CB0(a1, (void *)v3, 0);
    result = a1;
  }
  return result;
}
// 4130CC: using guessed type const char *__cdecl std::_Syserror_map(_DWORD);

//----- (00405F50) --------------------------------------------------------
const char *sub_405F50()
{
  return "iostream";
}

//----- (00405F60) --------------------------------------------------------
int __stdcall sub_405F60(int a1, int a2)
{
  int result; // eax@2

  if ( a2 == 1 )
  {
    *(_DWORD *)(a1 + 20) = 15;
    *(_DWORD *)(a1 + 16) = 0;
    *(_BYTE *)a1 = 0;
    sub_405CB0(a1, "iostream stream error", 0x15u);
    result = a1;
  }
  else
  {
    sub_405ED0(a1, a2);
    result = a1;
  }
  return result;
}

//----- (00405FB0) --------------------------------------------------------
const char *sub_405FB0()
{
  return "system";
}

//----- (00405FC0) --------------------------------------------------------
int __stdcall sub_405FC0(int a1, int a2)
{
  const char *v2; // eax@1
  const char *v3; // edx@1
  int result; // eax@4

  v2 = std::_Winerror_map(a2);
  v3 = "unknown error";
  if ( v2 )
    v3 = v2;
  *(_DWORD *)(a1 + 20) = 15;
  *(_DWORD *)(a1 + 16) = 0;
  *(_BYTE *)a1 = 0;
  if ( *v3 )
  {
    sub_405CB0(a1, (void *)v3, strlen(v3));
    result = a1;
  }
  else
  {
    sub_405CB0(a1, (void *)v3, 0);
    result = a1;
  }
  return result;
}
// 4130C8: using guessed type const char *__cdecl std::_Winerror_map(_DWORD);

//----- (00406040) --------------------------------------------------------
int __stdcall sub_406040(int a1, int a2)
{
  bool v2; // zf@1
  int result; // eax@1

  v2 = std::_Syserror_map(a2) == 0;
  result = a1;
  *(_DWORD *)a1 = a2;
  if ( v2 )
    *(_DWORD *)(a1 + 4) = off_418488;
  else
    *(_DWORD *)(a1 + 4) = off_41848C;
  return result;
}
// 4130CC: using guessed type const char *__cdecl std::_Syserror_map(_DWORD);
// 418488: using guessed type int (__stdcall **off_418488[3])(char);
// 41848C: using guessed type int (__stdcall **off_41848C[2])(char);

//----- (00406080) --------------------------------------------------------
int __thiscall sub_406080(int this, int a2)
{
  int v2; // edi@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  int v7; // eax@1
  int v8; // eax@1
  int v9; // ST04_4@1
  int v10; // ST08_4@1
  int v11; // ecx@1
  int v12; // ecx@1
  int v13; // eax@1
  int v14; // ecx@1
  int v15; // eax@7
  int v16; // ecx@7
  int v17; // eax@13
  int v18; // ecx@13
  int v19; // eax@19
  int v20; // ecx@19
  int v21; // eax@25
  int v22; // ecx@25
  int v23; // eax@31
  int v24; // ecx@31
  int v25; // eax@37
  int v26; // eax@39
  int v27; // eax@43
  int v28; // eax@47
  int v29; // eax@51
  int v30; // eax@55
  int v31; // eax@59
  int v32; // eax@63
  int v33; // eax@67
  int v34; // eax@71
  int v35; // eax@75
  int v36; // eax@79
  int v37; // eax@83
  int v38; // eax@87
  int v39; // eax@91
  int v40; // eax@95
  int v41; // eax@99
  int v42; // eax@103
  int v43; // eax@107
  int v44; // eax@107
  int v45; // eax@107
  void *v46; // eax@107
  void *v47; // eax@107
  void *v48; // eax@107
  void *v49; // eax@107
  void *v50; // eax@107
  int v51; // eax@107
  int v52; // eax@107
  int v53; // eax@107
  int v54; // eax@107
  int v55; // eax@107
  int v56; // eax@107
  int v57; // eax@107
  int v58; // eax@107
  int v59; // eax@107
  void *v60; // eax@107
  void *v61; // eax@107
  void *v62; // eax@107
  void *v63; // eax@107
  void *v64; // eax@107
  int v65; // ecx@107
  int v67; // [sp+18h] [bp-25Ch]@1
  const char *v68; // [sp+1Ch] [bp-258h]@1
  int v69; // [sp+20h] [bp-254h]@107
  int v70; // [sp+38h] [bp-23Ch]@107
  int v71; // [sp+50h] [bp-224h]@107
  int v72; // [sp+68h] [bp-20Ch]@107
  int v73; // [sp+80h] [bp-1F4h]@107
  int v74; // [sp+98h] [bp-1DCh]@107
  int v75; // [sp+B0h] [bp-1C4h]@107
  int v76; // [sp+C8h] [bp-1ACh]@107
  int v77; // [sp+E0h] [bp-194h]@107
  int v78; // [sp+F8h] [bp-17Ch]@107
  int v79; // [sp+110h] [bp-164h]@107
  int v80; // [sp+128h] [bp-14Ch]@107
  int v81; // [sp+140h] [bp-134h]@107
  int v82; // [sp+158h] [bp-11Ch]@107
  int v83; // [sp+170h] [bp-104h]@107
  int Src; // [sp+188h] [bp-ECh]@107
  int v85; // [sp+1A0h] [bp-D4h]@107
  int v86; // [sp+1B8h] [bp-BCh]@107
  int v87; // [sp+1D0h] [bp-A4h]@107
  int v88; // [sp+1E8h] [bp-8Ch]@107
  int v89; // [sp+200h] [bp-74h]@1
  unsigned int v90; // [sp+214h] [bp-60h]@5
  int v91; // [sp+218h] [bp-5Ch]@4
  int v92; // [sp+228h] [bp-4Ch]@5
  unsigned int v93; // [sp+22Ch] [bp-48h]@3
  int v94; // [sp+230h] [bp-44h]@39
  unsigned int v95; // [sp+244h] [bp-30h]@41
  int v96; // [sp+248h] [bp-2Ch]@1
  int v97; // [sp+258h] [bp-1Ch]@1
  unsigned int v98; // [sp+25Ch] [bp-18h]@1
  int v99; // [sp+270h] [bp-4h]@1

  v2 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  sub_405900((void *)this, a2, 0, 0xFFFFFFFF);
  v99 = 0;
  *(_DWORD *)(v2 + 24) = 0;
  *(_DWORD *)(v2 + 28) = 0;
  sub_40DD40();
  *(_DWORD *)(v2 + 24) = v3;
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  sub_40DD40();
  *(_DWORD *)(v2 + 32) = v4;
  *(_DWORD *)(v2 + 40) = 0;
  *(_DWORD *)(v2 + 44) = 0;
  sub_40DD40();
  *(_DWORD *)(v2 + 40) = v5;
  *(_DWORD *)(v2 + 48) = 0;
  *(_DWORD *)(v2 + 52) = 0;
  sub_40DD70();
  *(_DWORD *)(v2 + 48) = v6;
  *(_DWORD *)(v2 + 56) = 0;
  *(_DWORD *)(v2 + 60) = 0;
  sub_40DD40();
  *(_DWORD *)(v2 + 56) = v7;
  *(_DWORD *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 68) = 0;
  sub_40DD70();
  *(_DWORD *)(v2 + 64) = v8;
  *(_DWORD *)(v2 + 92) = 15;
  *(_DWORD *)(v2 + 88) = 0;
  *(_BYTE *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 96) = 0;
  *(_DWORD *)(v2 + 124) = 15;
  *(_DWORD *)(v2 + 120) = 0;
  *(_BYTE *)(v2 + 104) = 0;
  *(_DWORD *)(v2 + 256) = 0;
  *(_DWORD *)(v2 + 260) = 0;
  sub_40AD10((char *)(v2 + 264), v9, v10);
  *(_DWORD *)(v2 + 436) = 15;
  *(_DWORD *)(v2 + 432) = 0;
  *(_BYTE *)(v2 + 416) = 0;
  *(_DWORD *)(v2 + 460) = 15;
  *(_DWORD *)(v2 + 456) = 0;
  *(_BYTE *)(v2 + 440) = 0;
  *(_DWORD *)(v2 + 484) = 15;
  *(_DWORD *)(v2 + 480) = 0;
  *(_BYTE *)(v2 + 464) = 0;
  *(_DWORD *)(v2 + 508) = 15;
  *(_DWORD *)(v2 + 504) = 0;
  *(_BYTE *)(v2 + 488) = 0;
  *(_DWORD *)(v2 + 532) = 15;
  *(_DWORD *)(v2 + 528) = 0;
  *(_BYTE *)(v2 + 512) = 0;
  sub_40B3E0((char *)(v2 + 544), v11);
  LOBYTE(v99) = 17;
  v67 = (int)"SOFTWARE\\Electronic Arts\\EA Games\\Command and Conquer The First Decade";
  v68 = "gr_folder";
  sub_40DDA0((int)&v89, (int)&v67, v12);
  LOBYTE(v99) = 18;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  sub_405CB0((int)&v96, "generals", 8u);
  LOBYTE(v99) = 19;
  v13 = sub_40A2B0((_DWORD *)(v2 + 24), &v96);
  sub_40BDB0(v13, &v89);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v93 >= 0x10 )
    operator delete((void *)v91);
  v93 = 15;
  v92 = 0;
  LOBYTE(v91) = 0;
  if ( v90 >= 0x10 )
    operator delete((void *)v89);
  v67 = (int)"SOFTWARE\\Electronic Arts\\EA Games\\Generals";
  v68 = "InstallPath";
  sub_40DDA0((int)&v89, (int)&v67, v14);
  LOBYTE(v99) = 20;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  sub_405CB0((int)&v96, "generals", 8u);
  LOBYTE(v99) = 21;
  v15 = sub_40A2B0((_DWORD *)(v2 + 24), &v96);
  sub_40BDB0(v15, &v89);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v93 >= 0x10 )
    operator delete((void *)v91);
  v93 = 15;
  v92 = 0;
  LOBYTE(v91) = 0;
  if ( v90 >= 0x10 )
    operator delete((void *)v89);
  v67 = (int)"SOFTWARE\\Electronic Arts\\EA Games\\Command and Conquer The First Decade";
  v68 = "zh_folder";
  sub_40DDA0((int)&v89, (int)&v67, v16);
  LOBYTE(v99) = 22;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  sub_405CB0((int)&v96, "generalszh", 0xAu);
  LOBYTE(v99) = 23;
  v17 = sub_40A2B0((_DWORD *)(v2 + 24), &v96);
  sub_40BDB0(v17, &v89);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v93 >= 0x10 )
    operator delete((void *)v91);
  v93 = 15;
  v92 = 0;
  LOBYTE(v91) = 0;
  if ( v90 >= 0x10 )
    operator delete((void *)v89);
  v67 = (int)"SOFTWARE\\Electronic Arts\\EA Games\\Command and Conquer Generals Zero Hour";
  v68 = "InstallPath";
  sub_40DDA0((int)&v89, (int)&v67, v18);
  LOBYTE(v99) = 24;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  sub_405CB0((int)&v96, "generalszh", 0xAu);
  LOBYTE(v99) = 25;
  v19 = sub_40A2B0((_DWORD *)(v2 + 24), &v96);
  sub_40BDB0(v19, &v89);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v93 >= 0x10 )
    operator delete((void *)v91);
  v93 = 15;
  v92 = 0;
  LOBYTE(v91) = 0;
  if ( v90 >= 0x10 )
    operator delete((void *)v89);
  v67 = (int)"SOFTWARE\\Electronic Arts\\Electronic Arts\\Command and Conquer 3";
  v68 = "InstallPath";
  sub_40DDA0((int)&v89, (int)&v67, v20);
  LOBYTE(v99) = 26;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  sub_405CB0((int)&v96, "cnc3", 4u);
  LOBYTE(v99) = 27;
  v21 = sub_40A2B0((_DWORD *)(v2 + 24), &v96);
  sub_40BDB0(v21, &v89);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v93 >= 0x10 )
    operator delete((void *)v91);
  v93 = 15;
  v92 = 0;
  LOBYTE(v91) = 0;
  if ( v90 >= 0x10 )
    operator delete((void *)v89);
  v67 = (int)"SOFTWARE\\Electronic Arts\\Electronic Arts\\Command and Conquer 3 Kanes Wrath";
  v68 = "InstallPath";
  sub_40DDA0((int)&v89, (int)&v67, v22);
  LOBYTE(v99) = 28;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  sub_405CB0((int)&v96, "cnc3kw", 6u);
  LOBYTE(v99) = 29;
  v23 = sub_40A2B0((_DWORD *)(v2 + 24), &v96);
  sub_40BDB0(v23, &v89);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v93 >= 0x10 )
    operator delete((void *)v91);
  v93 = 15;
  v92 = 0;
  LOBYTE(v91) = 0;
  if ( v90 >= 0x10 )
    operator delete((void *)v89);
  v67 = (int)"SOFTWARE\\Electronic Arts\\Electronic Arts\\Red Alert 3";
  v68 = "Install Dir";
  sub_40DDA0((int)&v89, (int)&v67, v24);
  LOBYTE(v99) = 30;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 31;
  v25 = sub_40A2B0((_DWORD *)(v2 + 24), &v96);
  sub_40BDB0(v25, &v89);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  LOBYTE(v99) = 17;
  sub_402C30((int)&v89);
  sub_405DB0((int)&v94, "generals_origin.exe");
  LOBYTE(v99) = 32;
  sub_405DB0((int)&v96, "generals");
  LOBYTE(v99) = 33;
  v26 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v26, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "game.dat");
  LOBYTE(v99) = 34;
  sub_405DB0((int)&v96, "generals");
  LOBYTE(v99) = 35;
  v27 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v27, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "generals_origin.exe");
  LOBYTE(v99) = 36;
  sub_405DB0((int)&v96, "generalszh");
  LOBYTE(v99) = 37;
  v28 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v28, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "game.dat");
  LOBYTE(v99) = 38;
  sub_405DB0((int)&v96, "generalszh");
  LOBYTE(v99) = 39;
  v29 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v29, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "cnc3game.dat");
  LOBYTE(v99) = 40;
  sub_405DB0((int)&v96, "cnc3");
  LOBYTE(v99) = 41;
  v30 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v30, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "cnc3ep1.dat");
  LOBYTE(v99) = 42;
  sub_405DB0((int)&v96, "cnc3kw");
  LOBYTE(v99) = 43;
  v31 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v31, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.0.game");
  LOBYTE(v99) = 44;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 45;
  v32 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v32, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.1.game");
  LOBYTE(v99) = 46;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 47;
  v33 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v33, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.2.game");
  LOBYTE(v99) = 48;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 49;
  v34 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v34, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.3.game");
  LOBYTE(v99) = 50;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 51;
  v35 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v35, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.4.game");
  LOBYTE(v99) = 52;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 53;
  v36 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v36, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.5.game");
  LOBYTE(v99) = 54;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 55;
  v37 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v37, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.6.game");
  LOBYTE(v99) = 56;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 57;
  v38 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v38, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.7.game");
  LOBYTE(v99) = 58;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 59;
  v39 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v39, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.8.game");
  LOBYTE(v99) = 60;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 61;
  v40 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v40, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.9.game");
  LOBYTE(v99) = 62;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 63;
  v41 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v41, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v94, "ra3_1.10.game");
  LOBYTE(v99) = 64;
  sub_405DB0((int)&v96, "ra3");
  LOBYTE(v99) = 65;
  v42 = sub_40A5C0((_DWORD *)(v2 + 32), &v96);
  sub_40BE30(v42, &v94);
  if ( v98 >= 0x10 )
    operator delete((void *)v96);
  LOBYTE(v99) = 17;
  v98 = 15;
  v97 = 0;
  LOBYTE(v96) = 0;
  if ( v95 >= 0x10 )
    operator delete((void *)v94);
  sub_405DB0((int)&v96, "ra3_1.11.game");
  LOBYTE(v99) = 66;
  sub_405DB0((int)&v94, "ra3");
  LOBYTE(v99) = 67;
  v43 = sub_40A5C0((_DWORD *)(v2 + 32), &v94);
  sub_40BE30(v43, &v96);
  sub_402C80((int)&v94);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v96);
  sub_405DB0((int)&v88, "ra3_1.12.game");
  LOBYTE(v99) = 68;
  sub_405DB0((int)&v94, "ra3");
  LOBYTE(v99) = 69;
  v44 = sub_40A5C0((_DWORD *)(v2 + 32), &v94);
  sub_40BE30(v44, &v88);
  sub_402C80((int)&v94);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v88);
  sub_405DB0((int)&v76, "generals.exe");
  LOBYTE(v99) = 70;
  sub_405DB0((int)&v88, "generalszh");
  LOBYTE(v99) = 71;
  v45 = sub_40A5C0((_DWORD *)(v2 + 40), &v88);
  sub_40BE30(v45, &v76);
  sub_402C80((int)&v88);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v76);
  sub_405DB0((int)&Src, "generals");
  LOBYTE(v99) = 72;
  v46 = (void *)sub_40A8D0((_DWORD *)(v2 + 48), &Src);
  sub_40A270(v46, "generals.exe");
  LOBYTE(v99) = 17;
  sub_402C80((int)&Src);
  sub_405DB0((int)&v72, "generalszh");
  LOBYTE(v99) = 73;
  v47 = (void *)sub_40A8D0((_DWORD *)(v2 + 48), &v72);
  sub_40A270(v47, "generals.exe");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v72);
  sub_405DB0((int)&v82, "cnc3");
  LOBYTE(v99) = 74;
  v48 = (void *)sub_40A8D0((_DWORD *)(v2 + 48), &v82);
  sub_40A270(v48, "CNC3.exe");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v82);
  sub_405DB0((int)&v74, "cnc3kw");
  LOBYTE(v99) = 75;
  v49 = (void *)sub_40A8D0((_DWORD *)(v2 + 48), &v74);
  sub_40A270(v49, "CNC3EP1.exe");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v74);
  sub_405DB0((int)&v80, "ra3");
  LOBYTE(v99) = 76;
  v50 = (void *)sub_40A8D0((_DWORD *)(v2 + 48), &v80);
  sub_40A270(v50, "RA3.exe");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v80);
  v68 = 0;
  sub_405DB0((int)&v78, "generals");
  LOBYTE(v99) = 77;
  v51 = sub_40AA30((_DWORD *)(v2 + 56), &v78);
  sub_40BEB0(v51, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v78);
  v68 = 0;
  sub_405DB0((int)&v87, "generalszh");
  LOBYTE(v99) = 78;
  v52 = sub_40AA30((_DWORD *)(v2 + 56), &v87);
  sub_40BEB0(v52, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v87);
  v68 = (const char *)11555328;
  sub_405DB0((int)&v77, "cnc3");
  LOBYTE(v99) = 79;
  v53 = sub_40AA30((_DWORD *)(v2 + 56), &v77);
  sub_40BEB0(v53, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v77);
  v68 = (const char *)11488240;
  sub_405DB0((int)&v86, "cnc3");
  LOBYTE(v99) = 80;
  v54 = sub_40AA30((_DWORD *)(v2 + 56), &v86);
  sub_40BEB0(v54, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v86);
  v68 = (const char *)11379616;
  sub_405DB0((int)&v85, "cnc3kw");
  LOBYTE(v99) = 81;
  v55 = sub_40AA30((_DWORD *)(v2 + 56), &v85);
  sub_40BEB0(v55, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v85);
  v68 = (const char *)11249920;
  sub_405DB0((int)&v83, "cnc3kw");
  LOBYTE(v99) = 82;
  v56 = sub_40AA30((_DWORD *)(v2 + 56), &v83);
  sub_40BEB0(v56, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v83);
  v68 = (const char *)11376544;
  sub_405DB0((int)&v81, "cnc3kw");
  LOBYTE(v99) = 83;
  v57 = sub_40AA30((_DWORD *)(v2 + 56), &v81);
  sub_40BEB0(v57, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v81);
  v68 = (const char *)13211672;
  sub_405DB0((int)&v79, "ra3");
  LOBYTE(v99) = 84;
  v58 = sub_40AA30((_DWORD *)(v2 + 56), &v79);
  sub_40BEB0(v58, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v79);
  v68 = (const char *)13187944;
  sub_405DB0((int)&v75, "ra3");
  LOBYTE(v99) = 85;
  v59 = sub_40AA30((_DWORD *)(v2 + 56), &v75);
  sub_40BEB0(v59, (unsigned int *)&v68);
  LOBYTE(v99) = 17;
  sub_402C80((int)&v75);
  sub_405DB0((int)&v73, "generals");
  LOBYTE(v99) = 86;
  v60 = (void *)sub_40A8D0((_DWORD *)(v2 + 64), &v73);
  sub_40A270(v60, "Generals");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v73);
  sub_405DB0((int)&v71, "generalszh");
  LOBYTE(v99) = 87;
  v61 = (void *)sub_40A8D0((_DWORD *)(v2 + 64), &v71);
  sub_40A270(v61, "Zero Hour");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v71);
  sub_405DB0((int)&v69, "cnc3");
  LOBYTE(v99) = 88;
  v62 = (void *)sub_40A8D0((_DWORD *)(v2 + 64), &v69);
  sub_40A270(v62, "C&C3");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v69);
  sub_405DB0((int)&v70, "cnc3kw");
  LOBYTE(v99) = 89;
  v63 = (void *)sub_40A8D0((_DWORD *)(v2 + 64), &v70);
  sub_40A270(v63, "Kane's Wrath");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v70);
  sub_405DB0((int)&v91, "ra3");
  LOBYTE(v99) = 90;
  v64 = (void *)sub_40A8D0((_DWORD *)(v2 + 64), &v91);
  sub_40A270(v64, "Red Alert 3");
  LOBYTE(v99) = 17;
  sub_402C80((int)&v91);
  sub_40A270((void *)(v2 + 464), "cnconline.dll");
  sub_40A270((void *)(v2 + 416), "SOFTWARE\\Revora\\CNCOnline\\");
  sub_409D70((char *)v2, v65);
  return v2;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00407540) --------------------------------------------------------
void __thiscall sub_407540(void **this)
{
  void **v1; // esi@1
  char v2; // [sp+4h] [bp-4h]@1

  v1 = this;
  sub_40CAA0(this, (int *)&v2, *(_DWORD *)*this, (int)*this);
  operator delete(*v1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00407570) --------------------------------------------------------
void __thiscall sub_407570(int **this)
{
  void **v1; // esi@1
  char v2; // [sp+4h] [bp-4h]@1

  v1 = (void **)this;
  sub_40CB60(this, (int *)&v2, **this, *this);
  operator delete(*v1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004075A0) --------------------------------------------------------
void __thiscall sub_4075A0(void **this)
{
  void **v1; // esi@1
  char v2; // [sp+4h] [bp-4h]@1

  v1 = this;
  sub_40CC20(this, (int *)&v2, *(_DWORD *)*this, (int)*this);
  operator delete(*v1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004075D0) --------------------------------------------------------
void __thiscall sub_4075D0(void **this)
{
  void **v1; // esi@1
  char v2; // [sp+4h] [bp-4h]@1

  v1 = this;
  sub_40CCE0(this, (int *)&v2, *(_DWORD *)*this, (int)*this);
  operator delete(*v1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00407680) --------------------------------------------------------
void __thiscall sub_407680(char *this)
{
  char *v1; // edi@1
  int v2; // esi@1
  int v3; // esi@11
  char v4; // [sp+14h] [bp-14h]@19
  char *v5; // [sp+18h] [bp-10h]@1
  int v6; // [sp+24h] [bp-4h]@1

  v1 = this;
  v5 = this;
  v2 = (int)(this + 544);
  v6 = 17;
  sub_40B4B0((int)(this + 544));
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v2 + 4) + v2) = &off_413E84;
  *(_DWORD *)(v2 + *(_DWORD *)(*(_DWORD *)v2 + 4) - 4) = *(_DWORD *)(*(_DWORD *)v2 + 4) - 96;
  sub_40B530(v2 + 4);
  std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(v2 + 8);
  std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v2 + 96);
  if ( *((_DWORD *)v1 + 133) >= 0x10u )
    operator delete(*((void **)v1 + 128));
  *((_DWORD *)v1 + 133) = 15;
  *((_DWORD *)v1 + 132) = 0;
  v1[512] = 0;
  if ( *((_DWORD *)v1 + 127) >= 0x10u )
    operator delete(*((void **)v1 + 122));
  *((_DWORD *)v1 + 127) = 15;
  *((_DWORD *)v1 + 126) = 0;
  v1[488] = 0;
  if ( *((_DWORD *)v1 + 121) >= 0x10u )
    operator delete(*((void **)v1 + 116));
  *((_DWORD *)v1 + 121) = 15;
  *((_DWORD *)v1 + 120) = 0;
  v1[464] = 0;
  if ( *((_DWORD *)v1 + 115) >= 0x10u )
    operator delete(*((void **)v1 + 110));
  *((_DWORD *)v1 + 115) = 15;
  *((_DWORD *)v1 + 114) = 0;
  v1[440] = 0;
  if ( *((_DWORD *)v1 + 109) >= 0x10u )
    operator delete(*((void **)v1 + 104));
  *((_DWORD *)v1 + 109) = 15;
  *((_DWORD *)v1 + 108) = 0;
  v1[416] = 0;
  v3 = (int)(v1 + 344);
  *(_DWORD *)(*(_DWORD *)(*((_DWORD *)v1 + 66) + 4) + v3 - 80) = &off_413EDC;
  *(_DWORD *)(v3 + *(_DWORD *)(*((_DWORD *)v1 + 66) + 4) - 84) = *(_DWORD *)(*((_DWORD *)v1 + 66) + 4) - 80;
  sub_40ADE0((int)(v1 + 268));
  std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(v1 + 272);
  std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v1 + 344);
  if ( *((_DWORD *)v1 + 64) )
    CloseHandle(*((HANDLE *)v1 + 64));
  if ( *((_DWORD *)v1 + 31) >= 0x10u )
    operator delete(*((void **)v1 + 26));
  *((_DWORD *)v1 + 31) = 15;
  *((_DWORD *)v1 + 30) = 0;
  v1[104] = 0;
  if ( *((_DWORD *)v1 + 24) )
    CloseHandle(*((HANDLE *)v1 + 24));
  if ( *((_DWORD *)v1 + 23) >= 0x10u )
    operator delete(*((void **)v1 + 18));
  *((_DWORD *)v1 + 23) = 15;
  *((_DWORD *)v1 + 22) = 0;
  v1[72] = 0;
  LOBYTE(v6) = 5;
  sub_40CC20(v1 + 64, (int *)&v4, **((_DWORD **)v1 + 16), *((_DWORD *)v1 + 16));
  operator delete(*((void **)v1 + 16));
  LOBYTE(v6) = 4;
  sub_40CCE0(v1 + 56, (int *)&v4, **((_DWORD **)v1 + 14), *((_DWORD *)v1 + 14));
  operator delete(*((void **)v1 + 14));
  LOBYTE(v6) = 3;
  sub_40CC20(v1 + 48, (int *)&v4, **((_DWORD **)v1 + 12), *((_DWORD *)v1 + 12));
  operator delete(*((void **)v1 + 12));
  LOBYTE(v6) = 2;
  sub_40CB60((int **)v1 + 10, (int *)&v4, **((_DWORD **)v1 + 10), *((int **)v1 + 10));
  operator delete(*((void **)v1 + 10));
  LOBYTE(v6) = 1;
  sub_40CB60((int **)v1 + 8, (int *)&v4, **((_DWORD **)v1 + 8), *((int **)v1 + 8));
  operator delete(*((void **)v1 + 8));
  LOBYTE(v6) = 0;
  sub_40CAA0(v1 + 24, (int *)&v4, **((_DWORD **)v1 + 6), *((_DWORD *)v1 + 6));
  operator delete(*((void **)v1 + 6));
  if ( *((_DWORD *)v1 + 5) >= 0x10u )
    operator delete(*(void **)v1);
  *((_DWORD *)v1 + 5) = 15;
  *((_DWORD *)v1 + 4) = 0;
  *v1 = 0;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413E84: using guessed type int (*off_413E84)();
// 413EDC: using guessed type int (*off_413EDC)();

//----- (00407970) --------------------------------------------------------
int __thiscall sub_407970(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // edi@1
  int *v8; // ecx@1
  const char *v9; // ecx@3
  int v10; // eax@4
  const CHAR *v11; // eax@5
  const char *v12; // ecx@12
  int v13; // eax@13
  const CHAR *v14; // eax@14
  int v15; // eax@21
  const char *v16; // ecx@21
  int v17; // eax@22
  const CHAR *v18; // eax@23
  int v19; // ecx@30
  int v20; // eax@30
  void **v21; // esi@30
  int v22; // eax@38
  int v23; // eax@38
  const char *v24; // ecx@38
  void **v25; // esi@38
  bool v26; // zf@44
  int v27; // eax@45
  signed int v28; // esi@45
  int v29; // eax@46
  _DWORD *v30; // eax@46
  int v31; // eax@48
  const char *v32; // eax@48
  void **v33; // esi@48
  const char *v34; // eax@54
  void **v35; // esi@54
  int v36; // eax@60
  int v37; // ecx@60
  const char *v38; // ecx@62
  int v39; // eax@63
  _DWORD *v40; // eax@63
  _DWORD *v41; // eax@63
  int v42; // ecx@69
  int v43; // eax@71
  char v44; // al@71
  const char *v45; // ecx@71
  signed int v46; // ecx@76
  struct _STARTUPINFOA *v47; // eax@76
  signed int v48; // ecx@78
  struct _PROCESS_INFORMATION *v49; // eax@78
  CHAR *v50; // ecx@80
  const CHAR *v51; // eax@82
  void *v52; // esi@85
  _DWORD *v53; // eax@85
  _DWORD *v54; // eax@85
  int v55; // eax@91
  _DWORD *v56; // eax@92
  int v57; // eax@98
  _DWORD *v58; // eax@98
  int v59; // ecx@101
  const CHAR *v61; // [sp-18h] [bp-338h]@45
  int v62; // [sp-14h] [bp-334h]@45
  int v63; // [sp-10h] [bp-330h]@45
  int v64; // [sp-Ch] [bp-32Ch]@45
  const char *v65; // [sp-8h] [bp-328h]@4
  const char *v66; // [sp-4h] [bp-324h]@33
  struct _STARTUPINFOA StartupInfo; // [sp+10h] [bp-310h]@76
  struct _PROCESS_INFORMATION ProcessInformation; // [sp+58h] [bp-2C8h]@78
  int v69; // [sp+68h] [bp-2B8h]@21
  int v70; // [sp+78h] [bp-2A8h]@30
  unsigned int v71; // [sp+7Ch] [bp-2A4h]@28
  int v72; // [sp+80h] [bp-2A0h]@3
  int v73; // [sp+90h] [bp-290h]@3
  unsigned int v74; // [sp+94h] [bp-28Ch]@3
  int v75; // [sp+98h] [bp-288h]@12
  int v76; // [sp+A8h] [bp-278h]@12
  unsigned int v77; // [sp+ACh] [bp-274h]@12
  char v78; // [sp+B3h] [bp-26Dh]@71
  const char *v79; // [sp+B4h] [bp-26Ch]@30
  struct _DEBUG_EVENT DebugEvent; // [sp+B8h] [bp-268h]@94
  char v81; // [sp+118h] [bp-208h]@98
  CHAR SubKey; // [sp+130h] [bp-1F0h]@69
  CHAR v83; // [sp+148h] [bp-1D8h]@71
  void *Dst; // [sp+160h] [bp-1C0h]@85
  unsigned int v85; // [sp+174h] [bp-1ACh]@89
  void *v86; // [sp+178h] [bp-1A8h]@92
  unsigned int v87; // [sp+18Ch] [bp-194h]@92
  void *v88; // [sp+190h] [bp-190h]@54
  int v89; // [sp+1A0h] [bp-180h]@60
  unsigned int v90; // [sp+1A4h] [bp-17Ch]@58
  void *v91; // [sp+1A8h] [bp-178h]@85
  int v92; // [sp+1B8h] [bp-168h]@89
  unsigned int v93; // [sp+1BCh] [bp-164h]@87
  void *v94; // [sp+1C0h] [bp-160h]@85
  int v95; // [sp+1D0h] [bp-150h]@87
  unsigned int v96; // [sp+1D4h] [bp-14Ch]@85
  void *v97; // [sp+1D8h] [bp-148h]@48
  int v98; // [sp+1E8h] [bp-138h]@54
  unsigned int v99; // [sp+1ECh] [bp-134h]@52
  void *v100; // [sp+1F0h] [bp-130h]@46
  int v101; // [sp+200h] [bp-120h]@48
  unsigned int v102; // [sp+204h] [bp-11Ch]@46
  void *v103; // [sp+208h] [bp-118h]@63
  int v104; // [sp+218h] [bp-108h]@67
  unsigned int v105; // [sp+21Ch] [bp-104h]@65
  int v106; // [sp+220h] [bp-100h]@30
  int v107; // [sp+230h] [bp-F0h]@36
  unsigned int v108; // [sp+234h] [bp-ECh]@34
  int v109; // [sp+238h] [bp-E8h]@71
  int v110; // [sp+248h] [bp-D8h]@73
  unsigned int v111; // [sp+24Ch] [bp-D4h]@71
  void *v112; // [sp+250h] [bp-D0h]@63
  int v113; // [sp+260h] [bp-C0h]@65
  unsigned int v114; // [sp+264h] [bp-BCh]@63
  int v115; // [sp+268h] [bp-B8h]@38
  int v116; // [sp+278h] [bp-A8h]@44
  unsigned int v117; // [sp+27Ch] [bp-A4h]@42
  int Src; // [sp+280h] [bp-A0h]@69
  int v119; // [sp+290h] [bp-90h]@71
  unsigned int v120; // [sp+294h] [bp-8Ch]@69
  LPCSTR v121; // [sp+298h] [bp-88h]@23
  int v122; // [sp+2A8h] [bp-78h]@27
  unsigned int v123; // [sp+2ACh] [bp-74h]@23
  LPCSTR v124; // [sp+2B0h] [bp-70h]@14
  int v125; // [sp+2C0h] [bp-60h]@18
  unsigned int v126; // [sp+2C4h] [bp-5Ch]@14
  LPCSTR lpOutputString; // [sp+2C8h] [bp-58h]@5
  int v128; // [sp+2D8h] [bp-48h]@9
  unsigned int v129; // [sp+2DCh] [bp-44h]@5
  void *ValueName[4]; // [sp+2E0h] [bp-40h]@30
  int v131; // [sp+2F0h] [bp-30h]@30
  unsigned int v132; // [sp+2F4h] [bp-2Ch]@30
  LPSTR lpCommandLine; // [sp+2F8h] [bp-28h]@60
  int v134; // [sp+308h] [bp-18h]@60
  unsigned int v135; // [sp+30Ch] [bp-14h]@60
  int v136; // [sp+31Ch] [bp-4h]@1

  v7 = this;
  v8 = (int *)(this + 72);
  v136 = 0;
  if ( v8 != &a2 )
    sub_405900(v8, (int)&a2, 0, 0xFFFFFFFF);
  v74 = 15;
  v73 = 0;
  LOBYTE(v72) = 0;
  sub_405CB0((int)&v72, "\n", 1u);
  LOBYTE(v136) = 1;
  if ( *(_DWORD *)(v7 + 628) )
  {
    v65 = v9;
    v10 = sub_40E270(v7 + 544, (int)&v72);
    std::basic_ostream<char,std::char_traits<char>>::operator<<(v10, std::endl);
  }
  else
  {
    sub_403A30(&lpOutputString, "T3AO: ", (int)&v72);
    v11 = (const CHAR *)&lpOutputString;
    if ( v129 >= 0x10 )
      v11 = lpOutputString;
    OutputDebugStringA(v11);
    if ( v129 >= 0x10 )
      operator delete((void *)lpOutputString);
    v129 = 15;
    v128 = 0;
    LOBYTE(lpOutputString) = 0;
  }
  LOBYTE(v136) = 0;
  if ( v74 >= 0x10 )
    operator delete((void *)v72);
  v74 = 15;
  v73 = 0;
  LOBYTE(v72) = 0;
  v77 = 15;
  v76 = 0;
  LOBYTE(v75) = 0;
  sub_405CB0((int)&v75, "----- C&C:Online Launcher Start -----", 0x25u);
  LOBYTE(v136) = 3;
  if ( *(_DWORD *)(v7 + 628) )
  {
    v65 = v12;
    v13 = sub_40E270(v7 + 544, (int)&v75);
    std::basic_ostream<char,std::char_traits<char>>::operator<<(v13, std::endl);
  }
  else
  {
    sub_403A30(&v124, "T3AO: ", (int)&v75);
    v14 = (const CHAR *)&v124;
    if ( v126 >= 0x10 )
      v14 = v124;
    OutputDebugStringA(v14);
    if ( v126 >= 0x10 )
      operator delete((void *)v124);
    v126 = 15;
    v125 = 0;
    LOBYTE(v124) = 0;
  }
  LOBYTE(v136) = 0;
  if ( v77 >= 0x10 )
    operator delete((void *)v75);
  v77 = 15;
  v76 = 0;
  LOBYTE(v75) = 0;
  v15 = sub_402730((_DWORD *)(v7 + 64), (int)&a2);
  sub_403A30(&v69, "Game: ", v15);
  LOBYTE(v136) = 5;
  if ( *(_DWORD *)(v7 + 628) )
  {
    v65 = v16;
    v17 = sub_40E270(v7 + 544, (int)&v69);
    std::basic_ostream<char,std::char_traits<char>>::operator<<(v17, std::endl);
  }
  else
  {
    sub_403A30(&v121, "T3AO: ", (int)&v69);
    v18 = (const CHAR *)&v121;
    if ( v123 >= 0x10 )
      v18 = v121;
    OutputDebugStringA(v18);
    if ( v123 >= 0x10 )
      operator delete((void *)v121);
    v123 = 15;
    v122 = 0;
    LOBYTE(v121) = 0;
  }
  LOBYTE(v136) = 0;
  if ( v71 >= 0x10 )
    operator delete((void *)v69);
  v71 = 15;
  v70 = 0;
  LOBYTE(v69) = 0;
  v132 = 15;
  v131 = 0;
  LOBYTE(ValueName[0]) = 0;
  sub_405CB0((int)ValueName, "InstallPath", 0xBu);
  LOBYTE(v136) = 7;
  v20 = sub_409880((int)&v106, v19, (LPCSTR)(v7 + 416), (LPCSTR)ValueName);
  v21 = (void **)(v7 + 440);
  v79 = (const char *)v20;
  if ( v7 + 440 != v20 )
  {
    if ( *(_DWORD *)(v7 + 460) >= 0x10u )
    {
      operator delete(*v21);
      v20 = (int)v79;
    }
    *(_DWORD *)(v7 + 460) = 15;
    *(_DWORD *)(v7 + 456) = 0;
    v66 = (const char *)v20;
    *(_BYTE *)v21 = 0;
    sub_4057A0((void *)(v7 + 440), (void *)v66);
  }
  if ( v108 >= 0x10 )
    operator delete((void *)v106);
  LOBYTE(v136) = 0;
  v108 = 15;
  v107 = 0;
  LOBYTE(v106) = 0;
  if ( v132 >= 0x10 )
    operator delete(ValueName[0]);
  v132 = 15;
  v131 = 0;
  LOBYTE(ValueName[0]) = 0;
  v22 = sub_40A430((_DWORD *)(v7 + 24), (int)&a2);
  v23 = sub_409A80((int)&v115, v22);
  v25 = (void **)(v7 + 512);
  v79 = (const char *)v23;
  if ( v7 + 512 != v23 )
  {
    if ( *(_DWORD *)(v7 + 532) >= 0x10u )
    {
      operator delete(*v25);
      v23 = (int)v79;
    }
    *(_DWORD *)(v7 + 532) = 15;
    *(_DWORD *)(v7 + 528) = 0;
    v66 = (const char *)v23;
    *(_BYTE *)v25 = 0;
    sub_4057A0((void *)(v7 + 512), (void *)v66);
  }
  if ( v117 >= 0x10 )
    operator delete((void *)v115);
  v26 = *(_DWORD *)(v7 + 528) == 0;
  v117 = 15;
  v116 = 0;
  LOBYTE(v115) = 0;
  if ( v26 )
  {
    v27 = sub_402730((_DWORD *)(v7 + 64), (int)&a2);
    sub_40DE60(&v61, v27, " installation not found.");
    sub_40A0C0((_DWORD *)v7, v61, v62, v63, v64, (int)v65, (int)v66);
    v28 = -1;
  }
  else
  {
    v65 = v24;
    v29 = sub_402730((_DWORD *)(v7 + 64), (int)&a2);
    v30 = sub_40DE60(&v100, v29, " Install Path: ");
    LOBYTE(v136) = 8;
    sub_40DF50(&v61, v30, v7 + 512);
    sub_409E00((_DWORD *)v7, 0, (int)v61, v62, v63, v64, (int)v65, (int)v66);
    LOBYTE(v136) = 0;
    if ( v102 >= 0x10 )
      operator delete(v100);
    v102 = 15;
    v101 = 0;
    LOBYTE(v100) = 0;
    v31 = sub_402730((_DWORD *)(v7 + 48), (int)&a2);
    v32 = (const char *)sub_40DFD0(&v97, v7 + 512, v31);
    v33 = (void **)(v7 + 104);
    v79 = v32;
    if ( (const char *)(v7 + 104) != v32 )
    {
      if ( *(_DWORD *)(v7 + 124) >= 0x10u )
      {
        operator delete(*v33);
        v32 = v79;
      }
      *(_DWORD *)(v7 + 124) = 15;
      *(_DWORD *)(v7 + 120) = 0;
      v66 = v32;
      *(_BYTE *)v33 = 0;
      sub_4057A0((void *)(v7 + 104), (void *)v66);
    }
    if ( v99 >= 0x10 )
      operator delete(v97);
    v99 = 15;
    v98 = 0;
    LOBYTE(v97) = 0;
    v34 = (const char *)sub_40DFD0(&v88, v7 + 440, v7 + 464);
    v35 = (void **)(v7 + 488);
    v79 = v34;
    if ( (const char *)(v7 + 488) != v34 )
    {
      if ( *(_DWORD *)(v7 + 508) >= 0x10u )
      {
        operator delete(*v35);
        v34 = v79;
      }
      *(_DWORD *)(v7 + 508) = 15;
      *(_DWORD *)(v7 + 504) = 0;
      v66 = v34;
      *(_BYTE *)v35 = 0;
      sub_4057A0((void *)(v7 + 488), (void *)v66);
    }
    if ( v90 >= 0x10 )
      operator delete(v88);
    v90 = 15;
    v89 = 0;
    LOBYTE(v88) = 0;
    v135 = 15;
    v134 = 0;
    LOBYTE(lpCommandLine) = 0;
    sub_405900(&lpCommandLine, v7, 0, 0xFFFFFFFF);
    LOBYTE(v136) = 9;
    v36 = sub_402730((_DWORD *)(v7 + 48), (int)&a2);
    v37 = *(_DWORD *)(v36 + 16);
    if ( *(_DWORD *)(v36 + 20) >= 0x10u )
      v36 = *(_DWORD *)v36;
    if ( sub_40C310(&lpCommandLine, v36, v37, v37) == -1 )
    {
      v66 = (const char *)&unk_413EFC;
      v65 = v38;
      v39 = sub_402730((_DWORD *)(v7 + 48), (int)&a2);
      v40 = sub_40DE60(&v103, v39, (void *)v66);
      LOBYTE(v136) = 10;
      v41 = sub_40DF50(&v112, v40, (int)&lpCommandLine);
      sub_405800(&lpCommandLine, v41);
      if ( v114 >= 0x10 )
        operator delete(v112);
      LOBYTE(v136) = 9;
      v114 = 15;
      v113 = 0;
      LOBYTE(v112) = 0;
      if ( v105 >= 0x10 )
        operator delete(v103);
      v105 = 15;
      v104 = 0;
      LOBYTE(v103) = 0;
    }
    if ( sub_403DA0((int)&a2, "generalszh") )
    {
      v66 = "generalszh";
      *(_BYTE *)(v7 + 536) = 0;
      sub_405DB0((int)&Src, (void *)v66);
      LOBYTE(v136) = 11;
      v66 = *(const char **)sub_40A2B0((_DWORD *)(v7 + 24), &Src);
      sub_4084A0((int)&SubKey, (int)v66);
      LOBYTE(v136) = 13;
      if ( v120 >= 0x10 )
        operator delete((void *)Src);
      v120 = 15;
      v119 = 0;
      LOBYTE(Src) = 0;
      v43 = sub_409880((int)&v109, v42, &SubKey, &v83);
      LOBYTE(v136) = 14;
      v44 = sub_403B20(v43, (const char *)&unk_413610);
      LOBYTE(v136) = 13;
      v78 = v44;
      if ( v111 >= 0x10 )
      {
        operator delete((void *)v109);
        v44 = v78;
      }
      v111 = 15;
      v110 = 0;
      LOBYTE(v109) = 0;
      if ( v44 )
      {
        v66 = v45;
        v65 = "Discovered Zero Hour TFD version";
        *(_BYTE *)(v7 + 536) = 1;
        sub_409F20((_DWORD *)v7, (void *)v65, (int)v66);
      }
      LOBYTE(v136) = 9;
      sub_402C30((int)&SubKey);
    }
    v46 = 68;
    v47 = &StartupInfo;
    do
    {
      LOBYTE(v47->cb) = 0;
      v47 = (struct _STARTUPINFOA *)((char *)v47 + 1);
      --v46;
    }
    while ( v46 );
    StartupInfo.cb = 68;
    v48 = 16;
    v49 = &ProcessInformation;
    do
    {
      LOBYTE(v49->hProcess) = 0;
      v49 = (struct _PROCESS_INFORMATION *)((char *)v49 + 1);
      --v48;
    }
    while ( v48 );
    v50 = (CHAR *)&lpCommandLine;
    if ( v135 >= 0x10 )
      v50 = lpCommandLine;
    v51 = (const CHAR *)(v7 + 104);
    if ( *(_DWORD *)(v7 + 124) >= 0x10u )
      v51 = *(const CHAR **)v51;
    if ( CreateProcessA(v51, v50, 0, 0, 0, 3u, 0, 0, &StartupInfo, &ProcessInformation) )
    {
      *(_DWORD *)(v7 + 96) = ProcessInformation.hProcess;
      *(_DWORD *)(v7 + 100) = ProcessInformation.dwProcessId;
      v56 = sub_403A30(&v86, "Started game with: \"", (int)&lpCommandLine);
      LOBYTE(v136) = 18;
      sub_40E090(&v61, (int)v56, "\"");
      sub_409E00((_DWORD *)v7, 0, (int)v61, v62, v63, v64, (int)v65, (int)v66);
      LOBYTE(v136) = 9;
      if ( v87 >= 0x10 )
        operator delete(v86);
      DebugEvent.dwDebugEventCode = 0;
      memset(&DebugEvent.dwProcessId, 0, 0x5Cu);
      if ( WaitForDebugEvent(&DebugEvent, 0xFFFFFFFF) )
      {
        while ( DebugEvent.dwDebugEventCode != 3 )
        {
          if ( !WaitForDebugEvent(&DebugEvent, 0xFFFFFFFF) )
            goto LABEL_99;
        }
        v57 = sub_402730((_DWORD *)(v7 + 64), (int)&a2);
        v58 = sub_403A30(&v81, "Caught CREATE_PROCESS_DEBUG_EVENT from ", v57);
        LOBYTE(v136) = 19;
        sub_40E090(&v61, (int)v58, ". Detaching...");
        sub_409E00((_DWORD *)v7, 0, (int)v61, v62, v63, v64, (int)v65, (int)v66);
        LOBYTE(v136) = 9;
        sub_402C80((int)&v81);
        DebugSetProcessKillOnExit(0);
        DebugActiveProcessStop(*(_DWORD *)(v7 + 100));
      }
LABEL_99:
      if ( sub_408530((void *)v7) )
      {
        if ( sub_403B20((int)&a2, "generals")
          && sub_403B20((int)&a2, "generalszh")
          && (sub_409F20((_DWORD *)v7, "*** Starting CA public key patching routine ***", v59), !sub_408B60(v7)) )
        {
          sub_40A160((_DWORD *)v7, v59);
          v28 = -1;
        }
        else
        {
          sub_409F20((_DWORD *)v7, "*** Starting hostname hooking routine ***", v59);
          sub_409080((_DWORD *)v7);
          v28 = 0;
        }
      }
      else
      {
        sub_40A000((_DWORD *)v7, "game.dat process not found.");
        v28 = -1;
      }
    }
    else
    {
      v52 = sub_40A1A0(&Dst);
      LOBYTE(v136) = 15;
      v53 = sub_403A30(&v91, "CreateProcess() failed to start ", v7 + 104);
      LOBYTE(v136) = 16;
      v54 = sub_40E090(&v94, (int)v53, ". Error: ");
      LOBYTE(v136) = 17;
      sub_40E130(&v61, (int)v54, (int)v52);
      sub_409F80(v61, v62, v63, v64, v65, v66);
      if ( v96 >= 0x10 )
        operator delete(v94);
      v96 = 15;
      v95 = 0;
      LOBYTE(v94) = 0;
      if ( v93 >= 0x10 )
        operator delete(v91);
      LOBYTE(v136) = 9;
      v93 = 15;
      v92 = 0;
      LOBYTE(v91) = 0;
      if ( v85 >= 0x10 )
        operator delete(Dst);
      v55 = sub_402730((_DWORD *)(v7 + 64), (int)&a2);
      sub_403A30(&v61, "Unable to launch ", v55);
      sub_40A0C0((_DWORD *)v7, v61, v62, v63, v64, (int)v65, (int)v66);
      v28 = -1;
    }
    if ( v135 >= 0x10 )
      operator delete(lpCommandLine);
    v135 = 15;
    v134 = 0;
    LOBYTE(lpCommandLine) = 0;
  }
  if ( (unsigned int)a7 >= 0x10 )
    operator delete((void *)a2);
  return v28;
}
// 409F80: using guessed type _DWORD __stdcall sub_409F80(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4130A8: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004084A0) --------------------------------------------------------
int __thiscall sub_4084A0(int this, int a2)
{
  int v2; // edi@1
  int v3; // ecx@1

  v2 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  sub_405900((void *)this, a2, 0, 0xFFFFFFFF);
  v3 = v2 + 24;
  *(_DWORD *)(v3 + 20) = 15;
  *(_DWORD *)(v3 + 16) = 0;
  *(_BYTE *)v3 = 0;
  sub_405900((void *)(v2 + 24), a2 + 24, 0, 0xFFFFFFFF);
  return v2;
}

//----- (00408530) --------------------------------------------------------
char __thiscall sub_408530(void *this)
{
  int v1; // esi@1
  void (__cdecl *v2)(void *); // edi@1
  HANDLE v3; // ebx@2
  int v4; // ecx@4
  unsigned int v5; // edi@5
  int v6; // edx@6
  unsigned int v7; // ecx@8
  const char *v8; // esi@11
  unsigned int v9; // ecx@11
  bool v10; // cf@15
  unsigned __int8 v11; // al@17
  unsigned __int8 v12; // al@19
  unsigned __int8 v13; // al@21
  int v14; // eax@22
  bool v15; // zf@24
  signed int v16; // eax@26
  int v17; // esi@31
  int v18; // eax@33
  int v19; // esi@33
  int v20; // edi@33
  size_t v21; // eax@35
  int v22; // ecx@38
  unsigned int v23; // eax@40
  void *v24; // edx@40
  int v25; // eax@45
  bool v26; // cf@49
  unsigned __int8 v27; // al@51
  unsigned __int8 v28; // al@53
  unsigned __int8 v29; // al@55
  int v30; // eax@56
  bool v31; // zf@58
  unsigned int v32; // ecx@59
  int v33; // eax@60
  char v34; // al@63
  int v35; // edi@68
  int v36; // ecx@68
  void *v37; // eax@68
  int v38; // ecx@68
  int v39; // eax@69
  void (__cdecl *v40)(void *); // esi@70
  HANDLE v41; // eax@81
  void *v42; // esi@82
  _DWORD *v43; // ebx@82
  void *v44; // eax@82
  int v45; // eax@82
  _DWORD *v46; // eax@82
  const CHAR *v47; // eax@92
  char v49; // [sp-18h] [bp-218h]@82
  int v50; // [sp-14h] [bp-214h]@82
  int v51; // [sp-10h] [bp-210h]@82
  int v52; // [sp-Ch] [bp-20Ch]@82
  int v53; // [sp-8h] [bp-208h]@32
  int v54; // [sp-4h] [bp-204h]@32
  int v55; // [sp+10h] [bp-1F0h]@68
  int v56; // [sp+20h] [bp-1E0h]@73
  unsigned int v57; // [sp+24h] [bp-1DCh]@71
  int v58; // [sp+2Ch] [bp-1D4h]@32
  HANDLE v59; // [sp+30h] [bp-1D0h]@2
  char v60; // [sp+34h] [bp-1CCh]@76
  DWORD ExitCode; // [sp+38h] [bp-1C8h]@1
  unsigned int v62; // [sp+3Ch] [bp-1C4h]@45
  int v63; // [sp+40h] [bp-1C0h]@1
  int v64; // [sp+44h] [bp-1BCh]@5
  int v65; // [sp+48h] [bp-1B8h]@32
  bool v66; // [sp+4Eh] [bp-1B2h]@63
  char v67; // [sp+4Fh] [bp-1B1h]@1
  PROCESSENTRY32 pe; // [sp+50h] [bp-1B0h]@1
  void *Dst; // [sp+178h] [bp-88h]@82
  unsigned int v70; // [sp+18Ch] [bp-74h]@90
  int v71; // [sp+190h] [bp-70h]@82
  int v72; // [sp+1A0h] [bp-60h]@88
  unsigned int v73; // [sp+1A4h] [bp-5Ch]@86
  void *v74; // [sp+1A8h] [bp-58h]@82
  int v75; // [sp+1B8h] [bp-48h]@86
  unsigned int v76; // [sp+1BCh] [bp-44h]@84
  void *v77; // [sp+1C0h] [bp-40h]@68
  int v78; // [sp+1D0h] [bp-30h]@90
  unsigned int v79; // [sp+1D4h] [bp-2Ch]@73
  LPCSTR lpOutputString; // [sp+1D8h] [bp-28h]@34
  unsigned int v81; // [sp+1E8h] [bp-18h]@34
  unsigned int v82; // [sp+1ECh] [bp-14h]@34
  int v83; // [sp+1FCh] [bp-4h]@2

  v1 = (int)this;
  v63 = (int)this;
  v2 = operator delete;
  pe.dwSize = 296;
  v67 = 0;
  ExitCode = 259;
  do
  {
    v3 = CreateToolhelp32Snapshot(2u, 0);
    v59 = v3;
    v83 = 0;
    if ( Process32First(v3, &pe) != 1 || v67 )
      goto LABEL_77;
    do
    {
      if ( Process32Next(v3, &pe) != 1 )
        break;
      sub_40C400((int)&v64, v1 + 32, v4);
      LOBYTE(v83) = 1;
      v5 = *(_DWORD *)(v1 + 88);
      if ( *(_DWORD *)(v1 + 92) < 0x10u )
        v6 = v1 + 72;
      else
        v6 = *(_DWORD *)(v1 + 72);
      v7 = 10;
      if ( v5 < 0xA )
        v7 = *(_DWORD *)(v1 + 88);
      if ( v7 )
      {
        v8 = "generalszh";
        v10 = v7 < 4;
        v9 = v7 - 4;
        if ( v10 )
        {
LABEL_14:
          if ( v9 == -4 )
            goto LABEL_23;
        }
        else
        {
          while ( *(_DWORD *)v6 == *(_DWORD *)v8 )
          {
            v6 += 4;
            v8 += 4;
            v10 = v9 < 4;
            v9 -= 4;
            if ( v10 )
              goto LABEL_14;
          }
        }
        v10 = *(_BYTE *)v6 < (const unsigned __int8)*v8;
        if ( *(_BYTE *)v6 != *v8
          || v9 != -3
          && ((v11 = *(_BYTE *)(v6 + 1), v10 = v11 < v8[1], v11 != v8[1])
           || v9 != -2
           && ((v12 = *(_BYTE *)(v6 + 2), v10 = v12 < v8[2], v12 != v8[2])
            || v9 != -1 && (v13 = *(_BYTE *)(v6 + 3), v10 = v13 < v8[3], v13 != v8[3]))) )
        {
          v14 = -v10 | 1;
          goto LABEL_24;
        }
LABEL_23:
        v14 = 0;
LABEL_24:
        v15 = v14 == 0;
        if ( v14 )
          goto LABEL_29;
      }
      if ( v5 >= 0xA )
        v16 = v5 != 10;
      else
        v16 = -1;
      v15 = v16 == 0;
LABEL_29:
      if ( v15 && *(_BYTE *)(v63 + 536) == 1 )
      {
        v17 = v63 + 40;
        if ( &v64 != (int *)(v63 + 40) )
        {
          sub_40D4C0(&v64, *(_DWORD *)(v64 + 4));
          LOBYTE(v58) = 0;
          v54 = v58;
          *(_DWORD *)(v64 + 4) = v64;
          v53 = v17;
          *(_DWORD *)v64 = v64;
          *(_DWORD *)(v64 + 8) = v64;
          v65 = 0;
          sub_40E6D0(&v64, v53, v54);
        }
      }
      v18 = sub_40A740(&v64, v63 + 72);
      v19 = *(_DWORD *)v18;
      v20 = *(_DWORD *)(v18 + 4);
      if ( *(_DWORD *)v18 == v20 )
        goto LABEL_76;
      while ( 1 )
      {
        v82 = 15;
        v81 = 0;
        LOBYTE(lpOutputString) = 0;
        if ( pe.szExeFile[0] )
          v21 = strlen(pe.szExeFile);
        else
          v21 = 0;
        sub_405CB0((int)&lpOutputString, pe.szExeFile, v21);
        if ( *(_DWORD *)(v19 + 20) < 0x10u )
          v22 = v19;
        else
          v22 = *(_DWORD *)v19;
        v23 = *(_DWORD *)(v19 + 16);
        v3 = v59;
        v24 = &lpOutputString;
        if ( v82 >= 0x10 )
          v24 = (void *)lpOutputString;
        if ( v81 < v23 )
          v23 = v81;
        if ( v23 )
        {
          v10 = v23 < 4;
          v25 = v23 - 4;
          v62 = v25;
          if ( v10 )
          {
LABEL_48:
            if ( v25 == -4 )
              goto LABEL_57;
          }
          else
          {
            while ( *(_DWORD *)v24 == *(_DWORD *)v22 )
            {
              v24 = (char *)v24 + 4;
              v22 += 4;
              v10 = v62 < 4;
              v25 = v62 - 4;
              v62 -= 4;
              if ( v10 )
                goto LABEL_48;
            }
          }
          v26 = *(_BYTE *)v24 < *(_BYTE *)v22;
          if ( *(_BYTE *)v24 != *(_BYTE *)v22
            || v62 != -3
            && ((v27 = *((_BYTE *)v24 + 1), v26 = v27 < *(_BYTE *)(v22 + 1), v27 != *(_BYTE *)(v22 + 1))
             || v62 != -2
             && ((v28 = *((_BYTE *)v24 + 2), v26 = v28 < *(_BYTE *)(v22 + 2), v28 != *(_BYTE *)(v22 + 2))
              || v62 != -1 && (v29 = *((_BYTE *)v24 + 3), v26 = v29 < *(_BYTE *)(v22 + 3), v29 != *(_BYTE *)(v22 + 3)))) )
          {
            v30 = -v26 | 1;
            goto LABEL_58;
          }
LABEL_57:
          v30 = 0;
LABEL_58:
          v31 = v30 == 0;
          if ( v30 )
            goto LABEL_63;
        }
        v32 = *(_DWORD *)(v19 + 16);
        v33 = v81 >= v32 ? (unsigned __int8)(v81 != v32) : -1;
        v31 = v33 == 0;
LABEL_63:
        v34 = v31;
        v66 = v31;
        if ( v82 >= 0x10 )
        {
          operator delete((void *)lpOutputString);
          v34 = v66;
        }
        if ( v34 )
          break;
        v19 += 24;
        if ( v19 == v20 )
          goto LABEL_76;
      }
      v35 = v63;
      v54 = pe.th32ProcessID;
      v36 = v63 + 264;
      *(_DWORD *)(v63 + 260) = pe.th32ProcessID;
      std::basic_ostream<char,std::char_traits<char>>::operator<<(v36, v54);
      v37 = sub_40ADC0((void *)(v35 + 264), &v77);
      LOBYTE(v83) = 2;
      sub_40E1E0((int)&v55, "Found game.dat process. PID ", (int)v37);
      LOBYTE(v83) = 3;
      if ( *(_DWORD *)(v35 + 628) )
      {
        v53 = v38;
        v39 = sub_40E270(v35 + 544, (int)&v55);
        std::basic_ostream<char,std::char_traits<char>>::operator<<(v39, std::endl);
        goto LABEL_70;
      }
      sub_403A30(&lpOutputString, "T3AO: ", (int)&v55);
      v47 = (const CHAR *)&lpOutputString;
      if ( v82 >= 0x10 )
        v47 = lpOutputString;
      OutputDebugStringA(v47);
      if ( v82 < 0x10 )
      {
LABEL_70:
        v40 = operator delete;
      }
      else
      {
        v40 = operator delete;
        operator delete((void *)lpOutputString);
      }
      if ( v57 >= 0x10 )
        v40((void *)v55);
      v57 = 15;
      v56 = 0;
      LOBYTE(v55) = 0;
      if ( v79 >= 0x10 )
        v40(v77);
      v67 = 1;
LABEL_76:
      LOBYTE(v83) = 0;
      v54 = v64;
      sub_40CB60((int **)&v64, (int *)&v60, *(_DWORD *)v64, (int *)v64);
      v2 = operator delete;
      operator delete((void *)v64);
      v1 = v63;
    }
    while ( !v67 );
LABEL_77:
    Sleep(0x3E8u);
    v54 = (int)&ExitCode;
    GetExitCodeProcess(*(HANDLE *)(v1 + 96), &ExitCode);
    if ( ExitCode != 259 )
    {
      if ( v3 )
        CloseHandle(v3);
      return 0;
    }
    v83 = -1;
    if ( v3 )
      CloseHandle(v3);
  }
  while ( !v67 );
  v41 = OpenProcess(0x1F0FFFu, 0, *(_DWORD *)(v1 + 260));
  *(_DWORD *)(v1 + 256) = v41;
  if ( !v41 )
  {
    v42 = sub_40A1A0(&Dst);
    v43 = (_DWORD *)v63;
    v83 = 5;
    v44 = sub_40ADC0((void *)(v63 + 264), &v77);
    LOBYTE(v83) = 6;
    v45 = sub_40E1E0((int)&v71, "Opening the process with PID ", (int)v44);
    LOBYTE(v83) = 7;
    v46 = sub_40E090(&v74, v45, " failed. Error ");
    LOBYTE(v83) = 8;
    sub_40E130(&lpOutputString, (int)v46, (int)v42);
    LOBYTE(v83) = 9;
    v54 = 15;
    v53 = 0;
    v49 = 0;
    sub_405900(&v49, (int)&lpOutputString, 0, 0xFFFFFFFF);
    sub_409E00(v43, 1, *(int *)&v49, v50, v51, v52, v53, v54);
    if ( v82 >= 0x10 )
      v2((void *)lpOutputString);
    v82 = 15;
    v81 = 0;
    LOBYTE(lpOutputString) = 0;
    if ( v76 >= 0x10 )
      v2(v74);
    v76 = 15;
    v75 = 0;
    LOBYTE(v74) = 0;
    if ( v73 >= 0x10 )
      v2((void *)v71);
    v73 = 15;
    v72 = 0;
    LOBYTE(v71) = 0;
    if ( v79 >= 0x10 )
      v2(v77);
    v79 = 15;
    v78 = 0;
    LOBYTE(v77) = 0;
    if ( v70 >= 0x10 )
      v2(Dst);
    return 0;
  }
  return 1;
}
// 4130A8: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD);
// 4130AC: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00408B60) --------------------------------------------------------
char __thiscall sub_408B60(int this)
{
  int v1; // ebx@1
  int v2; // eax@1
  int v3; // ecx@1
  LPCVOID *v4; // esi@1
  LPCVOID *v5; // edi@1
  void *v6; // eax@2
  bool v7; // al@3
  LPCVOID v9; // edi@8
  int v10; // ecx@9
  int v11; // eax@10
  const CHAR *v12; // eax@11
  char v13; // al@17
  int v14; // ecx@17
  bool v15; // al@19
  int v16; // eax@22
  const CHAR *v17; // eax@23
  int v18; // [sp-8h] [bp-70h]@9
  int v19; // [sp-4h] [bp-6Ch]@10
  int v20; // [sp+10h] [bp-58h]@9
  int v21; // [sp+20h] [bp-48h]@9
  unsigned int v22; // [sp+24h] [bp-44h]@9
  int v23; // [sp+28h] [bp-40h]@21
  int v24; // [sp+38h] [bp-30h]@21
  unsigned int v25; // [sp+3Ch] [bp-2Ch]@21
  LPCSTR lpOutputString; // [sp+40h] [bp-28h]@11
  unsigned int v27; // [sp+54h] [bp-14h]@11
  int v28; // [sp+64h] [bp-4h]@9

  v1 = this;
  v2 = sub_40AB90((_DWORD *)(this + 56), this + 72);
  v4 = *(LPCVOID **)v2;
  v5 = *(LPCVOID **)(v2 + 4);
  if ( *(LPCVOID **)v2 == v5 )
    goto LABEL_5;
  v6 = (void *)(v1 + 128);
  while ( 1 )
  {
    v7 = sub_408DA0((_DWORD *)v1, *(HANDLE *)(v1 + 256), *v4, v6, v3, Str2);
    *(_DWORD *)(v1 + 540) = v7;
    if ( v7 )
      break;
    ++v4;
    v6 = (void *)(v1 + 128);
    if ( v4 == v5 )
      goto LABEL_5;
  }
  v9 = *v4;
  if ( !*v4 )
  {
LABEL_5:
    sub_40A000((_DWORD *)v1, "CA public key differs from expected value. Not patching.");
    return 0;
  }
  v22 = 15;
  v21 = 0;
  LOBYTE(v20) = 0;
  sub_405CB0((int)&v20, "CA public key is expected value.", 0x20u);
  v28 = 0;
  if ( *(_DWORD *)(v1 + 628) )
  {
    v18 = v10;
    v11 = sub_40E270(v1 + 544, (int)&v20);
    std::basic_ostream<char,std::char_traits<char>>::operator<<(v11, std::endl);
  }
  else
  {
    sub_403A30(&lpOutputString, "T3AO: ", (int)&v20);
    v12 = (const CHAR *)&lpOutputString;
    if ( v27 >= 0x10 )
      v12 = lpOutputString;
    OutputDebugStringA(v12);
    if ( v27 >= 0x10 )
      operator delete((void *)lpOutputString);
  }
  v28 = -1;
  if ( v22 >= 0x10 )
    operator delete((void *)v20);
  v13 = sub_408EC0((_DWORD *)v1, *(HANDLE *)(v1 + 256), (LPVOID)v9, v18, v19);
  *(_DWORD *)(v1 + 540) = (unsigned __int8)v13;
  if ( !v13 )
  {
    sub_40A000((_DWORD *)v1, "Patching CA public key failed.");
    return 0;
  }
  v15 = sub_408DA0((_DWORD *)v1, *(HANDLE *)(v1 + 256), v9, (LPVOID)(v1 + 128), v14, aC);
  *(_DWORD *)(v1 + 540) = v15;
  if ( !v15 )
  {
    sub_40A000((_DWORD *)v1, "CA public key is not patched.");
    return 0;
  }
  v25 = 15;
  v24 = 0;
  LOBYTE(v23) = 0;
  sub_405CB0((int)&v23, "Successfully patched CA public key.", 0x23u);
  v28 = 2;
  if ( *(_DWORD *)(v1 + 628) )
  {
    v16 = sub_40E270(v1 + 544, (int)&v23);
    std::basic_ostream<char,std::char_traits<char>>::operator<<(v16, std::endl);
  }
  else
  {
    sub_403A30(&lpOutputString, "T3AO: ", (int)&v23);
    v17 = (const CHAR *)&lpOutputString;
    if ( v27 >= 0x10 )
      v17 = lpOutputString;
    OutputDebugStringA(v17);
    if ( v27 >= 0x10 )
      operator delete((void *)lpOutputString);
  }
  if ( v25 >= 0x10 )
    operator delete((void *)v23);
  return 1;
}
// 4130A8: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00408DA0) --------------------------------------------------------
bool __thiscall sub_408DA0(_DWORD *this, HANDLE hProcess, LPCVOID lpBaseAddress, LPVOID lpBuffer, int a5, char *Str2)
{
  _DWORD *v6; // esi@1
  BOOL v7; // eax@1
  void *v8; // eax@2
  bool result; // al@6
  int v10; // eax@7
  char v11; // [sp-18h] [bp-74h]@2
  int v12; // [sp-14h] [bp-70h]@2
  int v13; // [sp-10h] [bp-6Ch]@2
  int v14; // [sp-Ch] [bp-68h]@2
  int v15; // [sp-8h] [bp-64h]@2
  int v16; // [sp-4h] [bp-60h]@2
  int v17; // [sp+18h] [bp-44h]@2
  int v18; // [sp+28h] [bp-34h]@4
  unsigned int v19; // [sp+2Ch] [bp-30h]@2
  void *Dst; // [sp+30h] [bp-2Ch]@2
  unsigned int v21; // [sp+44h] [bp-18h]@4
  int v22; // [sp+58h] [bp-4h]@2

  v6 = this;
  v7 = ReadProcessMemory(hProcess, lpBaseAddress, lpBuffer, 0x80u, 0);
  v6[135] = v7;
  if ( v7 )
  {
    v10 = strncmp((const char *)lpBuffer, Str2, 0x80u);
    v6[135] = v10;
    result = v10 == 0;
  }
  else
  {
    v8 = sub_40A1A0(&Dst);
    v22 = 0;
    sub_40E1E0((int)&v17, "Reading process memory failed. Error: ", (int)v8);
    LOBYTE(v22) = 1;
    v16 = 15;
    v15 = 0;
    v11 = 0;
    sub_405900(&v11, (int)&v17, 0, 0xFFFFFFFF);
    sub_409E00(v6, 1, *(int *)&v11, v12, v13, v14, v15, v16);
    if ( v19 >= 0x10 )
      operator delete((void *)v17);
    v19 = 15;
    v18 = 0;
    LOBYTE(v17) = 0;
    if ( v21 >= 0x10 )
      operator delete(Dst);
    result = 0;
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00408EC0) --------------------------------------------------------
char __thiscall sub_408EC0(_DWORD *this, HANDLE hProcess, LPVOID lpAddress, int a4, int a5)
{
  _DWORD *v5; // esi@1
  BOOL v6; // eax@1
  void *v7; // eax@2
  char result; // al@6
  BOOL v9; // eax@7
  void *v10; // eax@8
  BOOL v11; // eax@10
  void *v12; // eax@11
  char v13; // [sp-18h] [bp-88h]@2
  int v14; // [sp-14h] [bp-84h]@2
  int v15; // [sp-10h] [bp-80h]@2
  int v16; // [sp-Ch] [bp-7Ch]@2
  int v17; // [sp-8h] [bp-78h]@2
  int v18; // [sp-4h] [bp-74h]@2
  int v19; // [sp+10h] [bp-60h]@2
  int v20; // [sp+20h] [bp-50h]@4
  unsigned int v21; // [sp+24h] [bp-4Ch]@2
  DWORD flOldProtect; // [sp+28h] [bp-48h]@1
  void *v23; // [sp+30h] [bp-40h]@11
  unsigned int v24; // [sp+44h] [bp-2Ch]@11
  void *Dst; // [sp+48h] [bp-28h]@2
  unsigned int v26; // [sp+5Ch] [bp-14h]@4
  int v27; // [sp+6Ch] [bp-4h]@2

  v5 = this;
  v6 = VirtualProtectEx(hProcess, lpAddress, 0x80u, 0x40u, &flOldProtect);
  v5[135] = v6;
  if ( !v6 )
  {
    v7 = sub_40A1A0(&Dst);
    v27 = 0;
    sub_40E1E0((int)&v19, "Changing memory protection failed. Error: ", (int)v7);
    LOBYTE(v27) = 1;
    v18 = 15;
    v17 = 0;
    v13 = 0;
    sub_405900(&v13, (int)&v19, 0, 0xFFFFFFFF);
    sub_409E00(v5, 1, *(int *)&v13, v14, v15, v16, v17, v18);
    if ( v21 >= 0x10 )
      operator delete((void *)v19);
    v21 = 15;
    v20 = 0;
    LOBYTE(v19) = 0;
    if ( v26 >= 0x10 )
      operator delete(Dst);
    return 0;
  }
  v9 = WriteProcessMemory(hProcess, lpAddress, aC, 0x80u, 0);
  v5[135] = v9;
  if ( !v9 )
  {
    v10 = sub_40A1A0(&Dst);
    v27 = 2;
    sub_40E1E0((int)&v13, "Writing process memory failed. Error: ", (int)v10);
    sub_409F80(*(_DWORD *)&v13, v14, v15, v16, v17, v18);
    if ( v26 >= 0x10 )
    {
      operator delete(Dst);
      return 0;
    }
    return 0;
  }
  v11 = VirtualProtectEx(hProcess, lpAddress, 0x80u, 0x40u, &flOldProtect);
  v5[135] = v11;
  if ( v11 )
  {
    result = 1;
  }
  else
  {
    v12 = sub_40A1A0(&v23);
    v27 = 3;
    sub_40E1E0((int)&v13, "Changing memory protection failed. Error: ", (int)v12);
    sub_409F80(*(_DWORD *)&v13, v14, v15, v16, v17, v18);
    if ( v24 < 0x10 )
      return 0;
    operator delete(v23);
    result = 0;
  }
  return result;
}
// 409F80: using guessed type _DWORD __stdcall sub_409F80(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00409080) --------------------------------------------------------
void __thiscall sub_409080(_DWORD *this)
{
  _DWORD *v1; // ebx@1
  unsigned int v2; // edx@2
  int *v3; // ecx@2
  int v4; // esi@3
  int v5; // eax@5
  int v6; // ecx@7
  int v7; // eax@8
  const CHAR *v8; // eax@9
  int *v9; // eax@15
  int v10; // esi@17
  void *v11; // eax@17
  int v12; // [sp-18h] [bp-120h]@17
  int v13; // [sp-14h] [bp-11Ch]@17
  int v14; // [sp-10h] [bp-118h]@17
  int v15; // [sp-Ch] [bp-114h]@15
  int v16; // [sp-8h] [bp-110h]@8
  int v17; // [sp-4h] [bp-10Ch]@15
  int v18; // [sp+Ch] [bp-FCh]@19
  int v19; // [sp+10h] [bp-F8h]@17
  char v20; // [sp+14h] [bp-F4h]@19
  char v21; // [sp+18h] [bp-F0h]@19
  char v22; // [sp+60h] [bp-A8h]@19
  int v23; // [sp+A8h] [bp-60h]@7
  int v24; // [sp+B8h] [bp-50h]@7
  unsigned int v25; // [sp+BCh] [bp-4Ch]@7
  int v26; // [sp+C4h] [bp-44h]@7
  LPCSTR lpOutputString; // [sp+C8h] [bp-40h]@9
  unsigned int v28; // [sp+DCh] [bp-2Ch]@9
  int *Dst; // [sp+E0h] [bp-28h]@7
  int v30; // [sp+F0h] [bp-18h]@7
  unsigned int v31; // [sp+F4h] [bp-14h]@7
  int v32; // [sp+104h] [bp-4h]@7

  v1 = this;
  if ( !sub_4092A0((int)this) )
  {
    v2 = v1[127];
    v3 = v1 + 122;
    if ( v2 < 0x10 )
      v4 = (int)(v1 + 122);
    else
      v4 = *v3;
    v5 = v4 + v1[126];
    if ( v2 >= 0x10 )
      v3 = (int *)*v3;
    v31 = 7;
    v30 = 0;
    LOWORD(Dst) = 0;
    sub_40E9E0(&Dst, (int)v3, v5, v26);
    v32 = 0;
    v25 = 15;
    v24 = 0;
    LOBYTE(v23) = 0;
    sub_405CB0((int)&v23, "Injecting DLL into game.dat process...", 0x26u);
    LOBYTE(v32) = 1;
    if ( v1[157] )
    {
      v16 = v6;
      v7 = sub_40E270((int)(v1 + 136), (int)&v23);
      std::basic_ostream<char,std::char_traits<char>>::operator<<(v7, std::endl);
    }
    else
    {
      sub_403A30(&lpOutputString, "T3AO: ", (int)&v23);
      v8 = (const CHAR *)&lpOutputString;
      if ( v28 >= 0x10 )
        v8 = lpOutputString;
      OutputDebugStringA(v8);
      if ( v28 >= 0x10 )
        operator delete((void *)lpOutputString);
    }
    LOBYTE(v32) = 0;
    if ( v25 >= 0x10 )
      operator delete((void *)v23);
    v17 = 0;
    v16 = 0;
    v15 = 0;
    v9 = (int *)&Dst;
    if ( v31 >= 8 )
      v9 = Dst;
    v10 = RhInjectLibrary(v1[65], 0, 0, v9, v15, v16, v17);
    sub_40AD10((char *)&v19, v16, v17);
    LOBYTE(v32) = 3;
    std::basic_ostream<char,std::char_traits<char>>::operator<<(&v19, v10);
    v11 = sub_40ADC0(&v19, &lpOutputString);
    LOBYTE(v32) = 4;
    sub_40E1E0((int)&v12, "Result of injection: Code ", (int)v11);
    sub_409E00(v1, 0, v12, v13, v14, v15, v16, v17);
    if ( v28 >= 0x10 )
      operator delete((void *)lpOutputString);
    *(int *)((char *)&v19 + *(_DWORD *)(v19 + 4)) = (int)&off_413EDC;
    *(int *)((char *)&v18 + *(_DWORD *)(v19 + 4)) = *(_DWORD *)(v19 + 4) - 80;
    sub_40ADE0((int)&v20);
    std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(&v21);
    std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(&v22);
    if ( v31 >= 8 )
      operator delete(Dst);
  }
}
// 413010: using guessed type int __stdcall RhInjectLibrary(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4130A4: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD);
// 4130A8: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD);
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413EDC: using guessed type int (*off_413EDC)();

//----- (004092A0) --------------------------------------------------------
char __thiscall sub_4092A0(int this)
{
  unsigned int v1; // esi@1
  int v2; // edi@1
  int v3; // ecx@2
  unsigned int v4; // eax@4
  int v5; // eax@6
  bool v6; // zf@6
  signed int v7; // eax@8
  unsigned int v8; // eax@14
  int v9; // eax@16
  bool v10; // zf@16
  signed int v11; // eax@18
  const char *v12; // eax@22
  int v13; // ecx@24
  const CHAR *v14; // eax@25
  int v16; // [sp-Ch] [bp-104h]@0
  int v17; // [sp-8h] [bp-100h]@0
  int v18; // [sp-4h] [bp-FCh]@22
  int v19; // [sp+Ch] [bp-ECh]@28
  int v20; // [sp+10h] [bp-E8h]@24
  int v21; // [sp+1Ch] [bp-DCh]@24
  char v22; // [sp+20h] [bp-D8h]@28
  char v23; // [sp+28h] [bp-D0h]@28
  char v24; // [sp+80h] [bp-78h]@28
  int v25; // [sp+CCh] [bp-2Ch]@1
  LPCSTR lptstrFilename; // [sp+D0h] [bp-28h]@22
  unsigned int v27; // [sp+E4h] [bp-14h]@22
  int v28; // [sp+F4h] [bp-4h]@22

  v25 = this;
  v1 = *(_DWORD *)(this + 88);
  v2 = this + 72;
  if ( *(_DWORD *)(this + 92) < 0x10u )
    v3 = this + 72;
  else
    v3 = *(_DWORD *)v2;
  v4 = 8;
  if ( v1 < 8 )
    v4 = v1;
  v5 = sub_4055E0((int)"generals", v3, v4);
  v6 = v5 == 0;
  if ( !v5 )
  {
    if ( v1 >= 8 )
      v7 = v1 != 8;
    else
      v7 = -1;
    v6 = v7 == 0;
  }
  if ( !v6 )
  {
    if ( *(_DWORD *)(v2 + 20) >= 0x10u )
      v2 = *(_DWORD *)v2;
    v8 = 10;
    if ( v1 < 0xA )
      v8 = v1;
    v9 = sub_4055E0((int)"generalszh", v2, v8);
    v10 = v9 == 0;
    if ( !v9 )
    {
      if ( v1 >= 0xA )
        v11 = v1 != 10;
      else
        v11 = -1;
      v10 = v11 == 0;
    }
    if ( !v10 )
      return 0;
  }
  sub_40DE60(&lptstrFilename, v25 + 512, "d3d8.dll");
  v28 = 0;
  v12 = (const char *)&lptstrFilename;
  if ( v27 >= 0x10 )
    v12 = lptstrFilename;
  sub_40BF20((char *)&v20, v12, v16, v17, v18);
  LOBYTE(v28) = 1;
  v13 = v20;
  if ( *(int *)((char *)&v21 + *(_DWORD *)(v20 + 4)) )
  {
LABEL_32:
    *(int *)((char *)&v20 + *(_DWORD *)(v13 + 4)) = (int)off_413E28;
    *(int *)((char *)&v19 + *(_DWORD *)(v20 + 4)) = *(_DWORD *)(v20 + 4) - 112;
    sub_40B530((int)&v22);
    std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(&v23);
    std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(&v24);
    if ( v27 >= 0x10 )
      operator delete((void *)lptstrFilename);
    return 0;
  }
  v14 = (const CHAR *)&lptstrFilename;
  if ( v27 >= 0x10 )
    v14 = lptstrFilename;
  if ( sub_4094F0(v14, v20) < 65 )
  {
    sub_40C020((int)&v20);
    v13 = v20;
    goto LABEL_32;
  }
  sub_40C020((int)&v20);
  *(int *)((char *)&v20 + *(_DWORD *)(v20 + 4)) = (int)off_413E28;
  *(int *)((char *)&v19 + *(_DWORD *)(v20 + 4)) = *(_DWORD *)(v20 + 4) - 112;
  sub_40B530((int)&v22);
  std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(&v23);
  std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(&v24);
  if ( v27 >= 0x10 )
    operator delete((void *)lptstrFilename);
  return 1;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 413128: using guessed type int __thiscall std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413E28: using guessed type int (*off_413E28[2])();

//----- (004094F0) --------------------------------------------------------
int __stdcall sub_4094F0(LPCSTR lptstrFilename, int a2)
{
  int v2; // esi@1
  unsigned int v3; // eax@1
  DWORD v4; // ebx@1
  void *v5; // edi@2
  unsigned int puLen; // [sp+8h] [bp-8h]@3
  DWORD dwHandle; // [sp+Ch] [bp-4h]@1

  v2 = -1;
  v3 = GetFileVersionInfoSizeA(lptstrFilename, &dwHandle);
  v4 = v3;
  if ( v3 )
  {
    v5 = sub_4109BE(v3);
    if ( GetFileVersionInfoA(lptstrFilename, dwHandle, v4, v5) )
    {
      lptstrFilename = 0;
      if ( VerQueryValueA(v5, "\\StringFileInfo\\040904E4\\ProductVersion", (LPVOID *)&lptstrFilename, &puLen) == 1 )
        v2 = atoi(lptstrFilename);
    }
    operator delete[](v5);
  }
  return v2;
}
// 413208: using guessed type void __cdecl operator delete[](void *);

//----- (00409570) --------------------------------------------------------
signed int __thiscall sub_409570(void *this, void *a2, int a3, int a4, int a5, int a6, unsigned int a7)
{
  void *v7; // edi@1
  int v8; // ecx@1
  signed int v9; // edi@4
  _DWORD *v10; // eax@5
  _DWORD *v11; // eax@5
  int v12; // eax@9
  _DWORD *v13; // eax@9
  const CHAR *v14; // eax@11
  const CHAR *v15; // eax@13
  SHELLEXECUTEINFOA pExecInfo; // [sp+Ch] [bp-F4h]@11
  void *v18; // [sp+48h] [bp-B8h]@5
  int v19; // [sp+58h] [bp-A8h]@7
  unsigned int v20; // [sp+5Ch] [bp-A4h]@5
  int v21; // [sp+60h] [bp-A0h]@5
  int v22; // [sp+70h] [bp-90h]@23
  unsigned int v23; // [sp+74h] [bp-8Ch]@21
  CHAR *v24; // [sp+78h] [bp-88h]@9
  int v25; // [sp+88h] [bp-78h]@21
  unsigned int v26; // [sp+8Ch] [bp-74h]@11
  void *v27; // [sp+90h] [bp-70h]@5
  int v28; // [sp+A0h] [bp-60h]@9
  unsigned int v29; // [sp+A4h] [bp-5Ch]@7
  CHAR *Dst; // [sp+A8h] [bp-58h]@9
  int v31; // [sp+B8h] [bp-48h]@19
  unsigned int v32; // [sp+BCh] [bp-44h]@13
  int v33; // [sp+C0h] [bp-40h]@1
  int v34; // [sp+D0h] [bp-30h]@3
  unsigned int v35; // [sp+D4h] [bp-2Ch]@24
  void *ValueName[4]; // [sp+D8h] [bp-28h]@1
  int v37; // [sp+E8h] [bp-18h]@1
  unsigned int v38; // [sp+ECh] [bp-14h]@1
  int v39; // [sp+FCh] [bp-4h]@1

  v7 = this;
  v39 = 0;
  v38 = 15;
  v37 = 0;
  LOBYTE(ValueName[0]) = 0;
  sub_405CB0((int)ValueName, "InstallPath", 0xBu);
  LOBYTE(v39) = 1;
  sub_409880((int)&v33, v8, (LPCSTR)v7 + 416, (LPCSTR)ValueName);
  LOBYTE(v39) = 3;
  if ( v38 >= 0x10 )
    operator delete(ValueName[0]);
  v38 = 15;
  v37 = 0;
  LOBYTE(ValueName[0]) = 0;
  if ( v34 )
  {
    v10 = sub_403A30(&v27, "\"", (int)&v33);
    LOBYTE(v39) = 4;
    v11 = sub_40E090(&v18, (int)v10, "cnconline.exe");
    LOBYTE(v39) = 5;
    sub_40E090(&v21, (int)v11, "\"");
    if ( v20 >= 0x10 )
      operator delete(v18);
    v20 = 15;
    v19 = 0;
    LOBYTE(v18) = 0;
    LOBYTE(v39) = 8;
    if ( v29 >= 0x10 )
      operator delete(v27);
    v29 = 15;
    v28 = 0;
    LOBYTE(v27) = 0;
    sub_40DE60(&v24, (int)&v33, "ifeo.exe");
    LOBYTE(v39) = 9;
    v12 = sub_402730((_DWORD *)v7 + 12, (int)&a2);
    v13 = sub_40DE60(&v27, v12, &unk_413EFC);
    LOBYTE(v39) = 10;
    sub_40DF50(&Dst, v13, (int)&v21);
    if ( v29 >= 0x10 )
      operator delete(v27);
    memset(&pExecInfo.fMask, 0, 0x38u);
    v14 = (const CHAR *)&v24;
    if ( v26 >= 0x10 )
      v14 = v24;
    pExecInfo.lpFile = v14;
    v15 = (const CHAR *)&Dst;
    if ( v32 >= 0x10 )
      v15 = Dst;
    pExecInfo.lpParameters = v15;
    pExecInfo.cbSize = 60;
    pExecInfo.fMask = 64;
    pExecInfo.hwnd = 0;
    pExecInfo.lpVerb = "open";
    pExecInfo.lpDirectory = 0;
    pExecInfo.nShow = 5;
    pExecInfo.hInstApp = 0;
    if ( ShellExecuteExA(&pExecInfo) )
    {
      WaitForSingleObject(pExecInfo.hProcess, 0xFFFFFFFF);
      CloseHandle(pExecInfo.hProcess);
    }
    v9 = 0;
    if ( v32 >= 0x10 )
      operator delete(Dst);
    v32 = 15;
    v31 = 0;
    LOBYTE(Dst) = 0;
    if ( v26 >= 0x10 )
      operator delete(v24);
    v26 = 15;
    v25 = 0;
    LOBYTE(v24) = 0;
    if ( v23 >= 0x10 )
      operator delete((void *)v21);
    v23 = 15;
    v22 = 0;
    LOBYTE(v21) = 0;
  }
  else
  {
    v9 = -1;
  }
  if ( v35 >= 0x10 )
    operator delete((void *)v33);
  v35 = 15;
  v34 = 0;
  LOBYTE(v33) = 0;
  if ( a7 >= 0x10 )
    operator delete(a2);
  return v9;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00409880) --------------------------------------------------------
int __stdcall sub_409880(int a1, int a2, LPCSTR lpSubKey, LPCSTR lpValueName)
{
  const CHAR *v4; // esi@1
  const CHAR *v5; // ebx@1
  LSTATUS v6; // esi@8
  int v8; // [sp+0h] [bp-4D0h]@0
  int v9; // [sp+4h] [bp-4CCh]@0
  int v10; // [sp+14h] [bp-4BCh]@4
  int v11; // [sp+18h] [bp-4B8h]@1
  char v12; // [sp+1Ch] [bp-4B4h]@5
  char v13; // [sp+20h] [bp-4B0h]@5
  char v14; // [sp+68h] [bp-468h]@11
  int v15; // [sp+B0h] [bp-420h]@1
  DWORD cbData; // [sp+B4h] [bp-41Ch]@1
  DWORD Type; // [sp+B8h] [bp-418h]@1
  HKEY phkResult; // [sp+BCh] [bp-414h]@1
  BYTE Data; // [sp+C0h] [bp-410h]@8
  int v20; // [sp+4CCh] [bp-4h]@1

  v4 = lpSubKey;
  v5 = lpValueName;
  v15 = 0;
  phkResult = 0;
  Type = 1;
  cbData = 1024;
  sub_40AD10((char *)&v11, v8, v9);
  v20 = 0;
  if ( *((_DWORD *)lpSubKey + 5) >= 0x10u )
    v4 = *(const CHAR **)lpSubKey;
  if ( RegOpenKeyA(HKEY_LOCAL_MACHINE, v4, &phkResult) )
  {
    *(_DWORD *)(a1 + 20) = 15;
    *(_DWORD *)(a1 + 16) = 0;
    *(_BYTE *)a1 = 0;
    sub_405CB0(a1, &unk_413610, 0);
    *(int *)((char *)&v11 + *(_DWORD *)(v11 + 4)) = (int)&off_413EDC;
    *(int *)((char *)&v10 + *(_DWORD *)(v11 + 4)) = *(_DWORD *)(v11 + 4) - 80;
  }
  else
  {
    if ( *((_DWORD *)lpValueName + 5) >= 0x10u )
      v5 = *(const CHAR **)lpValueName;
    v6 = RegQueryValueExA(phkResult, v5, 0, &Type, &Data, &cbData);
    RegCloseKey(phkResult);
    if ( !v6 )
    {
      sub_405DB0(a1, &Data);
      *(int *)((char *)&v11 + *(_DWORD *)(v11 + 4)) = (int)&off_413EDC;
      *(int *)((char *)&v10 + *(_DWORD *)(v11 + 4)) = *(_DWORD *)(v11 + 4) - 80;
      sub_40ADE0((int)&v12);
      *(int *)((char *)&v11 + *(_DWORD *)(v11 + 4)) = std::basic_ostream<char,std::char_traits<char>>::`vftable';
      *(int *)((char *)&v10 + *(_DWORD *)(v11 + 4)) = *(_DWORD *)(v11 + 4) - 8;
      goto LABEL_11;
    }
    sub_405DB0(a1, &unk_413610);
    *(int *)((char *)&v11 + *(_DWORD *)(v11 + 4)) = (int)&off_413EDC;
    *(int *)((char *)&v10 + *(_DWORD *)(v11 + 4)) = *(_DWORD *)(v11 + 4) - 80;
  }
  sub_40ADE0((int)&v12);
  std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(&v13);
LABEL_11:
  std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(&v14);
  return a1;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);
// 413EDC: using guessed type int (*off_413EDC)();

//----- (00409A80) --------------------------------------------------------
int __stdcall sub_409A80(int a1, int a2)
{
  int v2; // ebx@1
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // edi@1
  int v6; // ebx@2
  int *v7; // eax@15
  int v9; // [sp+20h] [bp-40h]@2
  unsigned int v10; // [sp+34h] [bp-2Ch]@10
  void *Dst; // [sp+38h] [bp-28h]@1
  int v12; // [sp+48h] [bp-18h]@1
  unsigned int v13; // [sp+4Ch] [bp-14h]@1
  int v14; // [sp+5Ch] [bp-4h]@1

  v2 = a1;
  *(_DWORD *)(a1 + 20) = 15;
  *(_DWORD *)(a1 + 16) = 0;
  *(_BYTE *)a1 = 0;
  sub_405CB0(a1, &unk_413610, 0);
  v14 = 0;
  v13 = 15;
  v12 = 0;
  LOBYTE(Dst) = 0;
  sub_405CB0((int)&Dst, &unk_413610, 0);
  v14 = 1;
  v4 = *(_DWORD *)a2;
  v5 = *(_DWORD *)(a2 + 4);
  if ( *(_DWORD *)a2 != v5 )
  {
    while ( 1 )
    {
      v6 = sub_409880((int)&v9, v3, (LPCSTR)v4, (LPCSTR)(v4 + 24));
      if ( &Dst != (void **)v6 )
      {
        if ( v13 >= 0x10 )
          operator delete(Dst);
        v13 = 15;
        v12 = 0;
        LOBYTE(Dst) = 0;
        if ( *(_DWORD *)(v6 + 20) >= 0x10u )
        {
          Dst = *(void **)v6;
          *(_DWORD *)v6 = 0;
        }
        else if ( *(_DWORD *)(v6 + 16) != -1 )
        {
          memmove(&Dst, (const void *)v6, *(_DWORD *)(v6 + 16) + 1);
        }
        v12 = *(_DWORD *)(v6 + 16);
        v13 = *(_DWORD *)(v6 + 20);
        *(_DWORD *)(v6 + 20) = 15;
        *(_DWORD *)(v6 + 16) = 0;
        *(_BYTE *)v6 = 0;
      }
      if ( v10 >= 0x10 )
        operator delete((void *)v9);
      v3 = v12;
      if ( v12 )
        break;
      v4 += 48;
      if ( v4 == v5 )
      {
        v2 = a1;
        goto LABEL_21;
      }
    }
    v7 = (int *)&Dst;
    if ( v13 >= 0x10 )
      v7 = (int *)Dst;
    if ( *((_BYTE *)v7 + v12 - 1) != 92 )
      sub_4108D0((int)&Dst, 1u, 92);
    v2 = a1;
    if ( (void **)a1 != &Dst )
      sub_405900((void *)a1, (int)&Dst, 0, 0xFFFFFFFF);
  }
LABEL_21:
  if ( v13 >= 0x10 )
    operator delete(Dst);
  return v2;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00409C40) --------------------------------------------------------
void __thiscall sub_409C40(char *this, int a2)
{
  char *v2; // edi@1
  const char *v3; // esi@1
  size_t v4; // ecx@3
  int v5; // ecx@5
  int v6; // edi@5
  int *v7; // eax@5
  bool v8; // zf@7
  int v9; // ecx@7
  int v10; // [sp+18h] [bp-2Ch]@2
  int v11; // [sp+28h] [bp-1Ch]@2
  unsigned int v12; // [sp+2Ch] [bp-18h]@2
  int v13; // [sp+40h] [bp-4h]@1

  v2 = this;
  v3 = (const char *)sub_4109BE(0x105u);
  v13 = 0;
  if ( GetTempPathA(0x105u, (LPSTR)v3) )
  {
    v12 = 15;
    v11 = 0;
    LOBYTE(v10) = 0;
    if ( *v3 )
      v4 = strlen(v3);
    else
      v4 = 0;
    sub_405CB0((int)&v10, (void *)v3, v4);
    LOBYTE(v13) = 1;
    sub_405640(&v10, a2, 0, 0xFFFFFFFF);
    v6 = (int)(v2 + 544);
    v7 = &v10;
    if ( v12 >= 0x10 )
      v7 = (int *)v10;
    v8 = sub_40C600(v6 + 4, (const char *)v7, 2, v5) == 0;
    v9 = *(_DWORD *)(*(_DWORD *)v6 + 4);
    if ( v8 )
      std::basic_ios<char,std::char_traits<char>>::setstate(v6 + v9, 2, 0);
    else
      std::basic_ios<char,std::char_traits<char>>::clear(v6 + v9, 0, 0);
    if ( v12 >= 0x10 )
      operator delete((void *)v10);
    v12 = 15;
    v11 = 0;
    LOBYTE(v10) = 0;
  }
  operator delete[]((void *)v3);
}
// 4130DC: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::setstate(_DWORD, _DWORD, _DWORD);
// 4130E0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::clear(_DWORD, _DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413208: using guessed type void __cdecl operator delete[](void *);

//----- (00409D70) --------------------------------------------------------
void __thiscall sub_409D70(char *this, int a2)
{
  char *v2; // esi@1
  int v3; // [sp+8h] [bp-2Ch]@1
  int v4; // [sp+18h] [bp-1Ch]@1
  unsigned int v5; // [sp+1Ch] [bp-18h]@1
  int v6; // [sp+30h] [bp-4h]@1

  v2 = this;
  v5 = 15;
  v4 = 0;
  LOBYTE(v3) = 0;
  sub_405CB0((int)&v3, "CNCOnline_Log.txt", 0x11u);
  v6 = 0;
  sub_409C40(v2, (int)&v3);
  if ( v5 >= 0x10 )
    operator delete((void *)v3);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00409E00) --------------------------------------------------------
void __thiscall sub_409E00(_DWORD *this, char a2, int Dst, int a4, int a5, int a6, int a7, int a8)
{
  _DWORD *v8; // edi@1
  int *v9; // ebx@2
  int v10; // eax@9
  const CHAR *v11; // eax@10
  LPCSTR lpOutputString; // [sp+10h] [bp-2Ch]@2
  unsigned int v13; // [sp+24h] [bp-18h]@6
  int v14; // [sp+38h] [bp-4h]@1

  v8 = this;
  v14 = 0;
  if ( a2 )
  {
    v9 = sub_403A30(&lpOutputString, "ERROR: ", (int)&Dst);
    if ( &Dst != v9 )
    {
      if ( (unsigned int)a8 >= 0x10 )
        operator delete((void *)Dst);
      a8 = 15;
      a7 = 0;
      LOBYTE(Dst) = 0;
      sub_4057A0(&Dst, v9);
    }
    if ( v13 >= 0x10 )
      operator delete((void *)lpOutputString);
  }
  if ( v8[157] )
  {
    v10 = sub_40E270((int)(v8 + 136), (int)&Dst);
    std::basic_ostream<char,std::char_traits<char>>::operator<<(v10, std::endl);
  }
  else
  {
    sub_403A30(&lpOutputString, "T3AO: ", (int)&Dst);
    v11 = (const CHAR *)&lpOutputString;
    if ( v13 >= 0x10 )
      v11 = lpOutputString;
    OutputDebugStringA(v11);
    if ( v13 >= 0x10 )
      operator delete((void *)lpOutputString);
  }
  if ( (unsigned int)a8 >= 0x10 )
    operator delete((void *)Dst);
}
// 4130A8: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::operator<<(_DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00409F20) --------------------------------------------------------
void __thiscall sub_409F20(_DWORD *this, void *Src, int a3)
{
  _DWORD *v3; // edi@1
  size_t v4; // ecx@2
  char v5; // [sp-18h] [bp-28h]@1
  int v6; // [sp-14h] [bp-24h]@4
  int v7; // [sp-10h] [bp-20h]@4
  int v8; // [sp-Ch] [bp-1Ch]@4
  int v9; // [sp-8h] [bp-18h]@1
  int v10; // [sp-4h] [bp-14h]@1

  v3 = this;
  v10 = 15;
  v9 = 0;
  v5 = 0;
  if ( *(_BYTE *)Src )
    v4 = strlen((const char *)Src);
  else
    v4 = 0;
  sub_405CB0((int)&v5, Src, v4);
  sub_409E00(v3, 0, *(int *)&v5, v6, v7, v8, v9, v10);
}

//----- (00409F80) --------------------------------------------------------
#error "409FF9: positive sp value has been found (funcsize=38)"

//----- (0040A000) --------------------------------------------------------
void __thiscall sub_40A000(_DWORD *this, void *Src)
{
  _DWORD *v2; // edi@1
  bool v3; // zf@1
  size_t v4; // edx@2
  char v5; // [sp-18h] [bp-54h]@4
  int v6; // [sp-14h] [bp-50h]@4
  int v7; // [sp-10h] [bp-4Ch]@4
  int v8; // [sp-Ch] [bp-48h]@4
  int v9; // [sp-8h] [bp-44h]@4
  int v10; // [sp-4h] [bp-40h]@4
  int v11; // [sp+10h] [bp-2Ch]@1
  int v12; // [sp+20h] [bp-1Ch]@1
  unsigned int v13; // [sp+24h] [bp-18h]@1
  int v14; // [sp+38h] [bp-4h]@4

  v2 = this;
  v13 = 15;
  v3 = *(_BYTE *)Src == 0;
  v12 = 0;
  LOBYTE(v11) = 0;
  if ( v3 )
    v4 = 0;
  else
    v4 = strlen((const char *)Src);
  sub_405CB0((int)&v11, Src, v4);
  v14 = 0;
  v10 = 15;
  v9 = 0;
  v5 = 0;
  sub_405900(&v5, (int)&v11, 0, 0xFFFFFFFF);
  sub_409E00(v2, 1, *(int *)&v5, v6, v7, v8, v9, v10);
  if ( v13 >= 0x10 )
    operator delete((void *)v11);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040A0C0) --------------------------------------------------------
void __thiscall sub_40A0C0(_DWORD *this, LPCSTR lpText, int a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // esi@1
  const CHAR *v8; // eax@1
  char v9; // [sp-18h] [bp-30h]@3
  int v10; // [sp-14h] [bp-2Ch]@3
  int v11; // [sp-10h] [bp-28h]@3
  int v12; // [sp-Ch] [bp-24h]@3
  int v13; // [sp-8h] [bp-20h]@3
  signed int v14; // [sp-4h] [bp-1Ch]@1
  int v15; // [sp+14h] [bp-4h]@1

  v7 = this;
  v15 = 0;
  v14 = 16;
  v8 = (const CHAR *)&lpText;
  if ( (unsigned int)a7 >= 0x10 )
    v8 = lpText;
  MessageBoxA(0, v8, 0, v14);
  v14 = 15;
  v13 = 0;
  v9 = 0;
  sub_405900(&v9, (int)&lpText, 0, 0xFFFFFFFF);
  sub_409E00(v7, 1, *(int *)&v9, v10, v11, v12, v13, v14);
  if ( (unsigned int)a7 >= 0x10 )
    operator delete((void *)lpText);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040A160) --------------------------------------------------------
void __thiscall sub_40A160(_DWORD *this, int a2)
{
  _DWORD *v2; // esi@1
  char v3; // [sp-18h] [bp-24h]@1
  int v4; // [sp-14h] [bp-20h]@1
  int v5; // [sp-10h] [bp-1Ch]@1
  int v6; // [sp-Ch] [bp-18h]@1
  int v7; // [sp-8h] [bp-14h]@1
  int v8; // [sp-4h] [bp-10h]@1

  v2 = this;
  v8 = 15;
  v7 = 0;
  v3 = 0;
  sub_405CB0((int)&v3, "CA public key patching routine failed.", 0x26u);
  sub_40A0C0(v2, *(LPCSTR *)&v3, v4, v5, v6, v7, v8);
}

//----- (0040A1A0) --------------------------------------------------------
void *__stdcall sub_40A1A0(void *Dst)
{
  DWORD v1; // eax@1
  DWORD v2; // ecx@2
  void *v3; // eax@3
  int v4; // ecx@3
  CHAR Buffer[4]; // [sp+8h] [bp-24h]@2
  void *Src; // [sp+Ch] [bp-20h]@3
  int v8; // [sp+1Ch] [bp-10h]@3
  unsigned int v9; // [sp+20h] [bp-Ch]@3

  v1 = GetLastError();
  if ( v1 && (v2 = FormatMessageA(0x1300u, 0, v1, 0x400u, Buffer, 0, 0)) != 0 )
  {
    v3 = *(void **)Buffer;
    v4 = *(_DWORD *)Buffer + v2;
    v9 = 15;
    v8 = 0;
    LOBYTE(Src) = 0;
    if ( *(_DWORD *)Buffer != v4 )
    {
      sub_405CB0((int)&Src, *(void **)Buffer, v4 - *(_DWORD *)Buffer);
      v3 = *(void **)Buffer;
    }
    LocalFree(v3);
    sub_405730(Dst, &Src);
    if ( v9 >= 0x10 )
    {
      operator delete(Src);
      return Dst;
    }
  }
  else
  {
    *((_DWORD *)Dst + 5) = 15;
    *((_DWORD *)Dst + 4) = 0;
    *(_BYTE *)Dst = 0;
  }
  return Dst;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040A270) --------------------------------------------------------
int __thiscall sub_40A270(void *this, void *Src)
{
  int result; // eax@2

  if ( *(_BYTE *)Src )
    result = sub_405CB0((int)this, Src, strlen((const char *)Src));
  else
    result = sub_405CB0((int)this, Src, 0);
  return result;
}

//----- (0040A2B0) --------------------------------------------------------
int __thiscall sub_40A2B0(_DWORD *this, void *Src)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // ecx@1
  int v5; // esi@1
  unsigned int v6; // ecx@2
  _DWORD *v7; // edx@2
  unsigned int v8; // ebx@4
  unsigned int v9; // eax@7
  int v10; // eax@9
  bool v11; // sf@9
  signed int v12; // eax@11
  _DWORD *v13; // eax@16
  _DWORD *v14; // eax@16
  void *v15; // edi@20
  unsigned int v17; // [sp+10h] [bp-4Ch]@2
  int v18; // [sp+14h] [bp-48h]@16
  _DWORD *v19; // [sp+18h] [bp-44h]@16
  int v20; // [sp+1Ch] [bp-40h]@16
  void *v21; // [sp+20h] [bp-3Ch]@5
  _DWORD *v22; // [sp+24h] [bp-38h]@1
  void *Dst; // [sp+28h] [bp-34h]@16
  int v24; // [sp+38h] [bp-24h]@20
  unsigned int v25; // [sp+3Ch] [bp-20h]@18
  void *v26; // [sp+40h] [bp-1Ch]@16
  _DWORD *v27; // [sp+44h] [bp-18h]@17
  int v28; // [sp+48h] [bp-14h]@17
  int v29; // [sp+58h] [bp-4h]@16

  v2 = this;
  v22 = this;
  v3 = sub_402E60(this, (int)Src);
  v5 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v6 = *(_DWORD *)(v3 + 32);
  v7 = (_DWORD *)(v3 + 16);
  v17 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v7 = (_DWORD *)*v7;
  v8 = *((_DWORD *)Src + 4);
  if ( *((_DWORD *)Src + 5) < 0x10u )
    v21 = Src;
  else
    v21 = *(void **)Src;
  v9 = v6;
  if ( v8 < v6 )
    v9 = v8;
  v10 = sub_4055E0((int)v7, (int)v21, v9);
  v11 = v10 < 0;
  if ( !v10 )
  {
    v4 = v17;
    if ( v8 >= v17 )
      v12 = v8 != v17;
    else
      v12 = -1;
    v11 = v12 < 0;
  }
  if ( v11 )
  {
    v2 = v22;
LABEL_16:
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v29 = 0;
    v13 = sub_40E460(&Dst, Src, (int)&v18, v4);
    LOBYTE(v29) = 1;
    v14 = sub_40EAC0(v2, v13);
    sub_40EAF0((int)v2, (int *)&v22, v5, (int)(v14 + 4), (int)v14);
    v5 = (int)v22;
    if ( v26 )
    {
      sub_40F240((int)v26, v27);
      operator delete(v26);
      v26 = 0;
      v27 = 0;
      v28 = 0;
    }
    if ( v25 >= 0x10 )
      operator delete(Dst);
    v15 = (void *)v18;
    v25 = 15;
    v24 = 0;
    LOBYTE(Dst) = 0;
    if ( v18 )
    {
      sub_40F240(v18, v19);
      operator delete(v15);
    }
  }
  return v5 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040A430) --------------------------------------------------------
int __thiscall sub_40A430(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // esi@1
  unsigned int v5; // ecx@2
  _DWORD *v6; // edx@2
  unsigned int v7; // ebx@4
  unsigned int v8; // eax@7
  int v9; // eax@9
  bool v10; // sf@9
  signed int v11; // eax@11
  _DWORD *v12; // eax@16
  unsigned int v14; // [sp+10h] [bp-4Ch]@2
  int v15; // [sp+20h] [bp-3Ch]@5
  _DWORD *v16; // [sp+24h] [bp-38h]@1
  void *Src; // [sp+28h] [bp-34h]@16
  int v18; // [sp+38h] [bp-24h]@16
  unsigned int v19; // [sp+3Ch] [bp-20h]@16
  void *v20; // [sp+40h] [bp-1Ch]@16
  _DWORD *v21; // [sp+44h] [bp-18h]@16
  int v22; // [sp+48h] [bp-14h]@16
  int v23; // [sp+58h] [bp-4h]@16

  v2 = this;
  v16 = this;
  v3 = sub_402E60(this, a2);
  v4 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v5 = *(_DWORD *)(v3 + 32);
  v6 = (_DWORD *)(v3 + 16);
  v14 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v6 = (_DWORD *)*v6;
  v7 = *(_DWORD *)(a2 + 16);
  if ( *(_DWORD *)(a2 + 20) < 0x10u )
    v15 = a2;
  else
    v15 = *(_DWORD *)a2;
  v8 = *(_DWORD *)(v3 + 32);
  if ( v7 < v5 )
    v8 = *(_DWORD *)(a2 + 16);
  v9 = sub_4055E0((int)v6, v15, v8);
  v10 = v9 < 0;
  if ( !v9 )
  {
    if ( v7 >= v14 )
      v11 = v7 != v14;
    else
      v11 = -1;
    v10 = v11 < 0;
  }
  if ( v10 )
  {
    v2 = v16;
LABEL_16:
    v23 = 0;
    v19 = 15;
    v18 = 0;
    LOBYTE(Src) = 0;
    sub_405900(&Src, a2, 0, 0xFFFFFFFF);
    v20 = 0;
    v21 = 0;
    v22 = 0;
    LOBYTE(v23) = 1;
    v12 = sub_40EAC0(v2, &Src);
    sub_40EAF0((int)v2, (int *)&v16, v4, (int)(v12 + 4), (int)v12);
    v4 = (int)v16;
    if ( v20 )
    {
      sub_40F240((int)v20, v21);
      operator delete(v20);
      v20 = 0;
      v21 = 0;
      v22 = 0;
    }
    if ( v19 >= 0x10 )
      operator delete(Src);
  }
  return v4 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040A5C0) --------------------------------------------------------
int __thiscall sub_40A5C0(_DWORD *this, void *Src)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // ecx@1
  int v5; // esi@1
  unsigned int v6; // ecx@2
  _DWORD *v7; // edx@2
  unsigned int v8; // ebx@4
  unsigned int v9; // eax@7
  int v10; // eax@9
  bool v11; // sf@9
  signed int v12; // eax@11
  _DWORD *v13; // eax@16
  _DWORD *v14; // eax@16
  void *v15; // edi@20
  unsigned int v17; // [sp+10h] [bp-4Ch]@2
  int v18; // [sp+14h] [bp-48h]@16
  int v19; // [sp+18h] [bp-44h]@16
  int v20; // [sp+1Ch] [bp-40h]@16
  void *v21; // [sp+20h] [bp-3Ch]@5
  _DWORD *v22; // [sp+24h] [bp-38h]@1
  void *Dst; // [sp+28h] [bp-34h]@16
  int v24; // [sp+38h] [bp-24h]@20
  unsigned int v25; // [sp+3Ch] [bp-20h]@18
  void *v26; // [sp+40h] [bp-1Ch]@16
  int v27; // [sp+44h] [bp-18h]@17
  int v28; // [sp+48h] [bp-14h]@17
  int v29; // [sp+58h] [bp-4h]@16

  v2 = this;
  v22 = this;
  v3 = sub_402E60(this, (int)Src);
  v5 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v6 = *(_DWORD *)(v3 + 32);
  v7 = (_DWORD *)(v3 + 16);
  v17 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v7 = (_DWORD *)*v7;
  v8 = *((_DWORD *)Src + 4);
  if ( *((_DWORD *)Src + 5) < 0x10u )
    v21 = Src;
  else
    v21 = *(void **)Src;
  v9 = v6;
  if ( v8 < v6 )
    v9 = v8;
  v10 = sub_4055E0((int)v7, (int)v21, v9);
  v11 = v10 < 0;
  if ( !v10 )
  {
    v4 = v17;
    if ( v8 >= v17 )
      v12 = v8 != v17;
    else
      v12 = -1;
    v11 = v12 < 0;
  }
  if ( v11 )
  {
    v2 = v22;
LABEL_16:
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v29 = 0;
    v13 = sub_40E460(&Dst, Src, (int)&v18, v4);
    LOBYTE(v29) = 1;
    v14 = sub_40EAC0(v2, v13);
    sub_40ED20((int)v2, (int *)&v22, v5, (int)(v14 + 4), (int)v14);
    v5 = (int)v22;
    if ( v26 )
    {
      sub_40DB30((int)v26, v27);
      operator delete(v26);
      v26 = 0;
      v27 = 0;
      v28 = 0;
    }
    if ( v25 >= 0x10 )
      operator delete(Dst);
    v15 = (void *)v18;
    v25 = 15;
    v24 = 0;
    LOBYTE(Dst) = 0;
    if ( v18 )
    {
      sub_40DB30(v18, v19);
      operator delete(v15);
    }
  }
  return v5 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040A740) --------------------------------------------------------
int __thiscall sub_40A740(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // esi@1
  unsigned int v5; // ecx@2
  _DWORD *v6; // edx@2
  unsigned int v7; // ebx@4
  unsigned int v8; // eax@7
  int v9; // eax@9
  bool v10; // sf@9
  signed int v11; // eax@11
  _DWORD *v12; // eax@16
  unsigned int v14; // [sp+10h] [bp-4Ch]@2
  int v15; // [sp+20h] [bp-3Ch]@5
  _DWORD *v16; // [sp+24h] [bp-38h]@1
  void *Src; // [sp+28h] [bp-34h]@16
  int v18; // [sp+38h] [bp-24h]@16
  unsigned int v19; // [sp+3Ch] [bp-20h]@16
  void *v20; // [sp+40h] [bp-1Ch]@16
  int v21; // [sp+44h] [bp-18h]@16
  int v22; // [sp+48h] [bp-14h]@16
  int v23; // [sp+58h] [bp-4h]@16

  v2 = this;
  v16 = this;
  v3 = sub_402E60(this, a2);
  v4 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v5 = *(_DWORD *)(v3 + 32);
  v6 = (_DWORD *)(v3 + 16);
  v14 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v6 = (_DWORD *)*v6;
  v7 = *(_DWORD *)(a2 + 16);
  if ( *(_DWORD *)(a2 + 20) < 0x10u )
    v15 = a2;
  else
    v15 = *(_DWORD *)a2;
  v8 = *(_DWORD *)(v3 + 32);
  if ( v7 < v5 )
    v8 = *(_DWORD *)(a2 + 16);
  v9 = sub_4055E0((int)v6, v15, v8);
  v10 = v9 < 0;
  if ( !v9 )
  {
    if ( v7 >= v14 )
      v11 = v7 != v14;
    else
      v11 = -1;
    v10 = v11 < 0;
  }
  if ( v10 )
  {
    v2 = v16;
LABEL_16:
    v23 = 0;
    v19 = 15;
    v18 = 0;
    LOBYTE(Src) = 0;
    sub_405900(&Src, a2, 0, 0xFFFFFFFF);
    v20 = 0;
    v21 = 0;
    v22 = 0;
    LOBYTE(v23) = 1;
    v12 = sub_40EAC0(v2, &Src);
    sub_40ED20((int)v2, (int *)&v16, v4, (int)(v12 + 4), (int)v12);
    v4 = (int)v16;
    if ( v20 )
    {
      sub_40DB30((int)v20, v21);
      operator delete(v20);
      v20 = 0;
      v21 = 0;
      v22 = 0;
    }
    if ( v19 >= 0x10 )
      operator delete(Src);
  }
  return v4 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040A8D0) --------------------------------------------------------
int __thiscall sub_40A8D0(_DWORD *this, void *Src)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // ecx@1
  int v5; // esi@1
  unsigned int v6; // ecx@2
  _DWORD *v7; // edx@2
  unsigned int v8; // ebx@4
  unsigned int v9; // eax@7
  int v10; // eax@9
  bool v11; // sf@9
  signed int v12; // eax@11
  void *v13; // eax@16
  _DWORD *v14; // eax@16
  unsigned int v16; // [sp+14h] [bp-68h]@2
  void *v17; // [sp+18h] [bp-64h]@5
  _DWORD *v18; // [sp+1Ch] [bp-60h]@1
  void *Dst; // [sp+20h] [bp-5Ch]@16
  int v20; // [sp+30h] [bp-4Ch]@20
  unsigned int v21; // [sp+34h] [bp-48h]@18
  void *v22; // [sp+38h] [bp-44h]@17
  int v23; // [sp+48h] [bp-34h]@18
  unsigned int v24; // [sp+4Ch] [bp-30h]@16
  void *v25; // [sp+50h] [bp-2Ch]@16
  int v26; // [sp+60h] [bp-1Ch]@16
  unsigned int v27; // [sp+64h] [bp-18h]@16
  int v28; // [sp+78h] [bp-4h]@16

  v2 = this;
  v18 = this;
  v3 = sub_402E60(this, (int)Src);
  v5 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v6 = *(_DWORD *)(v3 + 32);
  v7 = (_DWORD *)(v3 + 16);
  v16 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v7 = (_DWORD *)*v7;
  v8 = *((_DWORD *)Src + 4);
  if ( *((_DWORD *)Src + 5) < 0x10u )
    v17 = Src;
  else
    v17 = *(void **)Src;
  v9 = *(_DWORD *)(v3 + 32);
  if ( v8 < v6 )
    v9 = *((_DWORD *)Src + 4);
  v10 = sub_4055E0((int)v7, (int)v17, v9);
  v11 = v10 < 0;
  if ( !v10 )
  {
    v4 = v16;
    if ( v8 >= v16 )
      v12 = v8 != v16;
    else
      v12 = -1;
    v11 = v12 < 0;
  }
  if ( v11 )
  {
    v2 = v18;
LABEL_16:
    v27 = 15;
    v26 = 0;
    LOBYTE(v25) = 0;
    v28 = 0;
    v13 = sub_40E510(&Dst, Src, &v25, v4);
    LOBYTE(v28) = 1;
    v14 = sub_403E00(v2, v13);
    sub_403E30((int)v2, &v18, v5, (int)(v14 + 4), (int)v14);
    v5 = (int)v18;
    if ( v24 >= 0x10 )
      operator delete(v22);
    v24 = 15;
    v23 = 0;
    LOBYTE(v22) = 0;
    if ( v21 >= 0x10 )
      operator delete(Dst);
    v21 = 15;
    v20 = 0;
    LOBYTE(Dst) = 0;
    if ( v27 >= 0x10 )
      operator delete(v25);
  }
  return v5 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040AA30) --------------------------------------------------------
int __thiscall sub_40AA30(_DWORD *this, void *Src)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // ecx@1
  int v5; // esi@1
  bool v6; // cf@2
  unsigned int v7; // ecx@2
  _DWORD *v8; // edx@2
  unsigned int v9; // ebx@4
  unsigned int v10; // eax@7
  int v11; // eax@9
  bool v12; // sf@9
  signed int v13; // eax@11
  _DWORD *v14; // eax@16
  _DWORD *v15; // eax@16
  int v17; // [sp+10h] [bp-4Ch]@16
  int v18; // [sp+14h] [bp-48h]@16
  int v19; // [sp+18h] [bp-44h]@16
  unsigned int v20; // [sp+1Ch] [bp-40h]@2
  void *v21; // [sp+20h] [bp-3Ch]@5
  _DWORD *v22; // [sp+24h] [bp-38h]@1
  void *Dst; // [sp+28h] [bp-34h]@16
  int v24; // [sp+38h] [bp-24h]@20
  unsigned int v25; // [sp+3Ch] [bp-20h]@18
  void *v26; // [sp+40h] [bp-1Ch]@16
  int v27; // [sp+44h] [bp-18h]@17
  int v28; // [sp+48h] [bp-14h]@17
  int v29; // [sp+58h] [bp-4h]@16

  v2 = this;
  v22 = this;
  v3 = sub_402E60(this, (int)Src);
  v5 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v6 = *(_DWORD *)(v3 + 36) < 0x10u;
  v7 = *(_DWORD *)(v3 + 32);
  v8 = (_DWORD *)(v3 + 16);
  v20 = *(_DWORD *)(v3 + 32);
  if ( !v6 )
    v8 = (_DWORD *)*v8;
  v9 = *((_DWORD *)Src + 4);
  if ( *((_DWORD *)Src + 5) < 0x10u )
    v21 = Src;
  else
    v21 = *(void **)Src;
  v10 = v7;
  if ( v9 < v7 )
    v10 = v9;
  v11 = sub_4055E0((int)v8, (int)v21, v10);
  v12 = v11 < 0;
  if ( !v11 )
  {
    v4 = v20;
    if ( v9 >= v20 )
      v13 = v9 != v20;
    else
      v13 = -1;
    v12 = v13 < 0;
  }
  if ( v12 )
  {
    v2 = v22;
LABEL_16:
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v29 = 0;
    v14 = sub_40E460(&Dst, Src, (int)&v17, v4);
    LOBYTE(v29) = 1;
    v15 = sub_40EAC0(v2, v14);
    sub_40EF50((int)v2, &v22, v5, (int)(v15 + 4), (int)v15);
    v5 = (int)v22;
    if ( v26 )
    {
      operator delete(v26);
      v26 = 0;
      v27 = 0;
      v28 = 0;
    }
    if ( v25 >= 0x10 )
      operator delete(Dst);
    v25 = 15;
    v24 = 0;
    LOBYTE(Dst) = 0;
    if ( v17 )
      operator delete((void *)v17);
  }
  return v5 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040AB90) --------------------------------------------------------
int __thiscall sub_40AB90(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx@1
  int v3; // eax@1
  int v4; // esi@1
  unsigned int v5; // ecx@2
  _DWORD *v6; // edx@2
  unsigned int v7; // ebx@4
  unsigned int v8; // eax@7
  int v9; // eax@9
  bool v10; // sf@9
  signed int v11; // eax@11
  _DWORD *v12; // eax@16
  unsigned int v14; // [sp+10h] [bp-4Ch]@2
  int v15; // [sp+20h] [bp-3Ch]@5
  _DWORD *v16; // [sp+24h] [bp-38h]@1
  void *Src; // [sp+28h] [bp-34h]@16
  int v18; // [sp+38h] [bp-24h]@16
  unsigned int v19; // [sp+3Ch] [bp-20h]@16
  void *v20; // [sp+40h] [bp-1Ch]@16
  int v21; // [sp+44h] [bp-18h]@16
  int v22; // [sp+48h] [bp-14h]@16
  int v23; // [sp+58h] [bp-4h]@16

  v2 = this;
  v16 = this;
  v3 = sub_402E60(this, a2);
  v4 = v3;
  if ( v3 == *v2 )
    goto LABEL_16;
  v5 = *(_DWORD *)(v3 + 32);
  v6 = (_DWORD *)(v3 + 16);
  v14 = *(_DWORD *)(v3 + 32);
  if ( *(_DWORD *)(v3 + 36) >= 0x10u )
    v6 = (_DWORD *)*v6;
  v7 = *(_DWORD *)(a2 + 16);
  if ( *(_DWORD *)(a2 + 20) < 0x10u )
    v15 = a2;
  else
    v15 = *(_DWORD *)a2;
  v8 = *(_DWORD *)(v3 + 32);
  if ( v7 < v5 )
    v8 = *(_DWORD *)(a2 + 16);
  v9 = sub_4055E0((int)v6, v15, v8);
  v10 = v9 < 0;
  if ( !v9 )
  {
    if ( v7 >= v14 )
      v11 = v7 != v14;
    else
      v11 = -1;
    v10 = v11 < 0;
  }
  if ( v10 )
  {
    v2 = v16;
LABEL_16:
    v23 = 0;
    v19 = 15;
    v18 = 0;
    LOBYTE(Src) = 0;
    sub_405900(&Src, a2, 0, 0xFFFFFFFF);
    v20 = 0;
    v21 = 0;
    v22 = 0;
    LOBYTE(v23) = 1;
    v12 = sub_40EAC0(v2, &Src);
    sub_40EF50((int)v2, &v16, v4, (int)(v12 + 4), (int)v12);
    v4 = (int)v16;
    if ( v20 )
    {
      operator delete(v20);
      v20 = 0;
      v21 = 0;
      v22 = 0;
    }
    if ( v19 >= 0x10 )
      operator delete(Src);
  }
  return v4 + 40;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040AD10) --------------------------------------------------------
char *__thiscall sub_40AD10(char *this, int a2, int a3)
{
  char *v3; // edi@1

  v3 = this;
  *(_DWORD *)this = &unk_413EF4;
  std::basic_ios<char,std::char_traits<char>>::basic_ios<char,std::char_traits<char>>(this + 80);
  std::basic_ostream<char,std::char_traits<char>>::basic_ostream<char,std::char_traits<char>>(v3, v3 + 4, 0, 0);
  *(_DWORD *)&v3[*(_DWORD *)(*(_DWORD *)v3 + 4)] = &off_413EDC;
  *(_DWORD *)&v3[*(_DWORD *)(*(_DWORD *)v3 + 4) - 4] = *(_DWORD *)(*(_DWORD *)v3 + 4) - 80;
  std::basic_streambuf<char,std::char_traits<char>>::basic_streambuf<char,std::char_traits<char>>(v3 + 4);
  *((_DWORD *)v3 + 1) = &off_413E9C;
  *((_DWORD *)v3 + 15) = 0;
  *((_DWORD *)v3 + 16) = 4;
  return v3;
}
// 4130B4: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::basic_streambuf<char,std::char_traits<char>>(_DWORD);
// 413100: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::basic_ios<char,std::char_traits<char>>(_DWORD);
// 413104: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::basic_ostream<char,std::char_traits<char>>(_DWORD, _DWORD, _DWORD, _DWORD);
// 413E9C: using guessed type int (__stdcall *off_413E9C)(char);
// 413EDC: using guessed type int (*off_413EDC)();

//----- (0040ADC0) --------------------------------------------------------
void *__thiscall sub_40ADC0(void *this, void *Dst)
{
  sub_40C4A0((int)this + 4, Dst);
  return Dst;
}

//----- (0040ADE0) --------------------------------------------------------
int __thiscall sub_40ADE0(int this)
{
  int v1; // esi@1
  bool v2; // zf@1

  v1 = this;
  v2 = (*(_BYTE *)(this + 60) & 1) == 0;
  *(_DWORD *)this = &off_413E9C;
  if ( !v2 )
    operator delete(**(void ***)(this + 12));
  **(_DWORD **)(v1 + 12) = 0;
  **(_DWORD **)(v1 + 28) = 0;
  **(_DWORD **)(v1 + 44) = 0;
  **(_DWORD **)(v1 + 16) = 0;
  **(_DWORD **)(v1 + 32) = 0;
  **(_DWORD **)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 60) &= 0xFFFFFFFE;
  *(_DWORD *)(v1 + 56) = 0;
  return std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(v1);
}
// 413120: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413E9C: using guessed type int (__stdcall *off_413E9C)(char);

//----- (0040AE50) --------------------------------------------------------
signed int __thiscall sub_40AE50(int this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  unsigned int v5; // edx@6
  unsigned int v6; // edi@7
  int v7; // ecx@8
  unsigned int v8; // edx@9
  unsigned int v9; // edi@13
  unsigned int v10; // ecx@15
  _BYTE *v11; // eax@22
  _BYTE *v12; // ebx@22
  _DWORD *v13; // eax@24
  void *v14; // edi@24
  bool v15; // zf@24
  _DWORD *v16; // eax@24
  int v17; // edx@27
  int v18; // edx@27
  int v19; // edx@29
  int v20; // ecx@29
  int v21; // ecx@29
  int v22; // [sp+4h] [bp-8h]@22
  void *v23; // [sp+8h] [bp-4h]@22

  v2 = this;
  v3 = *(_DWORD *)(this + 60);
  if ( v3 & 2 )
    return -1;
  if ( a2 == -1 )
    return 0;
  if ( v3 & 8 )
  {
    v5 = **(_DWORD **)(this + 32);
    if ( v5 )
    {
      v6 = *(_DWORD *)(this + 56);
      if ( v5 < v6 )
      {
        v7 = v5 + **(_DWORD **)(this + 48);
        **(_DWORD **)(v2 + 32) = v6;
        **(_DWORD **)(v2 + 48) = v7 - v6;
      }
    }
  }
  v8 = **(_DWORD **)(v2 + 32);
  if ( !v8 )
    goto LABEL_35;
  if ( v8 < v8 + **(_DWORD **)(v2 + 48) )
  {
    *(_BYTE *)std::basic_streambuf<char,std::char_traits<char>>::_Pninc(v2) = a2;
    return a2;
  }
  if ( v8 )
    v9 = v8 + **(_DWORD **)(v2 + 48) - **(_DWORD **)(v2 + 12);
  else
LABEL_35:
    v9 = 0;
  v10 = v9 >> 1;
  if ( v9 >> 1 >= 0x20 )
  {
    if ( !v10 )
      return -1;
  }
  else
  {
    v10 = 32;
  }
  do
  {
    if ( 0x7FFFFFFF - v10 >= v9 )
      break;
    v10 >>= 1;
  }
  while ( v10 );
  if ( !v10 )
    return -1;
  v22 = v10 + v9;
  v11 = sub_405A20(v10 + v9);
  v12 = v11;
  v23 = **(void ***)(v2 + 12);
  if ( v9 && (memcpy(v11, **(const void ***)(v2 + 12), v9), v9) )
  {
    v14 = v23;
    *(_DWORD *)(v2 + 56) += v12 - (_BYTE *)v23;
    v17 = **(_DWORD **)(v2 + 32) - (_DWORD)v23;
    **(_DWORD **)(v2 + 16) += v12 - (_BYTE *)v23;
    v18 = (int)&v12[v17];
    **(_DWORD **)(v2 + 32) = v18;
    **(_DWORD **)(v2 + 48) = &v12[v22] - v18;
    if ( *(_BYTE *)(v2 + 60) & 4 )
    {
      **(_DWORD **)(v2 + 12) = v12;
      **(_DWORD **)(v2 + 28) = 0;
      **(_DWORD **)(v2 + 44) = v12;
    }
    else
    {
      v19 = **(_DWORD **)(v2 + 32);
      v20 = **(_DWORD **)(v2 + 28) - (_DWORD)v23;
      **(_DWORD **)(v2 + 12) = v12;
      v21 = (int)&v12[v20];
      **(_DWORD **)(v2 + 28) = v21;
      **(_DWORD **)(v2 + 44) = v19 - v21 + 1;
    }
  }
  else
  {
    v13 = *(_DWORD **)(v2 + 16);
    v14 = v23;
    *(_DWORD *)(v2 + 56) = v12;
    *v13 = v12;
    **(_DWORD **)(v2 + 32) = v12;
    **(_DWORD **)(v2 + 48) = v22;
    v15 = (*(_BYTE *)(v2 + 60) & 4) == 0;
    **(_DWORD **)(v2 + 12) = v12;
    v16 = *(_DWORD **)(v2 + 28);
    if ( v15 )
    {
      *v16 = v12;
      **(_DWORD **)(v2 + 44) = 1;
    }
    else
    {
      *v16 = 0;
      **(_DWORD **)(v2 + 44) = v12;
    }
  }
  if ( *(_BYTE *)(v2 + 60) & 1 )
    operator delete(v14);
  *(_DWORD *)(v2 + 60) |= 1u;
  *(_BYTE *)std::basic_streambuf<char,std::char_traits<char>>::_Pninc(v2) = a2;
  return a2;
}
// 4130FC: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Pninc(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040B020) --------------------------------------------------------
signed int __thiscall sub_40B020(int this, signed int a2)
{
  unsigned int v2; // esi@1
  signed int result; // eax@7

  v2 = **(_DWORD **)(this + 28);
  if ( !v2 || v2 <= **(_DWORD **)(this + 12) || a2 != -1 && (_BYTE)a2 != *(_BYTE *)(v2 - 1) && *(_BYTE *)(this + 60) & 2 )
  {
    result = -1;
  }
  else
  {
    ++**(_DWORD **)(this + 44);
    --**(_DWORD **)(this + 28);
    if ( a2 == -1 )
    {
      result = 0;
    }
    else
    {
      ***(_BYTE ***)(this + 28) = a2;
      result = a2;
    }
  }
  return result;
}

//----- (0040B080) --------------------------------------------------------
signed int __thiscall sub_40B080(int this)
{
  _BYTE **v1; // esi@1
  _BYTE *v2; // edx@1
  signed int result; // eax@2
  _DWORD *v4; // edi@3
  unsigned int v5; // eax@6

  v1 = *(_BYTE ***)(this + 28);
  v2 = *v1;
  if ( *v1 )
  {
    v4 = *(_DWORD **)(this + 44);
    if ( v2 >= &v2[*v4] )
    {
      if ( *(_BYTE *)(this + 60) & 4
        || (v5 = **(_DWORD **)(this + 32)) == 0
        || v5 <= (unsigned int)v2 && *(_DWORD *)(this + 56) <= (unsigned int)v2 )
      {
        result = -1;
      }
      else
      {
        if ( *(_DWORD *)(this + 56) < v5 )
          *(_DWORD *)(this + 56) = v5;
        *v4 = *(_DWORD *)(this + 56) - (_DWORD)*v1;
        result = ***(_BYTE ***)(this + 28);
      }
    }
    else
    {
      result = *v2;
    }
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (0040B0E0) --------------------------------------------------------
int __thiscall sub_40B0E0(int this, int a2, __int64 a3, int a4, char a5)
{
  int v5; // ebx@1
  int *v6; // edx@1
  unsigned int v7; // eax@1
  int v8; // esi@5
  int v9; // edi@7
  unsigned int v10; // esi@7
  int v11; // ecx@15
  int v12; // ecx@16
  _DWORD *v13; // edx@17
  int v14; // ecx@18
  int v15; // eax@18
  unsigned int v16; // edx@20
  int v17; // ecx@29
  int v18; // ecx@30
  int result; // eax@33
  int v20; // [sp+Ch] [bp-4h]@5

  v5 = this;
  v6 = *(int **)(this + 32);
  v7 = *v6;
  if ( *v6 && *(_DWORD *)(this + 56) < v7 )
    *(_DWORD *)(this + 56) = v7;
  if ( !(a5 & 1) || (v8 = **(_DWORD **)(this + 28), (v20 = v8) == 0) )
  {
    if ( a5 & 2 && (v16 = *v6) != 0 )
    {
      if ( a4 == 2 )
      {
        v9 = (unsigned __int64)(*(_DWORD *)(this + 56) - **(_DWORD **)(this + 12) + a3) >> 32;
        v10 = *(_DWORD *)(this + 56) - **(_DWORD **)(this + 12) + a3;
      }
      else if ( a4 == 1 )
      {
        v9 = (unsigned __int64)((signed int)(v16 - **(_DWORD **)(this + 12)) + a3) >> 32;
        v10 = v16 - **(_DWORD **)(this + 12) + a3;
      }
      else if ( a4 )
      {
        v10 = std::_BADOFF;
        v9 = HIDWORD(std::_BADOFF);
      }
      else
      {
        v9 = HIDWORD(a3);
        v10 = a3;
      }
      if ( v9 >= 0 )
      {
        v17 = **(_DWORD **)(this + 12);
        if ( __PAIR__(v9, v10) <= *(_DWORD *)(v5 + 56) - v17 )
        {
          v18 = v10 + v17 - v16;
          **(_DWORD **)(v5 + 48) -= v18;
          **(_DWORD **)(v5 + 32) += v18;
          goto LABEL_33;
        }
      }
    }
    else
    {
      v9 = HIDWORD(a3);
      v10 = a3;
      if ( !a3 )
        goto LABEL_33;
    }
LABEL_32:
    v10 = std::_BADOFF;
    v9 = HIDWORD(std::_BADOFF);
    goto LABEL_33;
  }
  if ( a4 != 2 )
  {
    if ( a4 == 1 )
    {
      if ( !(a5 & 2) )
      {
        v9 = (unsigned __int64)(v8 - **(_DWORD **)(this + 12) + a3) >> 32;
        v10 = v8 - **(_DWORD **)(this + 12) + a3;
        goto LABEL_14;
      }
    }
    else if ( !a4 )
    {
      v9 = HIDWORD(a3);
      v10 = a3;
      goto LABEL_14;
    }
    v10 = std::_BADOFF;
    v9 = HIDWORD(std::_BADOFF);
    goto LABEL_14;
  }
  v9 = (unsigned __int64)(*(_DWORD *)(this + 56) - **(_DWORD **)(this + 12) + a3) >> 32;
  v10 = *(_DWORD *)(this + 56) - **(_DWORD **)(this + 12) + a3;
LABEL_14:
  if ( v9 < 0 )
    goto LABEL_32;
  v11 = **(_DWORD **)(this + 12);
  if ( __PAIR__(v9, v10) > *(_DWORD *)(v5 + 56) - v11 )
    goto LABEL_32;
  v12 = v10 + v11 - v20;
  **(_DWORD **)(v5 + 44) -= v12;
  **(_DWORD **)(v5 + 28) += v12;
  if ( a5 & 2 )
  {
    v13 = *(_DWORD **)(v5 + 32);
    if ( *v13 )
    {
      v14 = *v13 + **(_DWORD **)(v5 + 48);
      v15 = **(_DWORD **)(v5 + 28);
      *v13 = v15;
      **(_DWORD **)(v5 + 48) = v14 - v15;
    }
  }
LABEL_33:
  result = a2;
  *(_DWORD *)(a2 + 4) = v9;
  *(_DWORD *)a2 = v10;
  *(_DWORD *)(a2 + 8) = 0;
  *(_DWORD *)(a2 + 12) = 0;
  *(_DWORD *)(a2 + 16) = 0;
  return result;
}
// 413124: using guessed type const __int64 std::_BADOFF;

//----- (0040B2B0) --------------------------------------------------------
int __thiscall sub_40B2B0(int this, int a2, __int64 a3, __int64 a4, int a5, int a6, char a7)
{
  int v7; // ebx@1
  unsigned int v8; // esi@1
  int v9; // edi@1
  unsigned int v10; // eax@1
  unsigned int v11; // ecx@4
  int v12; // eax@4
  int v13; // ecx@9
  int v14; // ecx@10
  _DWORD *v15; // edx@11
  int v16; // ecx@12
  int v17; // eax@12
  int v18; // ecx@19
  int v19; // ecx@20
  int result; // eax@23
  int v21; // [sp+14h] [bp-4h]@7

  v7 = (unsigned __int64)(a3 + a4) >> 32;
  v8 = a3 + a4;
  v9 = this;
  v10 = **(_DWORD **)(this + 32);
  if ( v10 && *(_DWORD *)(this + 56) < v10 )
    *(_DWORD *)(this + 56) = v10;
  v11 = std::_BADOFF;
  v12 = HIDWORD(std::_BADOFF);
  if ( v8 != (_DWORD)std::_BADOFF || v7 != v12 )
  {
    if ( a7 & 1 )
    {
      v21 = **(_DWORD **)(v9 + 28);
      if ( v21 )
      {
        if ( v7 >= 0 )
        {
          v13 = **(_DWORD **)(v9 + 12);
          if ( __PAIR__(v7, v8) <= *(_DWORD *)(v9 + 56) - v13 )
          {
            v14 = v8 + v13 - v21;
            **(_DWORD **)(v9 + 44) -= v14;
            **(_DWORD **)(v9 + 28) += v14;
            if ( a7 & 2 )
            {
              v15 = *(_DWORD **)(v9 + 32);
              if ( *v15 )
              {
                v16 = *v15 + **(_DWORD **)(v9 + 48);
                v17 = **(_DWORD **)(v9 + 28);
                *v15 = v17;
                **(_DWORD **)(v9 + 48) = v16 - v17;
              }
            }
            goto LABEL_23;
          }
          goto LABEL_13;
        }
        goto LABEL_14;
      }
      v12 = HIDWORD(std::_BADOFF);
    }
    if ( !(a7 & 2) || !**(_DWORD **)(v9 + 32) )
    {
      v7 = v12;
      goto LABEL_22;
    }
    if ( v7 >= 0 )
    {
      v18 = **(_DWORD **)(v9 + 12);
      if ( __PAIR__(v7, v8) <= *(_DWORD *)(v9 + 56) - v18 )
      {
        v19 = v8 + v18 - **(_DWORD **)(v9 + 32);
        **(_DWORD **)(v9 + 48) -= v19;
        **(_DWORD **)(v9 + 32) += v19;
        goto LABEL_23;
      }
LABEL_13:
      v11 = std::_BADOFF;
    }
LABEL_14:
    v7 = HIDWORD(std::_BADOFF);
LABEL_22:
    v8 = v11;
  }
LABEL_23:
  result = a2;
  *(_DWORD *)a2 = v8;
  *(_DWORD *)(a2 + 4) = v7;
  *(_DWORD *)(a2 + 8) = 0;
  *(_DWORD *)(a2 + 12) = 0;
  *(_DWORD *)(a2 + 16) = 0;
  return result;
}
// 413124: using guessed type const __int64 std::_BADOFF;

//----- (0040B3E0) --------------------------------------------------------
char *__thiscall sub_40B3E0(char *this, int a2)
{
  char *v2; // edi@1

  v2 = this;
  *(_DWORD *)this = &unk_413E90;
  std::basic_ios<char,std::char_traits<char>>::basic_ios<char,std::char_traits<char>>(this + 96);
  std::basic_ostream<char,std::char_traits<char>>::basic_ostream<char,std::char_traits<char>>(v2, v2 + 4, 0, 0);
  *(_DWORD *)&v2[*(_DWORD *)(*(_DWORD *)v2 + 4)] = &off_413E84;
  *(_DWORD *)&v2[*(_DWORD *)(*(_DWORD *)v2 + 4) - 4] = *(_DWORD *)(*(_DWORD *)v2 + 4) - 96;
  std::basic_streambuf<char,std::char_traits<char>>::basic_streambuf<char,std::char_traits<char>>(v2 + 4);
  *((_DWORD *)v2 + 1) = &off_413E44;
  v2[80] = 0;
  v2[73] = 0;
  std::basic_streambuf<char,std::char_traits<char>>::_Init(v2 + 4);
  *((_DWORD *)v2 + 19) = dword_4188D0;
  *((_DWORD *)v2 + 21) = 0;
  *((_DWORD *)v2 + 17) = 0;
  return v2;
}
// 4130B4: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::basic_streambuf<char,std::char_traits<char>>(_DWORD);
// 413100: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::basic_ios<char,std::char_traits<char>>(_DWORD);
// 413104: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::basic_ostream<char,std::char_traits<char>>(_DWORD, _DWORD, _DWORD, _DWORD);
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 413E44: using guessed type int (__stdcall *off_413E44)(char);
// 413E84: using guessed type int (*off_413E84)();
// 4188D0: using guessed type int dword_4188D0;

//----- (0040B4B0) --------------------------------------------------------
int __thiscall sub_40B4B0(int this)
{
  int v1; // edi@1
  int v2; // ebx@2
  int result; // eax@7

  v1 = this;
  if ( *(_DWORD *)(this + 84) )
  {
    v2 = this + 4;
    if ( !sub_40C710((_DWORD *)(this + 4)) )
      v2 = 0;
    if ( fclose(*(FILE **)(v1 + 84)) )
      v2 = 0;
  }
  else
  {
    v2 = 0;
  }
  *(_BYTE *)(v1 + 80) = 0;
  *(_BYTE *)(v1 + 73) = 0;
  std::basic_streambuf<char,std::char_traits<char>>::_Init(v1 + 4);
  result = dword_4188D0;
  *(_DWORD *)(v1 + 84) = 0;
  *(_DWORD *)(v1 + 76) = result;
  *(_DWORD *)(v1 + 68) = 0;
  if ( !v2 )
    result = std::basic_ios<char,std::char_traits<char>>::setstate(v1 + *(_DWORD *)(*(_DWORD *)v1 + 4), 2, 0);
  return result;
}
// 4130DC: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::setstate(_DWORD, _DWORD, _DWORD);
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 4188D0: using guessed type int dword_4188D0;

//----- (0040B530) --------------------------------------------------------
int __thiscall sub_40B530(int this)
{
  int v1; // esi@1
  bool v2; // zf@1
  _DWORD *v3; // edx@2
  int v4; // ecx@3
  int v5; // eax@7

  v1 = this;
  v2 = *(_DWORD *)(this + 80) == 0;
  *(_DWORD *)this = &off_413E44;
  if ( !v2 )
  {
    v3 = *(_DWORD **)(this + 12);
    if ( *v3 == this + 68 )
    {
      v4 = *(_DWORD *)(this + 60);
      *v3 = *(_DWORD *)(v1 + 56);
      **(_DWORD **)(v1 + 28) = v4;
      **(_DWORD **)(v1 + 44) = 0;
    }
  }
  if ( *(_BYTE *)(v1 + 76) )
  {
    if ( *(_DWORD *)(v1 + 80) )
    {
      sub_40C710((_DWORD *)v1);
      fclose(*(FILE **)(v1 + 80));
    }
    *(_BYTE *)(v1 + 76) = 0;
    *(_BYTE *)(v1 + 69) = 0;
    std::basic_streambuf<char,std::char_traits<char>>::_Init(v1);
    v5 = dword_4188D0;
    *(_DWORD *)(v1 + 80) = 0;
    *(_DWORD *)(v1 + 72) = v5;
    *(_DWORD *)(v1 + 64) = 0;
  }
  return std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(v1);
}
// 413120: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(_DWORD);
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 413E44: using guessed type int (__stdcall *off_413E44)(char);
// 4188D0: using guessed type int dword_4188D0;

//----- (0040B5B0) --------------------------------------------------------
int __thiscall sub_40B5B0(int this)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 80);
  if ( result )
    result = lock_file(*(_DWORD *)(this + 80));
  return result;
}
// 41321C: using guessed type int __cdecl lock_file(_DWORD);

//----- (0040B5C0) --------------------------------------------------------
int __thiscall sub_40B5C0(int this)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 80);
  if ( result )
    result = unlock_file(*(_DWORD *)(this + 80));
  return result;
}
// 413220: using guessed type int __cdecl unlock_file(_DWORD);

//----- (0040B5D0) --------------------------------------------------------
signed int __thiscall sub_40B5D0(int this, signed int a2)
{
  int v2; // esi@1
  signed int v3; // ebx@1
  unsigned int v5; // ecx@3
  _DWORD *v6; // edx@4
  _DWORD *v7; // ecx@5
  _BYTE *v8; // edx@5
  int v9; // eax@11
  signed int v10; // ecx@11
  char *v11; // edx@15
  void *v12; // ecx@17
  int v13; // eax@19
  _BYTE *v14; // eax@21
  size_t v15; // edi@23
  const void *v16; // eax@24
  int v17; // eax@32
  signed int v18; // ecx@32
  int v19; // [sp-2h] [bp-54h]@0
  int v20; // [sp+2h] [bp-50h]@0
  char v21; // [sp+1Dh] [bp-35h]@14
  _BYTE *v22; // [sp+1Eh] [bp-34h]@19
  char *v23; // [sp+22h] [bp-30h]@19
  void *Str; // [sp+26h] [bp-2Ch]@14
  unsigned int v25; // [sp+36h] [bp-1Ch]@19
  unsigned int v26; // [sp+3Ah] [bp-18h]@15
  int v27; // [sp+4Eh] [bp-4h]@14

  v2 = this;
  v3 = a2;
  if ( a2 == -1 )
    return 0;
  v5 = **(_DWORD **)(this + 32);
  if ( v5 )
  {
    v6 = *(_DWORD **)(v2 + 48);
    if ( v5 < *v6 + v5 )
    {
      --*v6;
      v7 = *(_DWORD **)(v2 + 32);
      v8 = (_BYTE *)(*v7)++;
      *v8 = a2;
      return v3;
    }
  }
  if ( !*(_DWORD *)(v2 + 80) )
    return -1;
  if ( **(_DWORD **)(v2 + 12) == v2 + 68 )
    std::basic_streambuf<char,std::char_traits<char>>::setg(
      v2,
      *(_DWORD *)(v2 + 56),
      *(_DWORD *)(v2 + 60),
      *(_DWORD *)(v2 + 60));
  if ( *(_DWORD *)(v2 + 64) )
  {
    v21 = a2;
    sub_4107B0((int)&Str, v19, v20);
    v27 = 0;
    while ( 1 )
    {
      v11 = (char *)&Str;
      if ( v26 >= 0x10 )
        v11 = (char *)Str;
      v12 = &Str;
      if ( v26 >= 0x10 )
        v12 = Str;
      v13 = std::codecvt<char,char,int>::out(*(_DWORD *)(v2 + 64), v2 + 72, &v21, &v22, &v23, v12, &v11[v25], &v22);
      if ( v13 < 0 )
        goto LABEL_35;
      if ( v13 > 1 )
        break;
      v14 = &Str;
      if ( v26 >= 0x10 )
        v14 = Str;
      v15 = v22 - v14;
      if ( v22 != v14 )
      {
        v16 = &Str;
        if ( v26 >= 0x10 )
          v16 = Str;
        if ( v15 != fwrite(v16, 1u, v15, *(FILE **)(v2 + 80)) )
          goto LABEL_35;
      }
      *(_BYTE *)(v2 + 69) = 1;
      if ( v23 != &v21 )
        goto LABEL_36;
      if ( !v15 )
      {
        if ( v25 >= 0x20 )
          goto LABEL_35;
        sub_4108D0((int)&Str, 8u, 0);
      }
    }
    if ( v13 != 3 )
    {
LABEL_35:
      v3 = -1;
      goto LABEL_36;
    }
    v17 = fputc(v21, *(FILE **)(v2 + 80));
    v18 = -1;
    if ( v17 != -1 )
      v18 = a2;
    v3 = v18;
LABEL_36:
    if ( v26 >= 0x10 )
      operator delete(Str);
    return v3;
  }
  v9 = fputc((char)a2, *(FILE **)(v2 + 80));
  v10 = -1;
  if ( v9 != -1 )
    v10 = a2;
  return v10;
}
// 413098: using guessed type int __thiscall std::codecvt<char,char,int>::out(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 41309C: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::setg(_DWORD, _DWORD, _DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040B7C0) --------------------------------------------------------
signed int __thiscall sub_40B7C0(int this, signed int a2)
{
  int v2; // esi@1
  unsigned int v3; // ecx@1
  signed int result; // eax@5

  v2 = this;
  v3 = **(_DWORD **)(this + 28);
  if ( !v3 || **(_DWORD **)(v2 + 12) >= v3 || a2 != -1 && *(_BYTE *)(v3 - 1) != a2 )
  {
    if ( *(_DWORD *)(v2 + 80) && a2 != -1 )
    {
      if ( !*(_DWORD *)(v2 + 64) && ungetc((unsigned __int8)a2, *(FILE **)(v2 + 80)) != -1 )
        return a2;
      if ( **(_DWORD **)(v2 + 28) != v2 + 68 )
      {
        *(_BYTE *)(v2 + 68) = a2;
        sub_40C8A0(v2);
        return a2;
      }
    }
    return -1;
  }
  ++**(_DWORD **)(v2 + 44);
  --**(_DWORD **)(v2 + 28);
  result = 0;
  if ( a2 != -1 )
    result = a2;
  return result;
}

//----- (0040B850) --------------------------------------------------------
int __thiscall sub_40B850(int this)
{
  int v1; // esi@1
  _BYTE *v2; // ecx@1
  int result; // eax@3
  int v4; // edi@4

  v1 = this;
  v2 = **(_BYTE ***)(this + 28);
  if ( v2 && v2 < &v2[**(_DWORD **)(v1 + 44)] )
  {
    result = *v2;
  }
  else
  {
    result = (*(int (__thiscall **)(int))(*(_DWORD *)v1 + 28))(v1);
    v4 = result;
    if ( result != -1 )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v1 + 16))(v1, result);
      result = v4;
    }
  }
  return result;
}

//----- (0040B890) --------------------------------------------------------
int __thiscall sub_40B890(int this)
{
  int v1; // edi@1
  unsigned int v2; // ecx@1
  _DWORD *v3; // edx@2
  _DWORD *v4; // ecx@3
  int v5; // edx@3
  int result; // eax@3
  int i; // eax@11
  char *v8; // esi@12
  void *v9; // edx@14
  int v10; // eax@16
  const void *v11; // eax@20
  signed int v12; // esi@23
  int v13; // eax@24
  void *v14; // ecx@25
  char *v15; // esi@34
  int v16; // esi@36
  int v17; // eax@37
  unsigned __int8 Dst; // [sp+1Dh] [bp-35h]@16
  int v19; // [sp+1Eh] [bp-34h]@16
  char *v20; // [sp+22h] [bp-30h]@16
  void *Src; // [sp+26h] [bp-2Ch]@11
  unsigned int v22; // [sp+36h] [bp-1Ch]@11
  unsigned int v23; // [sp+3Ah] [bp-18h]@11
  int v24; // [sp+4Eh] [bp-4h]@11

  v1 = this;
  v2 = **(_DWORD **)(this + 28);
  if ( v2 )
  {
    v3 = *(_DWORD **)(v1 + 44);
    if ( v2 < *v3 + v2 )
    {
      --*v3;
      v4 = *(_DWORD **)(v1 + 28);
      v5 = (*v4)++;
      return *(_BYTE *)v5;
    }
  }
  if ( !*(_DWORD *)(v1 + 80) )
    return -1;
  if ( **(_DWORD **)(v1 + 12) == v1 + 68 )
    std::basic_streambuf<char,std::char_traits<char>>::setg(
      v1,
      *(_DWORD *)(v1 + 56),
      *(_DWORD *)(v1 + 60),
      *(_DWORD *)(v1 + 60));
  if ( *(_DWORD *)(v1 + 64) )
  {
    v23 = 15;
    v22 = 0;
    LOBYTE(Src) = 0;
    v24 = 0;
    for ( i = fgetc(*(FILE **)(v1 + 80)); i != -1; i = fgetc(*(FILE **)(v1 + 80)) )
    {
      sub_4108D0((int)&Src, 1u, i);
      v8 = (char *)&Src;
      if ( v23 >= 0x10 )
        v8 = (char *)Src;
      v9 = &Src;
      if ( v23 >= 0x10 )
        v9 = Src;
      v10 = std::codecvt<char,char,int>::in(*(_DWORD *)(v1 + 64), v1 + 72, v9, &v8[v22], &v19, &Dst, &v19, &v20);
      if ( v10 < 0 )
        break;
      if ( v10 <= 1 )
      {
        v13 = v19;
        if ( (unsigned __int8 *)v20 != &Dst )
        {
          v15 = (char *)&Src;
          if ( v23 >= 0x10 )
            v15 = (char *)Src;
          v16 = (int)(&v15[v22] - v19);
          if ( v16 > 0 )
          {
            while ( 1 )
            {
              v17 = *(_BYTE *)(v16-- + v13 - 1);
              ungetc(v17, *(FILE **)(v1 + 80));
              if ( v16 <= 0 )
                break;
              v13 = v19;
            }
          }
          goto LABEL_23;
        }
        v14 = &Src;
        if ( v23 >= 0x10 )
          v14 = Src;
        sub_405860((char *)&Src, 0, v19 - (_DWORD)v14);
      }
      else
      {
        if ( v10 != 3 )
          break;
        if ( v22 >= 1 )
        {
          v11 = &Src;
          if ( v23 >= 0x10 )
            v11 = Src;
          memcpy_s(&Dst, 1u, v11, 1u);
LABEL_23:
          v12 = Dst;
          goto LABEL_30;
        }
      }
    }
    v12 = -1;
LABEL_30:
    if ( v23 >= 0x10 )
      operator delete(Src);
    result = v12;
  }
  else
  {
    result = fgetc(*(FILE **)(v1 + 80));
    if ( result == -1 )
      return -1;
    result = (unsigned __int8)result;
  }
  return result;
}
// 413094: using guessed type int __thiscall std::codecvt<char,char,int>::in(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 41309C: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::setg(_DWORD, _DWORD, _DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040BAB0) --------------------------------------------------------
int __thiscall sub_40BAB0(int this, int a2, int a3, int a4, int Origin, int a6)
{
  int v6; // esi@1
  unsigned int v7; // ebx@4
  int v8; // edi@4
  _DWORD *v9; // edx@12
  int v10; // ecx@13
  int result; // eax@14
  int v12; // ecx@14
  fpos_t Pos; // [sp+10h] [bp-8h]@11

  v6 = this;
  if ( **(_DWORD **)(this + 28) != this + 68 || Origin != 1 || *(_DWORD *)(this + 64) )
  {
    v7 = a4;
    v8 = a3;
  }
  else
  {
    v7 = (__PAIR__((unsigned int)a4, a3) - 1) >> 32;
    v8 = a3 - 1;
  }
  if ( !*(_DWORD *)(this + 80)
    || !sub_40C710((_DWORD *)this)
    || (v7 | v8 || Origin != 1) && fseeki64(*(FILE **)(v6 + 80), __PAIR__(v7, v8), Origin)
    || fgetpos(*(FILE **)(v6 + 80), &Pos) )
  {
    result = a2;
    *(_DWORD *)a2 = std::_BADOFF;
    *(_DWORD *)(a2 + 4) = HIDWORD(std::_BADOFF);
    *(_DWORD *)(a2 + 8) = 0;
    *(_DWORD *)(a2 + 12) = 0;
    *(_DWORD *)(a2 + 16) = 0;
  }
  else
  {
    v9 = *(_DWORD **)(v6 + 12);
    if ( *v9 == v6 + 68 )
    {
      v10 = *(_DWORD *)(v6 + 60);
      *v9 = *(_DWORD *)(v6 + 56);
      **(_DWORD **)(v6 + 28) = v10;
      **(_DWORD **)(v6 + 44) = 0;
    }
    result = a2;
    *(_QWORD *)(a2 + 8) = Pos;
    v12 = *(_DWORD *)(v6 + 72);
    *(_DWORD *)a2 = 0;
    *(_DWORD *)(a2 + 4) = 0;
    *(_DWORD *)(a2 + 16) = v12;
  }
  return result;
}
// 413124: using guessed type const __int64 std::_BADOFF;

//----- (0040BBC0) --------------------------------------------------------
int __thiscall sub_40BBC0(int this, int a2, __int64 Offset, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // esi@1
  int result; // eax@7
  int v10; // ecx@7
  fpos_t Pos; // [sp+10h] [bp-8h]@1

  v8 = this;
  Pos = __PAIR__(a5, a4);
  if ( !*(_DWORD *)(this + 80)
    || !sub_40C710((_DWORD *)this)
    || fsetpos(*(FILE **)(v8 + 80), &Pos)
    || Offset && fseeki64(*(FILE **)(v8 + 80), Offset, 1)
    || fgetpos(*(FILE **)(v8 + 80), &Pos) )
  {
    result = a2;
    *(_DWORD *)a2 = std::_BADOFF;
    *(_DWORD *)(a2 + 4) = HIDWORD(std::_BADOFF);
    *(_DWORD *)(a2 + 8) = 0;
    *(_DWORD *)(a2 + 12) = 0;
    *(_DWORD *)(a2 + 16) = 0;
  }
  else
  {
    *(_DWORD *)(v8 + 72) = a6;
    sub_40C870(v8);
    result = a2;
    *(_QWORD *)(a2 + 8) = Pos;
    v10 = *(_DWORD *)(v8 + 72);
    *(_DWORD *)a2 = 0;
    *(_DWORD *)(a2 + 4) = 0;
    *(_DWORD *)(a2 + 16) = v10;
  }
  return result;
}
// 413124: using guessed type const __int64 std::_BADOFF;

//----- (0040BCB0) --------------------------------------------------------
int __thiscall sub_40BCB0(int this, char *Buf, size_t Size, int a4)
{
  int v4; // esi@1
  FILE *v5; // ecx@1
  int v6; // eax@4
  int v7; // edi@7
  int v8; // eax@9
  int result; // eax@9

  v4 = this;
  v5 = *(FILE **)(this + 80);
  if ( !v5 || (Buf || __PAIR__(a4, Size) ? (v6 = 0) : (v6 = 4), setvbuf(v5, Buf, v6, Size)) )
  {
    result = 0;
  }
  else
  {
    v7 = *(_DWORD *)(v4 + 80);
    *(_BYTE *)(v4 + 76) = 1;
    *(_BYTE *)(v4 + 69) = 0;
    std::basic_streambuf<char,std::char_traits<char>>::_Init(v4);
    if ( v7 )
    {
      *(_DWORD *)(v4 + 12) = v7 + 8;
      *(_DWORD *)(v4 + 16) = v7 + 8;
      *(_DWORD *)(v4 + 28) = v7;
      *(_DWORD *)(v4 + 32) = v7;
      *(_DWORD *)(v4 + 44) = v7 + 4;
      *(_DWORD *)(v4 + 48) = v7 + 4;
    }
    v8 = dword_4188D0;
    *(_DWORD *)(v4 + 80) = v7;
    *(_DWORD *)(v4 + 72) = v8;
    *(_DWORD *)(v4 + 64) = 0;
    result = v4;
  }
  return result;
}
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 4188D0: using guessed type int dword_4188D0;

//----- (0040BD40) --------------------------------------------------------
signed int __thiscall sub_40BD40(_DWORD *this)
{
  _DWORD *v1; // esi@1
  signed int result; // eax@4

  v1 = this;
  if ( this[20] && (*(int (__stdcall **)(signed int))(*this + 12))(-1) != -1 && fflush((FILE *)v1[20]) < 0 )
    result = -1;
  else
    result = 0;
  return result;
}

//----- (0040BD70) --------------------------------------------------------
char __thiscall sub_40BD70(_DWORD *this, void *a2)
{
  _DWORD *v2; // esi@1
  std::codecvt_base *v3; // eax@1
  std::codecvt_base *v4; // edi@1
  char result; // al@1

  v2 = this;
  v3 = (std::codecvt_base *)sub_40E5E0(a2);
  v4 = v3;
  result = std::codecvt_base::always_noconv(v3);
  if ( result )
  {
    v2[16] = 0;
  }
  else
  {
    v2[16] = v4;
    result = std::basic_streambuf<char,std::char_traits<char>>::_Init(v2);
  }
  return result;
}
// 413130: using guessed type bool __thiscall std::codecvt_base::always_noconv(std::codecvt_base *__hidden this);
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);

//----- (0040BDB0) --------------------------------------------------------
void __thiscall sub_40BDB0(int this, void *Src)
{
  int v2; // esi@1
  unsigned int v3; // ecx@1
  unsigned int v4; // edx@3
  int v5; // edi@3
  void *v6; // ecx@5
  void *v7; // ecx@9

  v2 = this;
  v3 = *(_DWORD *)(this + 4);
  if ( (unsigned int)Src >= v3 || *(_DWORD *)v2 > (unsigned int)Src )
  {
    if ( v3 == *(_DWORD *)(v2 + 8) )
      sub_40C920(v2, v3);
    v7 = *(void **)(v2 + 4);
    if ( v7 )
      sub_405420(v7, Src, *(_DWORD *)(v2 + 4));
  }
  else
  {
    v4 = (signed int)((unsigned __int64)(715827883i64 * ((unsigned int)Src - *(_DWORD *)v2)) >> 32) >> 3;
    v5 = v4 + (v4 >> 31);
    if ( v3 == *(_DWORD *)(v2 + 8) )
      sub_40C920(v2, v3);
    v6 = *(void **)(v2 + 4);
    if ( v6 )
    {
      sub_405420(v6, (void *)(*(_DWORD *)v2 + 48 * v5), *(_DWORD *)(v2 + 4));
      *(_DWORD *)(v2 + 4) += 48;
      return;
    }
  }
  *(_DWORD *)(v2 + 4) += 48;
}

//----- (0040BE30) --------------------------------------------------------
void __thiscall sub_40BE30(int this, void *Src)
{
  int v2; // esi@1
  unsigned int v3; // ecx@1
  unsigned int v4; // edx@3
  int v5; // edi@3
  void *v6; // ecx@5
  void *v7; // ecx@9

  v2 = this;
  v3 = *(_DWORD *)(this + 4);
  if ( (unsigned int)Src >= v3 || *(_DWORD *)v2 > (unsigned int)Src )
  {
    if ( v3 == *(_DWORD *)(v2 + 8) )
      sub_40CA00(v2, v3);
    v7 = *(void **)(v2 + 4);
    if ( v7 )
      sub_405730(v7, Src);
  }
  else
  {
    v4 = (signed int)((unsigned __int64)(715827883i64 * ((unsigned int)Src - *(_DWORD *)v2)) >> 32) >> 2;
    v5 = v4 + (v4 >> 31);
    if ( v3 == *(_DWORD *)(v2 + 8) )
      sub_40CA00(v2, v3);
    v6 = *(void **)(v2 + 4);
    if ( v6 )
    {
      sub_405730(v6, (void *)(*(_DWORD *)v2 + 24 * v5));
      *(_DWORD *)(v2 + 4) += 24;
      return;
    }
  }
  *(_DWORD *)(v2 + 4) += 24;
}

//----- (0040BEB0) --------------------------------------------------------
unsigned int __thiscall sub_40BEB0(int this, unsigned int *a2)
{
  int v2; // esi@1
  unsigned int result; // eax@1
  int v4; // edi@3
  unsigned int *v5; // ecx@5
  unsigned int *v6; // ecx@9

  v2 = this;
  result = *(_DWORD *)(this + 4);
  if ( (unsigned int)a2 >= result || (this = *(_DWORD *)this, *(_DWORD *)v2 > (unsigned int)a2) )
  {
    if ( result == *(_DWORD *)(v2 + 8) )
      result = sub_402DF0(v2, this);
    v6 = *(unsigned int **)(v2 + 4);
    if ( v6 )
    {
      result = *a2;
      *v6 = *a2;
    }
  }
  else
  {
    v4 = ((signed int)a2 - this) >> 2;
    if ( result == *(_DWORD *)(v2 + 8) )
      result = sub_402DF0(v2, *(_DWORD *)v2);
    v5 = *(unsigned int **)(v2 + 4);
    if ( v5 )
    {
      result = *(_DWORD *)(*(_DWORD *)v2 + 4 * v4);
      *v5 = result;
      *(_DWORD *)(v2 + 4) += 4;
      return result;
    }
  }
  *(_DWORD *)(v2 + 4) += 4;
  return result;
}

//----- (0040BF20) --------------------------------------------------------
char *__thiscall sub_40BF20(char *this, const char *a2, int a3, int a4, int a5)
{
  char *v5; // edi@1
  int v6; // eax@1
  int v7; // ecx@1

  v5 = this;
  *(_DWORD *)this = &unk_413E34;
  std::basic_ios<char,std::char_traits<char>>::basic_ios<char,std::char_traits<char>>(this + 112);
  std::basic_istream<char,std::char_traits<char>>::basic_istream<char,std::char_traits<char>>(v5, v5 + 16, 0, 0);
  *(_DWORD *)&v5[*(_DWORD *)(*(_DWORD *)v5 + 4)] = off_413E28;
  *(_DWORD *)&v5[*(_DWORD *)(*(_DWORD *)v5 + 4) - 4] = *(_DWORD *)(*(_DWORD *)v5 + 4) - 112;
  std::basic_streambuf<char,std::char_traits<char>>::basic_streambuf<char,std::char_traits<char>>(v5 + 16);
  *((_DWORD *)v5 + 4) = &off_413E44;
  v5[92] = 0;
  v5[85] = 0;
  std::basic_streambuf<char,std::char_traits<char>>::_Init(v5 + 16);
  v6 = dword_4188D0;
  *((_DWORD *)v5 + 24) = 0;
  *((_DWORD *)v5 + 22) = v6;
  *((_DWORD *)v5 + 20) = 0;
  if ( !sub_40C600((int)(v5 + 16), a2, 1, v7) )
    std::basic_ios<char,std::char_traits<char>>::setstate(&v5[*(_DWORD *)(*(_DWORD *)v5 + 4)], 2, 0);
  return v5;
}
// 4130A0: using guessed type int __thiscall std::basic_istream<char,std::char_traits<char>>::basic_istream<char,std::char_traits<char>>(_DWORD, _DWORD, _DWORD, _DWORD);
// 4130B4: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::basic_streambuf<char,std::char_traits<char>>(_DWORD);
// 4130DC: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::setstate(_DWORD, _DWORD, _DWORD);
// 413100: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::basic_ios<char,std::char_traits<char>>(_DWORD);
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 413E28: using guessed type int (*off_413E28[2])();
// 413E44: using guessed type int (__stdcall *off_413E44)(char);
// 4188D0: using guessed type int dword_4188D0;

//----- (0040C020) --------------------------------------------------------
int __thiscall sub_40C020(int this)
{
  int v1; // edi@1
  int v2; // ebx@2
  int result; // eax@7

  v1 = this;
  if ( *(_DWORD *)(this + 96) )
  {
    v2 = this + 16;
    if ( !sub_40C710((_DWORD *)(this + 16)) )
      v2 = 0;
    if ( fclose(*(FILE **)(v1 + 96)) )
      v2 = 0;
  }
  else
  {
    v2 = 0;
  }
  *(_BYTE *)(v1 + 92) = 0;
  *(_BYTE *)(v1 + 85) = 0;
  std::basic_streambuf<char,std::char_traits<char>>::_Init(v1 + 16);
  result = dword_4188D0;
  *(_DWORD *)(v1 + 96) = 0;
  *(_DWORD *)(v1 + 88) = result;
  *(_DWORD *)(v1 + 80) = 0;
  if ( !v2 )
    result = std::basic_ios<char,std::char_traits<char>>::setstate(v1 + *(_DWORD *)(*(_DWORD *)v1 + 4), 2, 0);
  return result;
}
// 4130DC: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::setstate(_DWORD, _DWORD, _DWORD);
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 4188D0: using guessed type int dword_4188D0;

//----- (0040C0B0) --------------------------------------------------------
void __thiscall sub_40C0B0(int this)
{
  int v1; // esi@1
  int v2; // ecx@1

  v1 = this;
  v2 = *(_DWORD *)(this + 24);
  if ( v2 )
  {
    sub_40F240(v2, *(_DWORD **)(v1 + 28));
    operator delete(*(void **)(v1 + 24));
    *(_DWORD *)(v1 + 24) = 0;
    *(_DWORD *)(v1 + 28) = 0;
    *(_DWORD *)(v1 + 32) = 0;
  }
  if ( *(_DWORD *)(v1 + 20) >= 0x10u )
    operator delete(*(void **)v1);
  *(_DWORD *)(v1 + 20) = 15;
  *(_DWORD *)(v1 + 16) = 0;
  *(_BYTE *)v1 = 0;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040C190) --------------------------------------------------------
char *__thiscall sub_40C190(char *this, char a2)
{
  char *v2; // edi@1

  v2 = this - 80;
  *(_DWORD *)&v2[*(_DWORD *)(*((_DWORD *)this - 20) + 4)] = &off_413EDC;
  *(_DWORD *)&v2[*(_DWORD *)(*((_DWORD *)this - 20) + 4) - 4] = *(_DWORD *)(*((_DWORD *)this - 20) + 4) - 80;
  sub_40ADE0((int)(this - 76));
  std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(v2 + 8);
  std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v2 + 80);
  if ( a2 & 1 )
    operator delete(v2);
  return v2;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413EDC: using guessed type int (*off_413EDC)();

//----- (0040C1F0) --------------------------------------------------------
void *__thiscall sub_40C1F0(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_40ADE0((int)this);
  if ( a2 & 1 )
    operator delete(v2);
  return v2;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040C220) --------------------------------------------------------
char *__thiscall sub_40C220(char *this, char a2)
{
  char *v2; // edi@1

  v2 = this - 96;
  *(_DWORD *)&v2[*(_DWORD *)(*((_DWORD *)this - 24) + 4)] = &off_413E84;
  *(_DWORD *)&v2[*(_DWORD *)(*((_DWORD *)this - 24) + 4) - 4] = *(_DWORD *)(*((_DWORD *)this - 24) + 4) - 96;
  sub_40B530((int)(this - 92));
  std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(v2 + 8);
  std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v2 + 96);
  if ( a2 & 1 )
    operator delete(v2);
  return v2;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413E84: using guessed type int (*off_413E84)();

//----- (0040C280) --------------------------------------------------------
void *__thiscall sub_40C280(void *this, char a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_40B530((int)this);
  if ( a2 & 1 )
    operator delete(v2);
  return v2;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040C2B0) --------------------------------------------------------
char *__thiscall sub_40C2B0(char *this, char a2)
{
  char *v2; // edi@1

  v2 = this - 112;
  *(_DWORD *)&v2[*(_DWORD *)(*((_DWORD *)this - 28) + 4)] = off_413E28;
  *(_DWORD *)&v2[*(_DWORD *)(*((_DWORD *)this - 28) + 4) - 4] = *(_DWORD *)(*((_DWORD *)this - 28) + 4) - 112;
  sub_40B530((int)(this - 96));
  std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(v2 + 24);
  std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v2 + 112);
  if ( a2 & 1 )
    operator delete(v2);
  return v2;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 413128: using guessed type int __thiscall std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(_DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 413E28: using guessed type int (*off_413E28[2])();

//----- (0040C310) --------------------------------------------------------
int __thiscall sub_40C310(void *Buf, int a2, int a3, int a4)
{
  int result; // eax@2
  unsigned int v5; // edi@3
  size_t v6; // edi@5
  int v7; // esi@8
  void *v8; // eax@8
  _BYTE *v9; // ebx@8
  void *v10; // edx@9
  unsigned int v11; // ecx@9
  bool v12; // cf@11
  _DWORD *v13; // eax@21
  _DWORD *v14; // [sp+0h] [bp-8h]@1
  _BYTE *v15; // [sp+4h] [bp-4h]@7

  v14 = Buf;
  if ( a4 )
  {
    v5 = *((_DWORD *)Buf + 4);
    if ( v5 && a4 <= v5 )
    {
      v6 = 1 - a4 + v5;
      if ( *((_DWORD *)Buf + 5) >= 0x10u )
        Buf = *(void **)Buf;
      while ( 1 )
      {
        v15 = Buf;
        if ( !v6 )
          break;
        v7 = a2;
        v8 = memchr(Buf, *(_BYTE *)a2, v6);
        v9 = v8;
        if ( !v8 )
          break;
        v10 = v8;
        v11 = a4 - 4;
        if ( (unsigned int)a4 < 4 )
        {
LABEL_12:
          if ( v11 == -4 )
            goto LABEL_21;
        }
        else
        {
          while ( *(_DWORD *)v10 == *(_DWORD *)v7 )
          {
            v10 = (char *)v10 + 4;
            v7 += 4;
            v12 = v11 < 4;
            v11 -= 4;
            if ( v12 )
              goto LABEL_12;
          }
        }
        if ( *(_BYTE *)v10 == *(_BYTE *)v7
          && (v11 == -3
           || *((_BYTE *)v10 + 1) == *(_BYTE *)(v7 + 1)
           && (v11 == -2
            || *((_BYTE *)v10 + 2) == *(_BYTE *)(v7 + 2) && (v11 == -1 || *((_BYTE *)v10 + 3) == *(_BYTE *)(v7 + 3)))) )
        {
LABEL_21:
          v13 = v14;
          if ( v14[5] >= 0x10u )
            v13 = (_DWORD *)*v14;
          return v9 - (_BYTE *)v13;
        }
        v6 += v15 - (_BYTE *)v8 - 1;
        Buf = (char *)v8 + 1;
      }
    }
    result = -1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0040C400) --------------------------------------------------------
int *__thiscall sub_40C400(int this, int a2, int a3)
{
  int *v3; // esi@1
  int v4; // eax@1
  int v6; // [sp+0h] [bp-28h]@1
  int v7; // [sp+10h] [bp-18h]@1
  int v8; // [sp+14h] [bp-14h]@1
  int *v9; // [sp+18h] [bp-10h]@1
  int v10; // [sp+24h] [bp-4h]@1

  v9 = &v6;
  v3 = (int *)this;
  v7 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  sub_40DD40();
  *v3 = v4;
  v10 = 0;
  LOBYTE(v10) = 1;
  LOBYTE(v8) = 0;
  sub_40E6D0(v3, a2, v8);
  return v3;
}

//----- (0040C476) --------------------------------------------------------
void __usercall __noreturn sub_40C476(int a1@<ebp>)
{
  sub_40CB60(*(int ***)(a1 - 24), (int *)(a1 + 8), ***(_DWORD ***)(a1 - 24), **(int ***)(a1 - 24));
  CxxThrowException(0, 0);
}
// 411424: using guessed type int __cdecl CxxThrowException(_DWORD, _DWORD);

//----- (0040C4A0) --------------------------------------------------------
void *__thiscall sub_40C4A0(int this, void *Dst)
{
  int v2; // edx@1
  int v3; // ecx@1
  unsigned int v4; // eax@2
  unsigned int v5; // ecx@3
  int v6; // eax@5
  void *v7; // ST04_4@5
  int v9; // edi@8
  size_t v10; // ST08_4@9
  void *v11; // ST04_4@9
  unsigned int v12; // ecx@11
  void *Src; // [sp+Ch] [bp-20h]@5
  int v14; // [sp+1Ch] [bp-10h]@5
  unsigned int v15; // [sp+20h] [bp-Ch]@5

  v2 = this;
  v3 = *(_DWORD *)(this + 60);
  if ( v3 & 2 || (v4 = **(_DWORD **)(v2 + 32)) == 0 )
  {
    if ( v3 & 4 || (v9 = **(_DWORD **)(v2 + 28)) == 0 )
    {
      v15 = 15;
      v14 = 0;
      LOBYTE(Src) = 0;
      *((_DWORD *)Dst + 5) = 15;
      *((_DWORD *)Dst + 4) = 0;
      *(_BYTE *)Dst = 0;
      v12 = v15;
      if ( v15 >= 0x10 )
      {
        *(_DWORD *)Dst = Src;
      }
      else if ( v14 != -1 )
      {
        memmove(Dst, &Src, v14 + 1);
        v12 = v15;
      }
      *((_DWORD *)Dst + 4) = v14;
      *((_DWORD *)Dst + 5) = v12;
    }
    else
    {
      v10 = v9 + **(_DWORD **)(v2 + 44) - **(_DWORD **)(v2 + 12);
      v11 = **(void ***)(v2 + 12);
      v15 = 15;
      v14 = 0;
      LOBYTE(Src) = 0;
      sub_405CB0((int)&Src, v11, v10);
      sub_405730(Dst, &Src);
      if ( v15 >= 0x10 )
      {
        operator delete(Src);
        return Dst;
      }
    }
  }
  else
  {
    v5 = *(_DWORD *)(v2 + 56);
    if ( v5 < v4 )
      v5 = **(_DWORD **)(v2 + 32);
    v6 = **(_DWORD **)(v2 + 16);
    v7 = **(void ***)(v2 + 16);
    v15 = 15;
    v14 = 0;
    LOBYTE(Src) = 0;
    sub_405CB0((int)&Src, v7, v5 - v6);
    sub_405730(Dst, &Src);
    if ( v15 >= 0x10 )
    {
      operator delete(Src);
      return Dst;
    }
  }
  return Dst;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040C600) --------------------------------------------------------
int __thiscall sub_40C600(int this, const char *a2, int a3, int a4)
{
  int v4; // esi@1
  struct _iobuf *v5; // edi@2
  void *v6; // eax@3
  std::codecvt_base *v7; // edi@3
  void (__thiscall ***v8)(_DWORD, _DWORD); // eax@7
  int result; // eax@9

  v4 = this;
  if ( *(_DWORD *)(this + 80) || (v5 = std::_Fiopen(a2, a3, 64)) == 0 )
  {
    result = 0;
  }
  else
  {
    *(_BYTE *)(v4 + 76) = 1;
    *(_BYTE *)(v4 + 69) = 0;
    std::basic_streambuf<char,std::char_traits<char>>::_Init(v4);
    *(_DWORD *)(v4 + 44) = (char *)v5 + 4;
    *(_DWORD *)(v4 + 48) = (char *)v5 + 4;
    *(_DWORD *)(v4 + 72) = dword_4188D0;
    *(_DWORD *)(v4 + 12) = (char *)v5 + 8;
    *(_DWORD *)(v4 + 16) = (char *)v5 + 8;
    *(_DWORD *)(v4 + 28) = v5;
    *(_DWORD *)(v4 + 32) = v5;
    *(_DWORD *)(v4 + 80) = v5;
    *(_DWORD *)(v4 + 64) = 0;
    v6 = (void *)std::basic_streambuf<char,std::char_traits<char>>::getloc(v4, &a3);
    v7 = (std::codecvt_base *)sub_40E5E0(v6);
    if ( std::codecvt_base::always_noconv(v7) )
    {
      *(_DWORD *)(v4 + 64) = 0;
    }
    else
    {
      *(_DWORD *)(v4 + 64) = v7;
      std::basic_streambuf<char,std::char_traits<char>>::_Init(v4);
    }
    if ( a3 )
    {
      v8 = (void (__thiscall ***)(_DWORD, _DWORD))(*(int (**)(void))(*(_DWORD *)a3 + 8))();
      if ( v8 )
        (**v8)(v8, 1);
    }
    result = v4;
  }
  return result;
}
// 41312C: using guessed type struct _iobuf *__cdecl std::_Fiopen(const char *, _DWORD, _DWORD);
// 413130: using guessed type bool __thiscall std::codecvt_base::always_noconv(std::codecvt_base *__hidden this);
// 413168: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::_Init(_DWORD);
// 41316C: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::getloc(_DWORD, _DWORD);
// 4188D0: using guessed type int dword_4188D0;

//----- (0040C710) --------------------------------------------------------
char __thiscall sub_40C710(_DWORD *this)
{
  _DWORD *v1; // esi@1
  int v3; // edi@6
  char *v4; // edx@7
  void *v5; // ecx@9
  int v6; // eax@11
  int v7; // eax@12
  char v8; // bl@14
  _BYTE *v9; // eax@16
  size_t v10; // edi@18
  const void *v11; // eax@19
  bool v12; // zf@23
  int v13; // [sp-8h] [bp-4Ch]@0
  int v14; // [sp-4h] [bp-48h]@3
  _BYTE *v15; // [sp+14h] [bp-30h]@11
  void *Str; // [sp+18h] [bp-2Ch]@5
  int v17; // [sp+28h] [bp-1Ch]@11
  unsigned int v18; // [sp+2Ch] [bp-18h]@7
  int v19; // [sp+40h] [bp-4h]@5

  v1 = this;
  if ( !this[16] || !*((_BYTE *)this + 69) )
    return 1;
  if ( (*(int (__stdcall **)(signed int))(*this + 12))(-1) == -1 )
    return 0;
  sub_4107B0((int)&Str, v13, v14);
  v19 = 0;
LABEL_6:
  v3 = (int)(v1 + 18);
  while ( 1 )
  {
    v4 = (char *)&Str;
    if ( v18 >= 0x10 )
      v4 = (char *)Str;
    v5 = &Str;
    if ( v18 >= 0x10 )
      v5 = Str;
    v6 = std::codecvt<char,char,int>::unshift(v1[16], v3, v5, &v4[v17], &v15);
    if ( !v6 )
    {
      *((_BYTE *)v1 + 69) = 0;
      goto LABEL_16;
    }
    v7 = v6 - 1;
    if ( v7 )
      break;
LABEL_16:
    v9 = &Str;
    if ( v18 >= 0x10 )
      v9 = Str;
    v10 = v15 - v9;
    if ( v15 != v9 )
    {
      v11 = &Str;
      if ( v18 >= 0x10 )
        v11 = Str;
      if ( v10 != fwrite(v11, 1u, v10, (FILE *)v1[20]) )
        goto LABEL_14;
    }
    if ( !*((_BYTE *)v1 + 69) )
      goto LABEL_25;
    v12 = v10 == 0;
    v3 = (int)(v1 + 18);
    if ( v12 )
    {
      sub_4108D0((int)&Str, 8u, 0);
      goto LABEL_6;
    }
  }
  if ( v7 != 2 )
  {
LABEL_14:
    v8 = 0;
    goto LABEL_26;
  }
LABEL_25:
  v8 = 1;
LABEL_26:
  if ( v18 >= 0x10 )
    operator delete(Str);
  return v8;
}
// 4130B0: using guessed type int __thiscall std::codecvt<char,char,int>::unshift(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040C870) --------------------------------------------------------
_DWORD *__thiscall sub_40C870(int this)
{
  _DWORD *v1; // esi@1
  _DWORD *result; // eax@1
  int v3; // edx@2

  v1 = *(_DWORD **)(this + 12);
  result = (_DWORD *)(this + 68);
  if ( *v1 == this + 68 )
  {
    v3 = *(_DWORD *)(this + 60);
    *v1 = *(_DWORD *)(this + 56);
    **(_DWORD **)(this + 28) = v3;
    result = *(_DWORD **)(this + 44);
    *result = 0;
  }
  return result;
}

//----- (0040C8A0) --------------------------------------------------------
_DWORD *__thiscall sub_40C8A0(int this)
{
  int v1; // edx@1
  int *v2; // edi@1
  int v3; // esi@1
  _DWORD *v4; // ecx@2
  _DWORD *result; // eax@3

  v1 = this;
  v2 = *(int **)(this + 12);
  v3 = this + 68;
  if ( *v2 != this + 68 )
  {
    v4 = *(_DWORD **)(this + 28);
    *(_DWORD *)(v1 + 56) = *v2;
    *(_DWORD *)(v1 + 60) = *v4 + **(_DWORD **)(v1 + 44);
  }
  *v2 = v3;
  **(_DWORD **)(v1 + 28) = v3;
  result = *(_DWORD **)(v1 + 44);
  *result = v1 - v3 + 69;
  return result;
}

//----- (0040C8E0) --------------------------------------------------------
void __thiscall sub_40C8E0(int *this)
{
  int *v1; // esi@1
  int v2; // ecx@1

  v1 = this;
  v2 = *this;
  if ( v2 )
  {
    sub_40F240(v2, (_DWORD *)v1[1]);
    operator delete((void *)*v1);
    *v1 = 0;
    v1[1] = 0;
    v1[2] = 0;
  }
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040C920) --------------------------------------------------------
unsigned int __thiscall sub_40C920(int this, int a2)
{
  int v2; // esi@1
  int v3; // edi@1
  unsigned int result; // eax@1
  unsigned int v5; // esi@2
  int v6; // esi@2
  signed int v7; // edi@4
  unsigned int v8; // edx@4
  unsigned int v9; // esi@4
  unsigned int v10; // eax@5
  unsigned int v11; // eax@8

  v2 = *(_DWORD *)(this + 4);
  v3 = *(_DWORD *)(this + 8);
  result = (*(_DWORD *)(this + 8) - v2) / 48;
  if ( result < 1 )
  {
    v5 = (signed int)((unsigned __int64)(715827883i64 * (v2 - *(_DWORD *)this)) >> 32) >> 3;
    v6 = v5 + (v5 >> 31);
    if ( (unsigned int)(89478485 - v6) < 1 )
      std::_Xlength_error("vector<T> too long");
    v7 = v3 - *(_DWORD *)this;
    v8 = (unsigned int)(v7 / 48) >> 1;
    v9 = v6 + 1;
    if ( 89478485 - v8 >= v7 / 48 )
    {
      v11 = v8 + v7 / 48;
      if ( v11 < v9 )
        v11 = v9;
      result = sub_40CDA0((void *)this, v11);
    }
    else
    {
      v10 = 0;
      if ( v9 > 0 )
        v10 = v9;
      result = sub_40CDA0((void *)this, v10);
    }
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (0040C9C0) --------------------------------------------------------
void __thiscall sub_40C9C0(int this)
{
  int v1; // esi@1

  v1 = this;
  if ( *(_DWORD *)this )
  {
    sub_40DB30(*(_DWORD *)this, *(_DWORD *)(this + 4));
    operator delete(*(void **)v1);
    *(_DWORD *)v1 = 0;
    *(_DWORD *)(v1 + 4) = 0;
    *(_DWORD *)(v1 + 8) = 0;
  }
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040CA00) --------------------------------------------------------
unsigned int __thiscall sub_40CA00(int this, int a2)
{
  int v2; // esi@1
  int v3; // edi@1
  unsigned int result; // eax@1
  unsigned int v5; // esi@2
  int v6; // esi@2
  signed int v7; // edi@4
  unsigned int v8; // edx@4
  unsigned int v9; // esi@4
  unsigned int v10; // eax@5
  unsigned int v11; // eax@8

  v2 = *(_DWORD *)(this + 4);
  v3 = *(_DWORD *)(this + 8);
  result = (*(_DWORD *)(this + 8) - v2) / 24;
  if ( result < 1 )
  {
    v5 = (signed int)((unsigned __int64)(715827883i64 * (v2 - *(_DWORD *)this)) >> 32) >> 2;
    v6 = v5 + (v5 >> 31);
    if ( (unsigned int)(178956970 - v6) < 1 )
      std::_Xlength_error("vector<T> too long");
    v7 = v3 - *(_DWORD *)this;
    v8 = (unsigned int)(v7 / 24) >> 1;
    v9 = v6 + 1;
    if ( 178956970 - v8 >= v7 / 24 )
    {
      v11 = v8 + v7 / 24;
      if ( v11 < v9 )
        v11 = v9;
      result = sub_40CE50((void *)this, v11);
    }
    else
    {
      v10 = 0;
      if ( v9 > 0 )
        v10 = v9;
      result = sub_40CE50((void *)this, v10);
    }
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (0040CAA0) --------------------------------------------------------
int *__thiscall sub_40CAA0(void *this, int *a2, int a3, int a4)
{
  int v4; // eax@1
  void *v5; // esi@1
  int v6; // ecx@1
  int *v7; // eax@3
  int v8; // ecx@3
  int *result; // eax@3
  int v10; // ecx@5
  int i; // edx@6
  int j; // eax@7
  char v13; // [sp+4h] [bp-4h]@14

  v4 = a3;
  v5 = this;
  v6 = *(_DWORD *)this;
  if ( a3 != *(_DWORD *)v6 || a4 != v6 )
  {
    for ( ; a3 != a4; v4 = a3 )
    {
      v10 = v4;
      if ( !*(_BYTE *)(v4 + 13) )
      {
        i = *(_DWORD *)(v4 + 8);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *(_DWORD *)(v4 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(_DWORD *)(i + 8) )
              break;
            v4 = i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        a3 = i;
      }
      sub_40CEF0(v5, (int *)&v13, v10);
    }
    *a2 = v4;
    result = a2;
  }
  else
  {
    sub_40DB80(v5, *(_DWORD *)(v6 + 4));
    *(_DWORD *)(*(_DWORD *)v5 + 4) = *(_DWORD *)v5;
    **(_DWORD **)v5 = *(_DWORD *)v5;
    *(_DWORD *)(*(_DWORD *)v5 + 8) = *(_DWORD *)v5;
    v7 = *(int **)v5;
    *((_DWORD *)v5 + 1) = 0;
    v8 = *v7;
    result = a2;
    *a2 = v8;
  }
  return result;
}

//----- (0040CB60) --------------------------------------------------------
int *__thiscall sub_40CB60(int **this, int *a2, int a3, int *a4)
{
  int v4; // eax@1
  int **v5; // esi@1
  int *v6; // ecx@1
  int *v7; // eax@3
  int v8; // ecx@3
  int *result; // eax@3
  int v10; // ecx@5
  int i; // edx@6
  int j; // eax@7
  char v13; // [sp+4h] [bp-4h]@14

  v4 = a3;
  v5 = this;
  v6 = *this;
  if ( a3 != *v6 || a4 != v6 )
  {
    for ( ; (int *)a3 != a4; v4 = a3 )
    {
      v10 = v4;
      if ( !*(_BYTE *)(v4 + 13) )
      {
        i = *(_DWORD *)(v4 + 8);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *(_DWORD *)(v4 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(_DWORD *)(i + 8) )
              break;
            v4 = i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        a3 = i;
      }
      sub_40D1D0(v5, (int *)&v13, v10);
    }
    *a2 = v4;
    result = a2;
  }
  else
  {
    sub_40D4C0(v5, v6[1]);
    (*v5)[1] = (int)*v5;
    **v5 = (int)*v5;
    (*v5)[2] = (int)*v5;
    v7 = *v5;
    v5[1] = 0;
    v8 = *v7;
    result = a2;
    *a2 = v8;
  }
  return result;
}

//----- (0040CC20) --------------------------------------------------------
int *__thiscall sub_40CC20(void *this, int *a2, int a3, int a4)
{
  int v4; // eax@1
  void *v5; // esi@1
  int v6; // ecx@1
  int *v7; // eax@3
  int v8; // ecx@3
  int *result; // eax@3
  int v10; // ecx@5
  int i; // edx@6
  int j; // eax@7
  char v13; // [sp+4h] [bp-4h]@14

  v4 = a3;
  v5 = this;
  v6 = *(_DWORD *)this;
  if ( a3 != *(_DWORD *)v6 || a4 != v6 )
  {
    for ( ; a3 != a4; v4 = a3 )
    {
      v10 = v4;
      if ( !*(_BYTE *)(v4 + 13) )
      {
        i = *(_DWORD *)(v4 + 8);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *(_DWORD *)(v4 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(_DWORD *)(i + 8) )
              break;
            v4 = i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        a3 = i;
      }
      sub_40D590(v5, (int *)&v13, v10);
    }
    *a2 = v4;
    result = a2;
  }
  else
  {
    sub_40DC20(v5, *(_DWORD *)(v6 + 4));
    *(_DWORD *)(*(_DWORD *)v5 + 4) = *(_DWORD *)v5;
    **(_DWORD **)v5 = *(_DWORD *)v5;
    *(_DWORD *)(*(_DWORD *)v5 + 8) = *(_DWORD *)v5;
    v7 = *(int **)v5;
    *((_DWORD *)v5 + 1) = 0;
    v8 = *v7;
    result = a2;
    *a2 = v8;
  }
  return result;
}

//----- (0040CCE0) --------------------------------------------------------
int *__thiscall sub_40CCE0(void *this, int *a2, int a3, int a4)
{
  int v4; // eax@1
  void *v5; // esi@1
  int v6; // ecx@1
  int *v7; // eax@3
  int v8; // ecx@3
  int *result; // eax@3
  int v10; // ecx@5
  int i; // edx@6
  int j; // eax@7
  char v13; // [sp+4h] [bp-4h]@14

  v4 = a3;
  v5 = this;
  v6 = *(_DWORD *)this;
  if ( a3 != *(_DWORD *)v6 || a4 != v6 )
  {
    for ( ; a3 != a4; v4 = a3 )
    {
      v10 = v4;
      if ( !*(_BYTE *)(v4 + 13) )
      {
        i = *(_DWORD *)(v4 + 8);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *(_DWORD *)(v4 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(_DWORD *)(i + 8) )
              break;
            v4 = i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        a3 = i;
      }
      sub_40D860(v5, (int *)&v13, v10);
    }
    *a2 = v4;
    result = a2;
  }
  else
  {
    sub_40DCB0(v5, *(_DWORD *)(v6 + 4));
    *(_DWORD *)(*(_DWORD *)v5 + 4) = *(_DWORD *)v5;
    **(_DWORD **)v5 = *(_DWORD *)v5;
    *(_DWORD *)(*(_DWORD *)v5 + 8) = *(_DWORD *)v5;
    v7 = *(int **)v5;
    *((_DWORD *)v5 + 1) = 0;
    v8 = *v7;
    result = a2;
    *a2 = v8;
  }
  return result;
}

//----- (0040CDA0) --------------------------------------------------------
int __thiscall sub_40CDA0(void *this, unsigned int a2)
{
  unsigned int v2; // esi@1
  void *v3; // edi@1
  void *v4; // ebx@1
  int v5; // ecx@5
  int result; // eax@7
  int v7; // [sp+14h] [bp+8h]@5

  v2 = a2;
  v3 = 0;
  v4 = this;
  if ( a2 )
  {
    if ( a2 > 0x5555555 || (v3 = operator new(48 * a2)) == 0 )
      std::_Xbad_alloc();
  }
  sub_4100C0(*(_DWORD *)v4, *((void **)v4 + 1), v3);
  v5 = (*((_DWORD *)v4 + 1) - *(_DWORD *)v4) / 48;
  v7 = (*((_DWORD *)v4 + 1) - *(_DWORD *)v4) / 48;
  if ( *(_DWORD *)v4 )
  {
    sub_40F240(*(_DWORD *)v4, *((_DWORD **)v4 + 1));
    operator delete(*(void **)v4);
    v5 = v7;
  }
  *((_DWORD *)v4 + 2) = (char *)v3 + 48 * v2;
  result = (int)v3 + 48 * v5;
  *(_DWORD *)v4 = v3;
  *((_DWORD *)v4 + 1) = result;
  return result;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (0040CE50) --------------------------------------------------------
int __thiscall sub_40CE50(void *this, unsigned int a2)
{
  unsigned int v2; // esi@1
  void *v3; // edi@1
  void *v4; // ebx@1
  int v5; // ecx@5
  int result; // eax@7
  int v7; // [sp+14h] [bp+8h]@5

  v2 = a2;
  v3 = 0;
  v4 = this;
  if ( a2 )
  {
    if ( a2 > 0xAAAAAAA || (v3 = operator new(24 * a2)) == 0 )
      std::_Xbad_alloc();
  }
  sub_410100(*((_DWORD *)v4 + 1), *(_DWORD *)v4, v3);
  v5 = (*((_DWORD *)v4 + 1) - *(_DWORD *)v4) / 24;
  v7 = (*((_DWORD *)v4 + 1) - *(_DWORD *)v4) / 24;
  if ( *(_DWORD *)v4 )
  {
    sub_40DB30(*(_DWORD *)v4, *((_DWORD *)v4 + 1));
    operator delete(*(void **)v4);
    v5 = v7;
  }
  *(_DWORD *)v4 = v3;
  *((_DWORD *)v4 + 2) = (char *)v3 + 24 * v2;
  result = (int)v3 + 24 * v5;
  *((_DWORD *)v4 + 1) = result;
  return result;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (0040CEF0) --------------------------------------------------------
int *__thiscall sub_40CEF0(void *this, int *a2, int a3)
{
  void *v3; // ebx@1
  int v4; // edi@4
  int v5; // ecx@7
  int v6; // esi@8
  void *v7; // edx@10
  int *v8; // eax@15
  int i; // ecx@17
  int v10; // eax@18
  int v11; // eax@25
  int v12; // eax@33
  char v13; // cl@36
  int v14; // ecx@40
  int v15; // ST08_4@48
  _DWORD *v16; // esi@48
  int v17; // ST08_4@59
  int v18; // ecx@61
  int v19; // eax@65
  int *result; // eax@67
  int v21; // [sp+Ch] [bp-8h]@7
  int v22; // [sp+Ch] [bp-8h]@22
  void *v23; // [sp+10h] [bp-4h]@1

  v3 = (void *)a3;
  v23 = this;
  if ( *(_BYTE *)(a3 + 13) )
    std::_Xout_of_range("invalid map/set<T> iterator");
  sub_403140(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v4 = *((_DWORD *)v3 + 2);
LABEL_8:
    v6 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    v7 = v23;
    if ( *(void **)(*(_DWORD *)v23 + 4) == v3 )
    {
      *(_DWORD *)(*(_DWORD *)v23 + 4) = v4;
    }
    else if ( *(void **)v6 == v3 )
    {
      *(_DWORD *)v6 = v4;
    }
    else
    {
      *(_DWORD *)(v6 + 8) = v4;
    }
    v8 = *(int **)v23;
    if ( **(void ***)v23 == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        i = v6;
      }
      else
      {
        v10 = *(_DWORD *)v4;
        for ( i = v4; !*(_BYTE *)(v10 + 13); v10 = *(_DWORD *)v10 )
          i = v10;
        v8 = *(int **)v23;
      }
      *v8 = i;
    }
    v22 = *(_DWORD *)v23;
    if ( *(void **)(*(_DWORD *)v23 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        *(_DWORD *)(v22 + 8) = v6;
      }
      else
      {
        v11 = sub_403860(v4);
        v7 = v23;
        *(_DWORD *)(v22 + 8) = v11;
      }
    }
    goto LABEL_37;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v4 = *(_DWORD *)v3;
    goto LABEL_8;
  }
  v5 = a3;
  v21 = a3;
  v4 = *(_DWORD *)(a3 + 8);
  if ( (void *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *(_DWORD *)v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD *)v3 + 2) )
  {
    v6 = v5;
  }
  else
  {
    v6 = *(_DWORD *)(v5 + 4);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    *(_DWORD *)v6 = v4;
    *(_DWORD *)(v5 + 8) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  if ( *(void **)(*(_DWORD *)v23 + 4) == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v23 + 4) = v5;
  }
  else
  {
    v12 = *((_DWORD *)v3 + 1);
    if ( *(void **)v12 == v3 )
      *(_DWORD *)v12 = v5;
    else
      *(_DWORD *)(v12 + 8) = v5;
  }
  *(_DWORD *)(v5 + 4) = *((_DWORD *)v3 + 1);
  v13 = *(_BYTE *)(v5 + 12);
  *(_BYTE *)(v21 + 12) = *((_BYTE *)v3 + 12);
  v7 = v23;
  *((_BYTE *)v3 + 12) = v13;
LABEL_37:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    for ( ; v4 != *(_DWORD *)(*(_DWORD *)v7 + 4); v6 = *(_DWORD *)(v6 + 4) )
    {
      if ( *(_BYTE *)(v4 + 12) != 1 )
        break;
      v14 = *(_DWORD *)v6;
      if ( v4 == *(_DWORD *)v6 )
      {
        v14 = *(_DWORD *)(v6 + 8);
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_4037A0(v7, v6);
          v14 = *(_DWORD *)(v6 + 8);
          v7 = v23;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_403800(v7, v14);
            v14 = *(_DWORD *)(v6 + 8);
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v15 = v6;
          v16 = v23;
          *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
          sub_4037A0(v23, v15);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      else
      {
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_403800(v7, v6);
          v14 = *(_DWORD *)v6;
          v7 = v23;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v14 + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_4037A0(v7, v14);
            v14 = *(_DWORD *)v6;
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v17 = v6;
          v16 = v23;
          *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
          sub_403800(v23, v17);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      *(_BYTE *)(v14 + 12) = 0;
LABEL_55:
      v4 = v6;
    }
    v16 = v23;
    *(_BYTE *)(v4 + 12) = 1;
  }
  else
  {
    v16 = v23;
  }
LABEL_61:
  v18 = *((_DWORD *)v3 + 10);
  if ( v18 )
  {
    sub_40F240(v18, *((_DWORD **)v3 + 11));
    operator delete(*((void **)v3 + 10));
    *((_DWORD *)v3 + 10) = 0;
    *((_DWORD *)v3 + 11) = 0;
    *((_DWORD *)v3 + 12) = 0;
  }
  if ( *((_DWORD *)v3 + 9) >= 0x10u )
    operator delete(*((void **)v3 + 4));
  *((_DWORD *)v3 + 9) = 15;
  *((_DWORD *)v3 + 8) = 0;
  *((_BYTE *)v3 + 16) = 0;
  operator delete(v3);
  v19 = v16[1];
  if ( v19 )
    v16[1] = v19 - 1;
  result = a2;
  *a2 = a3;
  return result;
}
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040D1D0) --------------------------------------------------------
int *__thiscall sub_40D1D0(int **this, int *a2, int a3)
{
  void *v3; // ebx@1
  int v4; // edi@4
  int v5; // edx@7
  int v6; // esi@8
  int *v7; // ecx@15
  int i; // edx@17
  int v9; // ecx@18
  int v10; // eax@33
  char v11; // cl@36
  int **j; // edx@38
  int v13; // ecx@40
  int v14; // esi@61
  int v15; // eax@62
  int *v16; // eax@69
  int *result; // eax@71
  int *v18; // [sp+8h] [bp-8h]@22
  int k; // [sp+8h] [bp-8h]@62
  int **v20; // [sp+Ch] [bp-4h]@1

  v3 = (void *)a3;
  v20 = this;
  if ( *(_BYTE *)(a3 + 13) )
    std::_Xout_of_range("invalid map/set<T> iterator");
  sub_403140(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v4 = *((_DWORD *)v3 + 2);
LABEL_8:
    v6 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    if ( (void *)(*v20)[1] == v3 )
    {
      (*v20)[1] = v4;
    }
    else if ( *(void **)v6 == v3 )
    {
      *(_DWORD *)v6 = v4;
    }
    else
    {
      *(_DWORD *)(v6 + 8) = v4;
    }
    v7 = *v20;
    if ( (void *)**v20 == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        i = v6;
      }
      else
      {
        v9 = *(_DWORD *)v4;
        for ( i = v4; !*(_BYTE *)(v9 + 13); v9 = *(_DWORD *)v9 )
          i = v9;
        v7 = *v20;
      }
      *v7 = i;
    }
    v18 = *v20;
    if ( (void *)(*v20)[2] == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
        v18[2] = v6;
      else
        v18[2] = sub_403860(v4);
    }
    goto LABEL_37;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v4 = *(_DWORD *)v3;
    goto LABEL_8;
  }
  v5 = a3;
  v4 = *(_DWORD *)(a3 + 8);
  if ( (void *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *(_DWORD *)v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD *)v3 + 2) )
  {
    v6 = v5;
  }
  else
  {
    v6 = *(_DWORD *)(v5 + 4);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    *(_DWORD *)v6 = v4;
    *(_DWORD *)(v5 + 8) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  if ( (void *)(*v20)[1] == v3 )
  {
    (*v20)[1] = v5;
  }
  else
  {
    v10 = *((_DWORD *)v3 + 1);
    if ( *(void **)v10 == v3 )
      *(_DWORD *)v10 = v5;
    else
      *(_DWORD *)(v10 + 8) = v5;
  }
  *(_DWORD *)(v5 + 4) = *((_DWORD *)v3 + 1);
  v11 = *(_BYTE *)(v5 + 12);
  *(_BYTE *)(v5 + 12) = *((_BYTE *)v3 + 12);
  *((_BYTE *)v3 + 12) = v11;
LABEL_37:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    for ( j = v20; v4 != (*j)[1]; v6 = *(_DWORD *)(v6 + 4) )
    {
      if ( *(_BYTE *)(v4 + 12) != 1 )
        break;
      v13 = *(_DWORD *)v6;
      if ( v4 == *(_DWORD *)v6 )
      {
        v13 = *(_DWORD *)(v6 + 8);
        if ( !*(_BYTE *)(v13 + 12) )
        {
          *(_BYTE *)(v13 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_4037A0(j, v6);
          v13 = *(_DWORD *)(v6 + 8);
          j = v20;
        }
        if ( *(_BYTE *)(v13 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)v13 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v13 + 8) + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)(v13 + 8) + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v13 + 12) = 1;
            *(_BYTE *)(v13 + 12) = 0;
            sub_403800(j, v13);
            v13 = *(_DWORD *)(v6 + 8);
          }
          *(_BYTE *)(v13 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          *(_BYTE *)(*(_DWORD *)(v13 + 8) + 12) = 1;
          sub_4037A0(v20, v6);
          break;
        }
      }
      else
      {
        if ( !*(_BYTE *)(v13 + 12) )
        {
          *(_BYTE *)(v13 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_403800(j, v6);
          v13 = *(_DWORD *)v6;
          j = v20;
        }
        if ( *(_BYTE *)(v13 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)(v13 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v13 + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v13 + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)(v13 + 8) + 12) = 1;
            *(_BYTE *)(v13 + 12) = 0;
            sub_4037A0(j, v13);
            v13 = *(_DWORD *)v6;
          }
          *(_BYTE *)(v13 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          *(_BYTE *)(*(_DWORD *)v13 + 12) = 1;
          sub_403800(v20, v6);
          break;
        }
      }
      *(_BYTE *)(v13 + 12) = 0;
LABEL_55:
      v4 = v6;
    }
    *(_BYTE *)(v4 + 12) = 1;
  }
  v14 = *((_DWORD *)v3 + 10);
  if ( v14 )
  {
    v15 = *((_DWORD *)v3 + 11);
    for ( k = v15; v14 != v15; v14 += 24 )
    {
      if ( *(_DWORD *)(v14 + 20) >= 0x10u )
      {
        operator delete(*(void **)v14);
        v15 = k;
      }
      *(_DWORD *)(v14 + 20) = 15;
      *(_DWORD *)(v14 + 16) = 0;
      *(_BYTE *)v14 = 0;
    }
    operator delete(*((void **)v3 + 10));
    *((_DWORD *)v3 + 10) = 0;
    *((_DWORD *)v3 + 11) = 0;
    *((_DWORD *)v3 + 12) = 0;
  }
  if ( *((_DWORD *)v3 + 9) >= 0x10u )
    operator delete(*((void **)v3 + 4));
  *((_DWORD *)v3 + 9) = 15;
  *((_DWORD *)v3 + 8) = 0;
  *((_BYTE *)v3 + 16) = 0;
  operator delete(v3);
  v16 = v20[1];
  if ( v16 )
    v20[1] = (int *)((char *)v16 - 1);
  result = a2;
  *a2 = a3;
  return result;
}
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040D4C0) --------------------------------------------------------
void *__thiscall sub_40D4C0(void *this, int a2)
{
  int v2; // edi@1
  void *result; // eax@1
  int v4; // esi@1
  int v5; // esi@2
  int v6; // eax@3
  void *v7; // [sp+8h] [bp-8h]@1
  int v8; // [sp+Ch] [bp-4h]@2
  int i; // [sp+18h] [bp+8h]@3

  v2 = a2;
  result = this;
  v7 = this;
  v4 = a2;
  if ( !*(_BYTE *)(a2 + 13) )
  {
    do
    {
      sub_40D4C0(*(_DWORD *)(v4 + 8));
      v8 = *(_DWORD *)v4;
      v5 = *(_DWORD *)(v2 + 40);
      if ( v5 )
      {
        v6 = *(_DWORD *)(v2 + 44);
        for ( i = v6; v5 != v6; v5 += 24 )
        {
          if ( *(_DWORD *)(v5 + 20) >= 0x10u )
          {
            operator delete(*(void **)v5);
            v6 = i;
          }
          *(_DWORD *)(v5 + 20) = 15;
          *(_DWORD *)(v5 + 16) = 0;
          *(_BYTE *)v5 = 0;
        }
        operator delete(*(void **)(v2 + 40));
        *(_DWORD *)(v2 + 40) = 0;
        *(_DWORD *)(v2 + 44) = 0;
        *(_DWORD *)(v2 + 48) = 0;
      }
      if ( *(_DWORD *)(v2 + 36) >= 0x10u )
        operator delete(*(void **)(v2 + 16));
      *(_DWORD *)(v2 + 36) = 15;
      *(_DWORD *)(v2 + 32) = 0;
      *(_BYTE *)(v2 + 16) = 0;
      operator delete((void *)v2);
      v4 = v8;
      result = v7;
      v2 = v8;
    }
    while ( !*(_BYTE *)(v8 + 13) );
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040D590) --------------------------------------------------------
int *__thiscall sub_40D590(void *this, int *a2, int a3)
{
  void *v3; // ebx@1
  int v4; // edi@4
  int v5; // ecx@7
  int v6; // esi@8
  void *v7; // edx@10
  int *v8; // eax@15
  int i; // ecx@17
  int v10; // eax@18
  int v11; // eax@25
  int v12; // eax@33
  char v13; // cl@36
  int v14; // ecx@40
  int v15; // ST00_4@48
  _DWORD *v16; // esi@48
  int v17; // ST00_4@59
  int v18; // eax@65
  int *result; // eax@67
  int v20; // [sp+Ch] [bp-8h]@7
  int v21; // [sp+Ch] [bp-8h]@22
  void *v22; // [sp+10h] [bp-4h]@1

  v3 = (void *)a3;
  v22 = this;
  if ( *(_BYTE *)(a3 + 13) )
    std::_Xout_of_range("invalid map/set<T> iterator");
  sub_403140(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v4 = *((_DWORD *)v3 + 2);
LABEL_8:
    v6 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    v7 = v22;
    if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
    {
      *(_DWORD *)(*(_DWORD *)v22 + 4) = v4;
    }
    else if ( *(void **)v6 == v3 )
    {
      *(_DWORD *)v6 = v4;
    }
    else
    {
      *(_DWORD *)(v6 + 8) = v4;
    }
    v8 = *(int **)v22;
    if ( **(void ***)v22 == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        i = v6;
      }
      else
      {
        v10 = *(_DWORD *)v4;
        for ( i = v4; !*(_BYTE *)(v10 + 13); v10 = *(_DWORD *)v10 )
          i = v10;
        v8 = *(int **)v22;
      }
      *v8 = i;
    }
    v21 = *(_DWORD *)v22;
    if ( *(void **)(*(_DWORD *)v22 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        *(_DWORD *)(v21 + 8) = v6;
      }
      else
      {
        v11 = sub_403860(v4);
        v7 = v22;
        *(_DWORD *)(v21 + 8) = v11;
      }
    }
    goto LABEL_37;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v4 = *(_DWORD *)v3;
    goto LABEL_8;
  }
  v5 = a3;
  v20 = a3;
  v4 = *(_DWORD *)(a3 + 8);
  if ( (void *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *(_DWORD *)v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD *)v3 + 2) )
  {
    v6 = v5;
  }
  else
  {
    v6 = *(_DWORD *)(v5 + 4);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    *(_DWORD *)v6 = v4;
    *(_DWORD *)(v5 + 8) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v22 + 4) = v5;
  }
  else
  {
    v12 = *((_DWORD *)v3 + 1);
    if ( *(void **)v12 == v3 )
      *(_DWORD *)v12 = v5;
    else
      *(_DWORD *)(v12 + 8) = v5;
  }
  *(_DWORD *)(v5 + 4) = *((_DWORD *)v3 + 1);
  v13 = *(_BYTE *)(v5 + 12);
  *(_BYTE *)(v20 + 12) = *((_BYTE *)v3 + 12);
  v7 = v22;
  *((_BYTE *)v3 + 12) = v13;
LABEL_37:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    for ( ; v4 != *(_DWORD *)(*(_DWORD *)v7 + 4); v6 = *(_DWORD *)(v6 + 4) )
    {
      if ( *(_BYTE *)(v4 + 12) != 1 )
        break;
      v14 = *(_DWORD *)v6;
      if ( v4 == *(_DWORD *)v6 )
      {
        v14 = *(_DWORD *)(v6 + 8);
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_4037A0(v7, v6);
          v14 = *(_DWORD *)(v6 + 8);
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_403800(v7, v14);
            v14 = *(_DWORD *)(v6 + 8);
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v15 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
          sub_4037A0(v22, v15);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      else
      {
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_403800(v7, v6);
          v14 = *(_DWORD *)v6;
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v14 + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_4037A0(v7, v14);
            v14 = *(_DWORD *)v6;
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v17 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
          sub_403800(v22, v17);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      *(_BYTE *)(v14 + 12) = 0;
LABEL_55:
      v4 = v6;
    }
    v16 = v22;
    *(_BYTE *)(v4 + 12) = 1;
  }
  else
  {
    v16 = v22;
  }
LABEL_61:
  if ( *((_DWORD *)v3 + 15) >= 0x10u )
    operator delete(*((void **)v3 + 10));
  *((_DWORD *)v3 + 15) = 15;
  *((_DWORD *)v3 + 14) = 0;
  *((_BYTE *)v3 + 40) = 0;
  if ( *((_DWORD *)v3 + 9) >= 0x10u )
    operator delete(*((void **)v3 + 4));
  *((_DWORD *)v3 + 9) = 15;
  *((_DWORD *)v3 + 8) = 0;
  *((_BYTE *)v3 + 16) = 0;
  operator delete(v3);
  v18 = v16[1];
  if ( v18 )
    v16[1] = v18 - 1;
  result = a2;
  *a2 = a3;
  return result;
}
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040D860) --------------------------------------------------------
int *__thiscall sub_40D860(void *this, int *a2, int a3)
{
  void *v3; // ebx@1
  int v4; // edi@4
  int v5; // ecx@7
  int v6; // esi@8
  void *v7; // edx@10
  int *v8; // eax@15
  int i; // ecx@17
  int v10; // eax@18
  int v11; // eax@25
  int v12; // eax@33
  char v13; // cl@36
  int v14; // ecx@40
  int v15; // ST00_4@48
  _DWORD *v16; // esi@48
  int v17; // ST00_4@59
  int v18; // eax@65
  int *result; // eax@67
  int v20; // [sp+Ch] [bp-8h]@7
  int v21; // [sp+Ch] [bp-8h]@22
  void *v22; // [sp+10h] [bp-4h]@1

  v3 = (void *)a3;
  v22 = this;
  if ( *(_BYTE *)(a3 + 13) )
    std::_Xout_of_range("invalid map/set<T> iterator");
  sub_403140(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v4 = *((_DWORD *)v3 + 2);
LABEL_8:
    v6 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    v7 = v22;
    if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
    {
      *(_DWORD *)(*(_DWORD *)v22 + 4) = v4;
    }
    else if ( *(void **)v6 == v3 )
    {
      *(_DWORD *)v6 = v4;
    }
    else
    {
      *(_DWORD *)(v6 + 8) = v4;
    }
    v8 = *(int **)v22;
    if ( **(void ***)v22 == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        i = v6;
      }
      else
      {
        v10 = *(_DWORD *)v4;
        for ( i = v4; !*(_BYTE *)(v10 + 13); v10 = *(_DWORD *)v10 )
          i = v10;
        v8 = *(int **)v22;
      }
      *v8 = i;
    }
    v21 = *(_DWORD *)v22;
    if ( *(void **)(*(_DWORD *)v22 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 13) )
      {
        *(_DWORD *)(v21 + 8) = v6;
      }
      else
      {
        v11 = sub_403860(v4);
        v7 = v22;
        *(_DWORD *)(v21 + 8) = v11;
      }
    }
    goto LABEL_37;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v4 = *(_DWORD *)v3;
    goto LABEL_8;
  }
  v5 = a3;
  v20 = a3;
  v4 = *(_DWORD *)(a3 + 8);
  if ( (void *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *(_DWORD *)v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD *)v3 + 2) )
  {
    v6 = v5;
  }
  else
  {
    v6 = *(_DWORD *)(v5 + 4);
    if ( !*(_BYTE *)(v4 + 13) )
      *(_DWORD *)(v4 + 4) = v6;
    *(_DWORD *)v6 = v4;
    *(_DWORD *)(v5 + 8) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  if ( *(void **)(*(_DWORD *)v22 + 4) == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v22 + 4) = v5;
  }
  else
  {
    v12 = *((_DWORD *)v3 + 1);
    if ( *(void **)v12 == v3 )
      *(_DWORD *)v12 = v5;
    else
      *(_DWORD *)(v12 + 8) = v5;
  }
  *(_DWORD *)(v5 + 4) = *((_DWORD *)v3 + 1);
  v13 = *(_BYTE *)(v5 + 12);
  *(_BYTE *)(v20 + 12) = *((_BYTE *)v3 + 12);
  v7 = v22;
  *((_BYTE *)v3 + 12) = v13;
LABEL_37:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    for ( ; v4 != *(_DWORD *)(*(_DWORD *)v7 + 4); v6 = *(_DWORD *)(v6 + 4) )
    {
      if ( *(_BYTE *)(v4 + 12) != 1 )
        break;
      v14 = *(_DWORD *)v6;
      if ( v4 == *(_DWORD *)v6 )
      {
        v14 = *(_DWORD *)(v6 + 8);
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_4037A0(v7, v6);
          v14 = *(_DWORD *)(v6 + 8);
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_403800(v7, v14);
            v14 = *(_DWORD *)(v6 + 8);
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v15 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
          sub_4037A0(v22, v15);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      else
      {
        if ( !*(_BYTE *)(v14 + 12) )
        {
          *(_BYTE *)(v14 + 12) = 1;
          *(_BYTE *)(v6 + 12) = 0;
          sub_403800(v7, v6);
          v14 = *(_DWORD *)v6;
          v7 = v22;
        }
        if ( *(_BYTE *)(v14 + 13) )
          goto LABEL_55;
        if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v14 + 12) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
            *(_BYTE *)(v14 + 12) = 0;
            sub_4037A0(v7, v14);
            v14 = *(_DWORD *)v6;
          }
          *(_BYTE *)(v14 + 12) = *(_BYTE *)(v6 + 12);
          *(_BYTE *)(v6 + 12) = 1;
          v17 = v6;
          v16 = v22;
          *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
          sub_403800(v22, v17);
          *(_BYTE *)(v4 + 12) = 1;
          goto LABEL_61;
        }
      }
      *(_BYTE *)(v14 + 12) = 0;
LABEL_55:
      v4 = v6;
    }
    v16 = v22;
    *(_BYTE *)(v4 + 12) = 1;
  }
  else
  {
    v16 = v22;
  }
LABEL_61:
  if ( *((_DWORD *)v3 + 10) )
  {
    operator delete(*((void **)v3 + 10));
    *((_DWORD *)v3 + 10) = 0;
    *((_DWORD *)v3 + 11) = 0;
    *((_DWORD *)v3 + 12) = 0;
  }
  if ( *((_DWORD *)v3 + 9) >= 0x10u )
    operator delete(*((void **)v3 + 4));
  *((_DWORD *)v3 + 9) = 15;
  *((_DWORD *)v3 + 8) = 0;
  *((_BYTE *)v3 + 16) = 0;
  operator delete(v3);
  v18 = v16[1];
  if ( v18 )
    v16[1] = v18 - 1;
  result = a2;
  *a2 = a3;
  return result;
}
// 4130C0: using guessed type void __cdecl std::_Xout_of_range(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040DB30) --------------------------------------------------------
void __stdcall sub_40DB30(int a1, int a2)
{
  int i; // esi@1

  for ( i = a1; i != a2; i += 24 )
  {
    if ( *(_DWORD *)(i + 20) >= 0x10u )
      operator delete(*(void **)i);
    *(_DWORD *)(i + 20) = 15;
    *(_DWORD *)(i + 16) = 0;
    *(_BYTE *)i = 0;
  }
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040DB80) --------------------------------------------------------
void *__thiscall sub_40DB80(void *this, int a2)
{
  int v2; // esi@1
  void *result; // eax@1
  int i; // edi@1
  int v5; // ecx@2
  void *v6; // [sp+8h] [bp-4h]@1

  v2 = a2;
  result = this;
  v6 = this;
  for ( i = a2; !*(_BYTE *)(i + 13); v2 = i )
  {
    sub_40DB80(*(_DWORD *)(i + 8));
    v5 = *(_DWORD *)(v2 + 40);
    i = *(_DWORD *)i;
    if ( v5 )
    {
      sub_40F240(v5, *(_DWORD **)(v2 + 44));
      operator delete(*(void **)(v2 + 40));
      *(_DWORD *)(v2 + 40) = 0;
      *(_DWORD *)(v2 + 44) = 0;
      *(_DWORD *)(v2 + 48) = 0;
    }
    if ( *(_DWORD *)(v2 + 36) >= 0x10u )
      operator delete(*(void **)(v2 + 16));
    *(_DWORD *)(v2 + 36) = 15;
    *(_DWORD *)(v2 + 32) = 0;
    *(_BYTE *)(v2 + 16) = 0;
    operator delete((void *)v2);
    result = v6;
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040DC20) --------------------------------------------------------
void *__thiscall sub_40DC20(void *this, int a2)
{
  int v2; // esi@1
  void *result; // eax@1
  int i; // edi@1
  void *v5; // [sp+8h] [bp-4h]@1

  v2 = a2;
  result = this;
  v5 = this;
  for ( i = a2; !*(_BYTE *)(i + 13); v2 = i )
  {
    sub_40DC20(*(_DWORD *)(i + 8));
    i = *(_DWORD *)i;
    if ( *(_DWORD *)(v2 + 60) >= 0x10u )
      operator delete(*(void **)(v2 + 40));
    *(_DWORD *)(v2 + 60) = 15;
    *(_DWORD *)(v2 + 56) = 0;
    *(_BYTE *)(v2 + 40) = 0;
    if ( *(_DWORD *)(v2 + 36) >= 0x10u )
      operator delete(*(void **)(v2 + 16));
    *(_DWORD *)(v2 + 36) = 15;
    *(_DWORD *)(v2 + 32) = 0;
    *(_BYTE *)(v2 + 16) = 0;
    operator delete((void *)v2);
    result = v5;
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040DCB0) --------------------------------------------------------
void *__thiscall sub_40DCB0(void *this, int a2)
{
  int v2; // esi@1
  void *result; // eax@1
  int i; // edi@1
  void *v5; // [sp+8h] [bp-4h]@1

  v2 = a2;
  result = this;
  v5 = this;
  for ( i = a2; !*(_BYTE *)(i + 13); v2 = i )
  {
    sub_40DCB0(*(_DWORD *)(i + 8));
    i = *(_DWORD *)i;
    if ( *(_DWORD *)(v2 + 40) )
    {
      operator delete(*(void **)(v2 + 40));
      *(_DWORD *)(v2 + 40) = 0;
      *(_DWORD *)(v2 + 44) = 0;
      *(_DWORD *)(v2 + 48) = 0;
    }
    if ( *(_DWORD *)(v2 + 36) >= 0x10u )
      operator delete(*(void **)(v2 + 16));
    *(_DWORD *)(v2 + 36) = 15;
    *(_DWORD *)(v2 + 32) = 0;
    *(_BYTE *)(v2 + 16) = 0;
    operator delete((void *)v2);
    result = v5;
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040DD40) --------------------------------------------------------
void sub_40DD40()
{
  _DWORD *v0; // eax@1

  v0 = operator new(0x34u);
  if ( v0 )
  {
    *v0 = v0;
    if ( v0 != (_DWORD *)-4 )
      v0[1] = v0;
    if ( v0 != (_DWORD *)-8 )
      v0[2] = v0;
    *((_WORD *)v0 + 6) = 257;
  }
  else
  {
    std::_Xbad_alloc();
  }
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (0040DD70) --------------------------------------------------------
void sub_40DD70()
{
  _DWORD *v0; // eax@1

  v0 = operator new(0x40u);
  if ( v0 )
  {
    *v0 = v0;
    if ( v0 != (_DWORD *)-4 )
      v0[1] = v0;
    if ( v0 != (_DWORD *)-8 )
      v0[2] = v0;
    *((_WORD *)v0 + 6) = 257;
  }
  else
  {
    std::_Xbad_alloc();
  }
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (0040DDA0) --------------------------------------------------------
int __thiscall sub_40DDA0(int this, int a2, int a3)
{
  int v3; // esi@1
  const char *v4; // edx@1
  size_t v5; // ecx@2
  const char *v6; // edi@4
  size_t v7; // ecx@5

  v3 = this;
  v4 = *(const char **)a2;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  if ( *v4 )
    v5 = strlen(v4);
  else
    v5 = 0;
  sub_405CB0(v3, (void *)v4, v5);
  v6 = *(const char **)(a2 + 4);
  *(_DWORD *)(v3 + 44) = 15;
  *(_DWORD *)(v3 + 40) = 0;
  *(_BYTE *)(v3 + 24) = 0;
  if ( *v6 )
    v7 = strlen(v6);
  else
    v7 = 0;
  sub_405CB0(v3 + 24, (void *)v6, v7);
  return v3;
}

//----- (0040DE60) --------------------------------------------------------
_DWORD *__usercall sub_40DE60@<eax>(void *Dst@<ecx>, int a2@<edx>, void *Src)
{
  _DWORD *v3; // esi@1
  int v4; // ebx@1
  unsigned int v5; // ecx@2
  size_t v6; // eax@4
  size_t v7; // ebx@4
  bool v8; // cf@7
  _DWORD *v9; // eax@8
  size_t v10; // ecx@12
  int v12; // [sp+14h] [bp-14h]@1

  v12 = a2;
  v3 = Dst;
  *((_DWORD *)Dst + 5) = 15;
  *((_DWORD *)Dst + 4) = 0;
  *(_BYTE *)Dst = 0;
  v4 = *(_DWORD *)(a2 + 16);
  if ( *(_BYTE *)Src )
    v5 = strlen((const char *)Src);
  else
    v5 = 0;
  v6 = v5 + v4;
  v7 = v3[4];
  if ( v7 <= v6 && v3[5] != v6 && (unsigned __int8)sub_405BB0(v3, v6, 1) )
  {
    v8 = v3[5] < 0x10u;
    v3[4] = v7;
    if ( v8 )
      v9 = v3;
    else
      v9 = (_DWORD *)*v3;
    *((_BYTE *)v9 + v7) = 0;
  }
  sub_405640(v3, v12, 0, 0xFFFFFFFF);
  if ( *(_BYTE *)Src )
    v10 = strlen((const char *)Src);
  else
    v10 = 0;
  sub_403C80((int)v3, Src, v10);
  return v3;
}

//----- (0040DF50) --------------------------------------------------------
_DWORD *__usercall sub_40DF50@<eax>(void *Dst@<ecx>, void *a2@<edx>, int a3)
{
  _DWORD *v3; // edi@1
  int v4; // eax@1
  int v5; // esi@1
  size_t v6; // eax@2
  _DWORD *result; // eax@5

  v3 = Dst;
  v4 = sub_405640(a2, a3, 0, 0xFFFFFFFF);
  v5 = v4;
  v3[5] = 15;
  v3[4] = 0;
  *(_BYTE *)v3 = 0;
  if ( *(_DWORD *)(v4 + 20) >= 0x10u )
  {
    *v3 = *(_DWORD *)v4;
    *(_DWORD *)v4 = 0;
  }
  else
  {
    v6 = *(_DWORD *)(v4 + 16) + 1;
    if ( v6 )
      memmove(v3, (const void *)v5, v6);
  }
  v3[4] = *(_DWORD *)(v5 + 16);
  v3[5] = *(_DWORD *)(v5 + 20);
  *(_DWORD *)(v5 + 20) = 15;
  *(_DWORD *)(v5 + 16) = 0;
  result = v3;
  *(_BYTE *)v5 = 0;
  return result;
}

//----- (0040DFD0) --------------------------------------------------------
_DWORD *__usercall sub_40DFD0@<eax>(void *Dst@<ecx>, int a2@<edx>, int a3)
{
  int v3; // ebx@1
  _DWORD *v4; // esi@1
  size_t v5; // eax@1
  size_t v6; // edi@1
  bool v7; // cf@4
  _DWORD *v8; // eax@5

  v3 = a2;
  v4 = Dst;
  *((_DWORD *)Dst + 5) = 15;
  *((_DWORD *)Dst + 4) = 0;
  *(_BYTE *)Dst = 0;
  v5 = *(_DWORD *)(a3 + 16) + *(_DWORD *)(a2 + 16);
  v6 = *((_DWORD *)Dst + 4);
  if ( v6 <= v5 && *((_DWORD *)Dst + 5) != v5 && (unsigned __int8)sub_405BB0(Dst, v5, 1) )
  {
    v7 = v4[5] < 0x10u;
    v4[4] = v6;
    if ( v7 )
      v8 = v4;
    else
      v8 = (_DWORD *)*v4;
    *((_BYTE *)v8 + v6) = 0;
  }
  sub_405640(v4, v3, 0, 0xFFFFFFFF);
  sub_405640(v4, a3, 0, 0xFFFFFFFF);
  return v4;
}

//----- (0040E090) --------------------------------------------------------
_DWORD *__usercall sub_40E090@<eax>(void *Dst@<ecx>, int a2@<edx>, void *Src)
{
  _DWORD *v3; // edi@1
  int v4; // ebx@1
  size_t v5; // esi@2
  int v6; // eax@4
  int v7; // esi@4
  size_t v8; // eax@5
  _DWORD *result; // eax@8

  v3 = Dst;
  v4 = a2;
  if ( *(_BYTE *)Src )
    v5 = strlen((const char *)Src);
  else
    v5 = 0;
  v6 = sub_403C80(v4, Src, v5);
  v7 = v6;
  v3[5] = 15;
  v3[4] = 0;
  *(_BYTE *)v3 = 0;
  if ( *(_DWORD *)(v6 + 20) >= 0x10u )
  {
    *v3 = *(_DWORD *)v6;
    *(_DWORD *)v6 = 0;
  }
  else
  {
    v8 = *(_DWORD *)(v6 + 16) + 1;
    if ( v8 )
      memmove(v3, (const void *)v7, v8);
  }
  v3[4] = *(_DWORD *)(v7 + 16);
  v3[5] = *(_DWORD *)(v7 + 20);
  *(_DWORD *)(v7 + 20) = 15;
  *(_DWORD *)(v7 + 16) = 0;
  result = v3;
  *(_BYTE *)v7 = 0;
  return result;
}

//----- (0040E130) --------------------------------------------------------
_DWORD *__usercall sub_40E130@<eax>(void *Dst@<ecx>, int a2@<edx>, int a3)
{
  unsigned int v3; // esi@1
  _DWORD *v4; // edi@1
  void *v5; // eax@3
  _DWORD *result; // eax@3
  int v7; // eax@4
  int v8; // esi@4
  size_t v9; // eax@5

  v3 = *(_DWORD *)(a2 + 16);
  v4 = Dst;
  if ( *(_DWORD *)(a3 + 16) <= *(_DWORD *)(a2 + 20) - v3 || *(_DWORD *)(a3 + 20) - *(_DWORD *)(a3 + 16) < v3 )
  {
    v7 = sub_405640((void *)a2, a3, 0, 0xFFFFFFFF);
    v8 = v7;
    v4[5] = 15;
    v4[4] = 0;
    *(_BYTE *)v4 = 0;
    if ( *(_DWORD *)(v7 + 20) >= 0x10u )
    {
      *v4 = *(_DWORD *)v7;
      *(_DWORD *)v7 = 0;
    }
    else
    {
      v9 = *(_DWORD *)(v7 + 16) + 1;
      if ( v9 )
        memmove(v4, (const void *)v8, v9);
    }
    v4[4] = *(_DWORD *)(v8 + 16);
    v4[5] = *(_DWORD *)(v8 + 20);
    *(_DWORD *)(v8 + 20) = 15;
    *(_DWORD *)(v8 + 16) = 0;
    result = v4;
    *(_BYTE *)v8 = 0;
  }
  else
  {
    v5 = (void *)((int (__stdcall *)(int, int, _DWORD, signed int))loc_40E750)(a3, a2, 0, -1);
    sub_405730(v4, v5);
    result = v4;
  }
  return result;
}

//----- (0040E1E0) --------------------------------------------------------
int __usercall sub_40E1E0@<eax>(int a1@<ecx>, void *Src@<edx>, int a3)
{
  int v3; // edi@1
  size_t v4; // esi@2
  char *v5; // esi@3
  char v6; // al@4
  int v7; // eax@6
  int v8; // esi@6
  size_t v9; // eax@7
  int result; // eax@10

  v3 = a1;
  if ( *(_BYTE *)Src )
  {
    v5 = (char *)Src;
    a1 = (int)Src + 1;
    do
      v6 = *v5++;
    while ( v6 );
    v4 = (size_t)&v5[-a1];
  }
  else
  {
    v4 = 0;
  }
  v7 = sub_40E8A0(a3, a1, Src, v4);
  v8 = v7;
  *(_DWORD *)(v3 + 20) = 15;
  *(_DWORD *)(v3 + 16) = 0;
  *(_BYTE *)v3 = 0;
  if ( *(_DWORD *)(v7 + 20) >= 0x10u )
  {
    *(_DWORD *)v3 = *(_DWORD *)v7;
    *(_DWORD *)v7 = 0;
  }
  else
  {
    v9 = *(_DWORD *)(v7 + 16) + 1;
    if ( v9 )
      memmove((void *)v3, (const void *)v8, v9);
  }
  *(_DWORD *)(v3 + 16) = *(_DWORD *)(v8 + 16);
  *(_DWORD *)(v3 + 20) = *(_DWORD *)(v8 + 20);
  *(_DWORD *)(v8 + 20) = 15;
  *(_DWORD *)(v8 + 16) = 0;
  result = v3;
  *(_BYTE *)v8 = 0;
  return result;
}

//----- (0040E270) --------------------------------------------------------
int __fastcall sub_40E270(int a1, int a2)
{
  int v2; // ebx@1
  unsigned int v3; // edx@1
  int v4; // ecx@1
  signed int v5; // edi@1
  int v6; // eax@1
  int v7; // esi@1
  int v8; // esi@5
  int v9; // ecx@7
  int v10; // eax@9
  int v11; // ecx@12
  int v12; // ecx@16
  char v13; // al@16
  int v14; // ecx@16
  int v15; // ecx@19
  int v16; // eax@21
  int v17; // edx@21
  int v18; // ecx@24
  char v19; // al@24
  int v20; // ecx@24
  int v21; // eax@29
  bool v22; // al@30
  int v23; // esi@30
  int v24; // ecx@32
  int v26; // [sp+0h] [bp-40h]@1
  int v27; // [sp+10h] [bp-30h]@7
  int v28; // [sp+14h] [bp-2Ch]@4
  int v29; // [sp+1Ch] [bp-24h]@1
  int v30; // [sp+20h] [bp-20h]@16
  int v31; // [sp+24h] [bp-1Ch]@1
  int v32; // [sp+28h] [bp-18h]@1
  unsigned int v33; // [sp+2Ch] [bp-14h]@1
  int *v34; // [sp+30h] [bp-10h]@1
  int v35; // [sp+3Ch] [bp-4h]@9

  v34 = &v26;
  v29 = a2;
  v2 = a1;
  v32 = a1;
  v3 = *(_DWORD *)(a2 + 16);
  v4 = *(_DWORD *)(*(_DWORD *)a1 + 4);
  v5 = 0;
  v6 = *(_DWORD *)(v4 + v32 + 36);
  v7 = *(_DWORD *)(v4 + v32 + 32);
  v31 = 0;
  v33 = v3;
  if ( v6 >= 0 && (v6 > 0 || v7) && (v28 = v6, v7 > v3) )
  {
    v28 = v6;
    v8 = v7 - v3;
  }
  else
  {
    v8 = 0;
  }
  v9 = *(_DWORD *)(v4 + v2 + 56);
  v27 = v2;
  if ( v9 )
    (*(void (**)(void))(*(_DWORD *)v9 + 4))();
  v35 = 0;
  v10 = *(_DWORD *)(*(_DWORD *)v2 + 4);
  if ( !*(_DWORD *)(v10 + v2 + 12) && *(_DWORD *)(v10 + v2 + 60) )
    std::basic_ostream<char,std::char_traits<char>>::flush();
  v11 = *(_DWORD *)(*(_DWORD *)v2 + 4);
  LOBYTE(v28) = *(_DWORD *)(v11 + v2 + 12) == 0;
  v35 = 1;
  if ( (_BYTE)v28 )
  {
    LOBYTE(v35) = 2;
    if ( (*(_DWORD *)(v11 + v2 + 20) & 0x1C0) != 64 )
    {
      while ( v8 )
      {
        v12 = *(_DWORD *)(*(_DWORD *)v2 + 4);
        v13 = *(_BYTE *)(v12 + v2 + 64);
        v14 = *(_DWORD *)(v12 + v2 + 56);
        LOBYTE(v30) = v13;
        if ( std::basic_streambuf<char,std::char_traits<char>>::sputc(v14, v30) == -1 )
        {
          v5 = 4;
          v31 = 4;
          break;
        }
        --v8;
      }
      if ( v5 )
        goto LABEL_23;
    }
    v15 = v29;
    if ( *(_DWORD *)(v29 + 20) >= 0x10u )
      v15 = *(_DWORD *)v29;
    v16 = std::basic_streambuf<char,std::char_traits<char>>::sputn(
            *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v2 + 4) + v2 + 56),
            v15,
            v33,
            0);
    if ( v16 != v33 || v17 )
    {
      v5 = 4;
    }
    else
    {
LABEL_23:
      while ( v8 )
      {
        v18 = *(_DWORD *)(*(_DWORD *)v2 + 4);
        v19 = *(_BYTE *)(v18 + v2 + 64);
        v20 = *(_DWORD *)(v18 + v2 + 56);
        LOBYTE(v29) = v19;
        if ( std::basic_streambuf<char,std::char_traits<char>>::sputc(v20, v29) == -1 )
        {
          v5 |= 4u;
          break;
        }
        --v8;
      }
    }
    v21 = *(_DWORD *)(*(_DWORD *)v2 + 4);
    *(_DWORD *)(v21 + v2 + 32) = 0;
    *(_DWORD *)(v21 + v2 + 36) = 0;
    v35 = 1;
  }
  else
  {
    v5 = 4;
  }
  std::basic_ios<char,std::char_traits<char>>::setstate(v2 + *(_DWORD *)(*(_DWORD *)v2 + 4), v5, 0);
  v35 = -1;
  v22 = std::uncaught_exception();
  v23 = v27;
  if ( !v22 )
    std::basic_ostream<char,std::char_traits<char>>::_Osfx(v27);
  v24 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v23 + 4) + v23 + 56);
  if ( v24 )
    (*(void (**)(void))(*(_DWORD *)v24 + 8))();
  return v2;
}
// 4130D8: using guessed type int std::basic_ostream<char,std::char_traits<char>>::flush(void);
// 4130DC: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::setstate(_DWORD, _DWORD, _DWORD);
// 4130E8: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::_Osfx(_DWORD);
// 4130EC: using guessed type bool __cdecl std::uncaught_exception();
// 4130F8: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sputc(_DWORD, _DWORD);
// 413160: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::sputn(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040E460) --------------------------------------------------------
_DWORD *__thiscall sub_40E460(void *Dst, void *Src, int a3, int a4)
{
  _DWORD *v4; // esi@1
  _DWORD *result; // eax@5

  v4 = Dst;
  *((_DWORD *)Dst + 5) = 15;
  *((_DWORD *)Dst + 4) = 0;
  *(_BYTE *)Dst = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)Dst = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove(Dst, Src, *((_DWORD *)Src + 4) + 1);
  }
  v4[4] = *((_DWORD *)Src + 4);
  v4[5] = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  v4[6] = 0;
  v4[7] = 0;
  v4[8] = 0;
  v4[6] = *(_DWORD *)a3;
  v4[7] = *(_DWORD *)(a3 + 4);
  v4[8] = *(_DWORD *)(a3 + 8);
  result = v4;
  *(_DWORD *)a3 = 0;
  *(_DWORD *)(a3 + 4) = 0;
  *(_DWORD *)(a3 + 8) = 0;
  return result;
}

//----- (0040E510) --------------------------------------------------------
void *__thiscall sub_40E510(void *Dst, void *Src, void *a3, int a4)
{
  void *v4; // edi@1
  void (__cdecl *v5)(void *, const void *, size_t); // ecx@1
  int v6; // ebx@5
  void *result; // eax@9

  v4 = Dst;
  v5 = (void (__cdecl *)(void *, const void *, size_t))memmove;
  *((_DWORD *)v4 + 5) = 15;
  *((_DWORD *)v4 + 4) = 0;
  *(_BYTE *)v4 = 0;
  if ( *((_DWORD *)Src + 5) >= 0x10u )
  {
    *(_DWORD *)v4 = *(_DWORD *)Src;
    *(_DWORD *)Src = 0;
  }
  else if ( *((_DWORD *)Src + 4) != -1 )
  {
    memmove(v4, Src, *((_DWORD *)Src + 4) + 1);
    v5 = (void (__cdecl *)(void *, const void *, size_t))memmove;
  }
  *((_DWORD *)v4 + 4) = *((_DWORD *)Src + 4);
  *((_DWORD *)v4 + 5) = *((_DWORD *)Src + 5);
  *((_DWORD *)Src + 5) = 15;
  *((_DWORD *)Src + 4) = 0;
  *(_BYTE *)Src = 0;
  v6 = (int)v4 + 24;
  *(_DWORD *)(v6 + 20) = 15;
  *(_DWORD *)(v6 + 16) = 0;
  *(_BYTE *)v6 = 0;
  if ( *((_DWORD *)a3 + 5) >= 0x10u )
  {
    *(_DWORD *)v6 = *(_DWORD *)a3;
    *(_DWORD *)a3 = 0;
  }
  else if ( *((_DWORD *)a3 + 4) != -1 )
  {
    v5((char *)v4 + 24, a3, *((_DWORD *)a3 + 4) + 1);
  }
  *((_DWORD *)v4 + 10) = *((_DWORD *)a3 + 4);
  *((_DWORD *)v4 + 11) = *((_DWORD *)a3 + 5);
  *((_DWORD *)a3 + 5) = 15;
  *((_DWORD *)a3 + 4) = 0;
  result = v4;
  *(_BYTE *)a3 = 0;
  return result;
}

//----- (0040E5E0) --------------------------------------------------------
int __thiscall sub_40E5E0(void *this)
{
  void *v1; // ebx@1
  unsigned int v2; // edi@1
  int v3; // eax@1
  int v4; // esi@2
  int v5; // eax@6
  int v6; // edx@13
  char v8; // [sp+10h] [bp-20h]@11
  char v9; // [sp+1Ch] [bp-14h]@1
  int *v10; // [sp+20h] [bp-10h]@1
  int v11; // [sp+2Ch] [bp-4h]@1

  v1 = this;
  std::_Lockit::_Lockit((std::_Lockit *)&v9, 0);
  v11 = 0;
  v10 = (int *)dword_4188C4;
  v2 = std::locale::id::operator unsigned int(std::codecvt<char,char,int>::id);
  v3 = *(_DWORD *)v1;
  if ( v2 >= *(_DWORD *)(*(_DWORD *)v1 + 12) )
  {
    v4 = 0;
  }
  else
  {
    v4 = *(_DWORD *)(*(_DWORD *)(v3 + 8) + 4 * v2);
    if ( v4 )
      goto LABEL_14;
  }
  if ( !*(_BYTE *)(v3 + 20) )
    goto LABEL_8;
  v5 = std::locale::_Getgloballocale();
  if ( v2 < *(_DWORD *)(v5 + 12) )
  {
    v4 = *(_DWORD *)(*(_DWORD *)(v5 + 8) + 4 * v2);
LABEL_8:
    if ( v4 )
      goto LABEL_14;
  }
  v4 = (int)v10;
  if ( !v10 )
  {
    if ( std::codecvt<char,char,int>::_Getcat(&v10, v1) == -1 )
    {
      std::bad_cast::bad_cast((std::bad_cast *)&v8, "bad cast");
      CxxThrowException(&v8, &unk_4145F4);
    }
    v4 = (int)v10;
    v6 = *v10;
    dword_4188C4 = (int)v10;
    (*(void (__thiscall **)(int *))(v6 + 4))(v10);
    sub_410A13(v4);
  }
LABEL_14:
  std::_Lockit::~_Lockit((std::_Lockit *)&v9);
  return v4;
}
// 411424: using guessed type int __cdecl CxxThrowException(_DWORD, _DWORD);
// 413108: using guessed type _DWORD __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 41310C: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this, _DWORD);
// 413110: using guessed type int std::locale::_Getgloballocale(void);
// 413114: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 413164: using guessed type int __cdecl std::codecvt<char,char,int>::_Getcat(_DWORD, _DWORD);
// 413218: using guessed type _DWORD __thiscall std::bad_cast::bad_cast(std::bad_cast *__hidden this, const char *);
// 4188C4: using guessed type int dword_4188C4;

//----- (0040E6D0) --------------------------------------------------------
int __thiscall sub_40E6D0(int *this, int a2, int a3)
{
  int *v3; // ebx@1
  int v4; // esi@1
  int v5; // edx@1
  int v6; // ecx@1
  int i; // eax@2
  int v8; // ecx@4
  int result; // eax@4

  v3 = this;
  v4 = *this;
  *(_DWORD *)(v4 + 4) = sub_40F180(this, *(_DWORD *)(*(_DWORD *)a2 + 4), *this, a3);
  v5 = *v3;
  v3[1] = *(_DWORD *)(a2 + 4);
  v6 = *(_DWORD *)(v5 + 4);
  if ( *(_BYTE *)(v6 + 13) )
  {
    *(_DWORD *)v5 = v5;
    result = *v3;
    *(_DWORD *)(result + 8) = result;
  }
  else
  {
    for ( i = *(_DWORD *)v6; !*(_BYTE *)(i + 13); i = *(_DWORD *)i )
      v6 = i;
    *(_DWORD *)v5 = v6;
    v8 = *(_DWORD *)(*v3 + 4);
    for ( result = *(_DWORD *)(v8 + 8); !*(_BYTE *)(result + 13); result = *(_DWORD *)(result + 8) )
      v8 = result;
    *(_DWORD *)(*v3 + 8) = v8;
  }
  return result;
}

//----- (0040E8A0) --------------------------------------------------------
int __thiscall sub_40E8A0(int this, int a2, void *Src, size_t Size)
{
  int v4; // esi@1
  unsigned int v5; // ecx@2
  unsigned int v6; // eax@3
  int v7; // edx@7
  int result; // eax@11
  size_t v9; // ecx@13
  size_t v10; // ebx@13
  unsigned int v11; // eax@16
  unsigned int v12; // edx@18
  unsigned int v13; // eax@20
  char *v14; // edx@21
  char *v15; // eax@28
  char *v16; // eax@33
  int Sizea; // [sp+18h] [bp+10h]@16

  v4 = this;
  if ( Src )
  {
    v5 = *(_DWORD *)(this + 20);
    v6 = v5 < 0x10 ? v4 : *(_DWORD *)v4;
    if ( (unsigned int)Src >= v6 )
    {
      v7 = v5 < 0x10 ? v4 : *(_DWORD *)v4;
      if ( v7 + *(_DWORD *)(v4 + 16) > (unsigned int)Src )
      {
        if ( v5 < 0x10 )
          result = ((int (__thiscall *)(int, unsigned int, int, char *, size_t))loc_40E750)(
                     v4,
                     v5,
                     v4,
                     (char *)Src - v4,
                     Size);
        else
          result = ((int (__thiscall *)(int, unsigned int, int, char *, size_t))loc_40E750)(
                     v4,
                     v5,
                     v4,
                     (char *)Src - *(_DWORD *)v4,
                     Size);
        return result;
      }
    }
  }
  v9 = *(_DWORD *)(v4 + 16);
  v10 = Size;
  if ( -1 - v9 <= Size )
    std::_Xlength_error("string too long");
  if ( !Size )
    return v4;
  v11 = v9 + Size;
  Sizea = v9 + Size;
  if ( v9 + v10 > 0xFFFFFFFE )
    std::_Xlength_error("string too long");
  v12 = *(_DWORD *)(v4 + 20);
  if ( v12 < v11 )
  {
    sub_405A60(v4, v11, v9);
    if ( Sizea )
    {
LABEL_20:
      v13 = *(_DWORD *)(v4 + 20);
      if ( v13 < 0x10 )
        v14 = (char *)v4;
      else
        v14 = *(char **)v4;
      if ( v13 < 0x10 )
        v15 = (char *)v4;
      else
        v15 = *(char **)v4;
      if ( *(_DWORD *)(v4 + 16) )
        memmove(&v15[v10], v14, *(_DWORD *)(v4 + 16));
      if ( *(_DWORD *)(v4 + 20) < 0x10u )
        v16 = (char *)v4;
      else
        v16 = *(char **)v4;
      if ( v10 )
        memcpy(v16, Src, v10);
      sub_405C80(v4, Sizea);
    }
    return v4;
  }
  if ( v11 )
    goto LABEL_20;
  *(_DWORD *)(v4 + 16) = 0;
  if ( v12 < 0x10 )
  {
    result = v4;
    *(_BYTE *)v4 = 0;
  }
  else
  {
    **(_BYTE **)v4 = 0;
    result = v4;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (0040E9E0) --------------------------------------------------------
_BYTE *__thiscall sub_40E9E0(void *Dst, int a2, int a3, int a4)
{
  _DWORD *v4; // esi@1
  _BYTE *result; // eax@1
  unsigned int v6; // edi@1
  int v7; // ecx@1
  bool v8; // cf@4
  _DWORD *v9; // eax@5
  int v10; // [sp+0h] [bp-24h]@1
  void *v11; // [sp+10h] [bp-14h]@1
  int *v12; // [sp+14h] [bp-10h]@1
  int v13; // [sp+20h] [bp-4h]@9

  v12 = &v10;
  v4 = Dst;
  v11 = Dst;
  result = (_BYTE *)a2;
  v6 = *((_DWORD *)Dst + 4);
  v7 = a3 - a2;
  if ( v6 <= a3 - a2 && v4[5] != v7 )
  {
    if ( (unsigned __int8)sub_410630(v4, a3 - a2, 1) )
    {
      v8 = v4[5] < 8u;
      v4[4] = v6;
      if ( v8 )
        v9 = v4;
      else
        v9 = (_DWORD *)*v4;
      v7 = 0;
      *((_WORD *)v9 + v6) = 0;
    }
    result = (_BYTE *)a2;
  }
  v13 = 0;
  while ( result != (_BYTE *)a3 )
  {
    sub_4106F0((int)v4, v7, *result);
    result = (_BYTE *)(a2++ + 1);
  }
  return result;
}

//----- (0040EAC0) --------------------------------------------------------
_DWORD *__thiscall sub_40EAC0(_DWORD *this, void *Src)
{
  _DWORD *result; // eax@1
  _DWORD *v3; // esi@1

  result = sub_40F310(this);
  v3 = result;
  *((_WORD *)result + 6) = 0;
  if ( result != (_DWORD *)-16 )
  {
    sub_403990(result + 4, Src, (int)(result + 4));
    result = v3;
  }
  return result;
}

//----- (0040EAF0) --------------------------------------------------------
int *__thiscall sub_40EAF0(int this, int *a2, int a3, int a4, int a5)
{
  int *v5; // ebx@1
  int *result; // eax@2
  int v7; // ecx@3
  int v8; // ecx@4
  int v9; // esi@10
  int v10; // ecx@10
  int v11; // ecx@11
  int v12; // edi@15
  int v13; // ecx@20
  int v14; // [sp-8h] [bp-30h]@11
  int v15; // [sp-4h] [bp-2Ch]@11
  int v16; // [sp+0h] [bp-28h]@1
  char v17; // [sp+10h] [bp-18h]@20
  int v18; // [sp+14h] [bp-14h]@10
  int *v19; // [sp+18h] [bp-10h]@1
  int v20; // [sp+24h] [bp-4h]@1

  v19 = &v16;
  v5 = (int *)this;
  v20 = 0;
  if ( !*(_DWORD *)(this + 4) )
  {
    sub_40F420(this, a2, 1, *(_DWORD *)this, this, a5);
    return a2;
  }
  v7 = *(_DWORD *)this;
  if ( a3 == *(_DWORD *)*v5 )
  {
    if ( sub_402D20(a4, a3 + 16) )
    {
      sub_40F420((int)v5, a2, 1, a3, v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v7 )
  {
    if ( sub_402D20(*(_DWORD *)(v7 + 8) + 16, a4) )
    {
      sub_40F420((int)v5, a2, 0, *(_DWORD *)(*v5 + 8), v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( sub_402D20(a4, a3 + 16) )
  {
    v18 = a3;
    sub_4046A0(&v18);
    v9 = v18;
    if ( sub_402D20(v18 + 16, a4) )
    {
      v15 = a5;
      v14 = v10;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_40F420((int)v5, a2, 1, a3, v14, a5);
        return a2;
      }
      goto LABEL_12;
    }
  }
  if ( sub_402D20(a3 + 16, a4) )
  {
    v9 = a3;
    v18 = a3;
    sub_403140(&v18);
    v12 = v18;
    if ( v18 == *v5 )
      goto LABEL_18;
    if ( sub_402D20(a4, v18 + 16) )
    {
      v9 = a3;
LABEL_18:
      v15 = a5;
      v14 = v8;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_40F420((int)v5, a2, 1, v12, v14, a5);
        return a2;
      }
LABEL_12:
      sub_40F420(v11, a2, 0, v9, v14, v15);
      return a2;
    }
  }
LABEL_20:
  v20 = -1;
  v13 = *(_DWORD *)sub_40F630(v5, (int)&v17, v8, a4, a5);
  result = a2;
  *a2 = v13;
  return result;
}

//----- (0040ED20) --------------------------------------------------------
int *__thiscall sub_40ED20(int this, int *a2, int a3, int a4, int a5)
{
  int *v5; // ebx@1
  int *result; // eax@2
  int v7; // ecx@3
  int v8; // ecx@4
  int v9; // esi@10
  int v10; // ecx@10
  int v11; // ecx@11
  int v12; // edi@15
  int v13; // ecx@20
  int v14; // [sp-8h] [bp-30h]@11
  int v15; // [sp-4h] [bp-2Ch]@11
  int v16; // [sp+0h] [bp-28h]@1
  char v17; // [sp+10h] [bp-18h]@20
  int v18; // [sp+14h] [bp-14h]@10
  int *v19; // [sp+18h] [bp-10h]@1
  int v20; // [sp+24h] [bp-4h]@1

  v19 = &v16;
  v5 = (int *)this;
  v20 = 0;
  if ( !*(_DWORD *)(this + 4) )
  {
    sub_40F840(this, a2, 1, *(_DWORD *)this, this, a5);
    return a2;
  }
  v7 = *(_DWORD *)this;
  if ( a3 == *(_DWORD *)*v5 )
  {
    if ( sub_402D20(a4, a3 + 16) )
    {
      sub_40F840((int)v5, a2, 1, a3, v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v7 )
  {
    if ( sub_402D20(*(_DWORD *)(v7 + 8) + 16, a4) )
    {
      sub_40F840((int)v5, a2, 0, *(_DWORD *)(*v5 + 8), v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( sub_402D20(a4, a3 + 16) )
  {
    v18 = a3;
    sub_4046A0(&v18);
    v9 = v18;
    if ( sub_402D20(v18 + 16, a4) )
    {
      v15 = a5;
      v14 = v10;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_40F840((int)v5, a2, 1, a3, v14, a5);
        return a2;
      }
      goto LABEL_12;
    }
  }
  if ( sub_402D20(a3 + 16, a4) )
  {
    v9 = a3;
    v18 = a3;
    sub_403140(&v18);
    v12 = v18;
    if ( v18 == *v5 )
      goto LABEL_18;
    if ( sub_402D20(a4, v18 + 16) )
    {
      v9 = a3;
LABEL_18:
      v15 = a5;
      v14 = v8;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_40F840((int)v5, a2, 1, v12, v14, a5);
        return a2;
      }
LABEL_12:
      sub_40F840(v11, a2, 0, v9, v14, v15);
      return a2;
    }
  }
LABEL_20:
  v20 = -1;
  v13 = *(_DWORD *)sub_40FA50(v5, (int)&v17, v8, a4, a5);
  result = a2;
  *a2 = v13;
  return result;
}

//----- (0040EF50) --------------------------------------------------------
_DWORD *__thiscall sub_40EF50(int this, _DWORD *a2, int a3, int a4, int a5)
{
  int *v5; // ebx@1
  _DWORD *result; // eax@2
  int v7; // ecx@3
  int v8; // ecx@4
  int v9; // esi@10
  int v10; // ecx@10
  int v11; // ecx@11
  int v12; // edi@15
  int v13; // ecx@20
  int v14; // [sp-8h] [bp-30h]@11
  int v15; // [sp-4h] [bp-2Ch]@11
  int v16; // [sp+0h] [bp-28h]@1
  char v17; // [sp+10h] [bp-18h]@20
  int v18; // [sp+14h] [bp-14h]@10
  int *v19; // [sp+18h] [bp-10h]@1
  int v20; // [sp+24h] [bp-4h]@1

  v19 = &v16;
  v5 = (int *)this;
  v20 = 0;
  if ( !*(_DWORD *)(this + 4) )
  {
    sub_40FC60(this, a2, 1, *(_DWORD *)this, this, a5);
    return a2;
  }
  v7 = *(_DWORD *)this;
  if ( a3 == *(_DWORD *)*v5 )
  {
    if ( sub_402D20(a4, a3 + 16) )
    {
      sub_40FC60((int)v5, a2, 1, a3, v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v7 )
  {
    if ( sub_402D20(*(_DWORD *)(v7 + 8) + 16, a4) )
    {
      sub_40FC60((int)v5, a2, 0, *(_DWORD *)(*v5 + 8), v8, a5);
      return a2;
    }
    goto LABEL_20;
  }
  if ( sub_402D20(a4, a3 + 16) )
  {
    v18 = a3;
    sub_4046A0(&v18);
    v9 = v18;
    if ( sub_402D20(v18 + 16, a4) )
    {
      v15 = a5;
      v14 = v10;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_40FC60((int)v5, a2, 1, a3, v14, a5);
        return a2;
      }
      goto LABEL_12;
    }
  }
  if ( sub_402D20(a3 + 16, a4) )
  {
    v9 = a3;
    v18 = a3;
    sub_403140(&v18);
    v12 = v18;
    if ( v18 == *v5 )
      goto LABEL_18;
    if ( sub_402D20(a4, v18 + 16) )
    {
      v9 = a3;
LABEL_18:
      v15 = a5;
      v14 = v8;
      v11 = (int)v5;
      if ( !*(_BYTE *)(*(_DWORD *)(v9 + 8) + 13) )
      {
        sub_40FC60((int)v5, a2, 1, v12, v14, a5);
        return a2;
      }
LABEL_12:
      sub_40FC60(v11, a2, 0, v9, v14, v15);
      return a2;
    }
  }
LABEL_20:
  v20 = -1;
  v13 = *(_DWORD *)sub_40FEB0(v5, (int)&v17, v8, a4, a5);
  result = a2;
  *a2 = v13;
  return result;
}

//----- (0040F180) --------------------------------------------------------
_DWORD *__thiscall sub_40F180(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // edi@1
  _DWORD *v5; // eax@2
  _DWORD *v6; // ebx@2
  bool v7; // zf@2
  int v9; // [sp+0h] [bp-24h]@1
  _DWORD *v10; // [sp+10h] [bp-14h]@1
  int *v11; // [sp+14h] [bp-10h]@1
  int v12; // [sp+20h] [bp-4h]@2

  v11 = &v9;
  v10 = this;
  v4 = (_DWORD *)*this;
  if ( !*(_BYTE *)(a2 + 13) )
  {
    v5 = sub_4101C0(this, a2 + 16);
    v6 = v5;
    v5[1] = a3;
    *((_BYTE *)v5 + 12) = *(_BYTE *)(a2 + 12);
    v7 = *((_BYTE *)v4 + 13) == 0;
    v12 = 0;
    if ( !v7 )
      v4 = v5;
    *v5 = sub_40F180(*(_DWORD *)a2, v5, a4);
    v6[2] = sub_40F180(*(_DWORD *)(a2 + 8), v6, a4);
  }
  return v4;
}

//----- (0040F21F) --------------------------------------------------------
void __usercall __noreturn sub_40F21F(int a1@<ebp>)
{
  sub_40D4C0(*(void **)(a1 - 20), *(_DWORD *)(a1 + 12));
  CxxThrowException(0, 0);
}
// 411424: using guessed type int __cdecl CxxThrowException(_DWORD, _DWORD);

//----- (0040F240) --------------------------------------------------------
int __fastcall sub_40F240(int a1, _DWORD *a2)
{
  _DWORD *v2; // ebx@1
  _DWORD *v3; // esi@2
  int result; // eax@7

  v2 = a2;
  if ( (_DWORD *)a1 != a2 )
  {
    v3 = (_DWORD *)(a1 + 44);
    do
    {
      if ( *v3 >= 0x10u )
        operator delete((void *)*(v3 - 5));
      *v3 = 15;
      *(v3 - 1) = 0;
      *((_BYTE *)v3 - 20) = 0;
      if ( *(v3 - 6) >= 0x10u )
        operator delete((void *)*(v3 - 11));
      *(v3 - 6) = 15;
      *(v3 - 7) = 0;
      *((_BYTE *)v3 - 44) = 0;
      v3 += 12;
      result = (int)(v3 - 11);
    }
    while ( v3 - 11 != v2 );
  }
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040F2A0) --------------------------------------------------------
void __stdcall sub_40F2A0(int a1)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 + 40);
  if ( v1 )
  {
    sub_40F240(v1, *(_DWORD **)(a1 + 44));
    operator delete(*(void **)(a1 + 40));
    *(_DWORD *)(a1 + 40) = 0;
    *(_DWORD *)(a1 + 44) = 0;
    *(_DWORD *)(a1 + 48) = 0;
  }
  if ( *(_DWORD *)(a1 + 36) >= 0x10u )
    operator delete(*(void **)(a1 + 16));
  *(_DWORD *)(a1 + 36) = 15;
  *(_DWORD *)(a1 + 32) = 0;
  *(_BYTE *)(a1 + 16) = 0;
  operator delete((void *)a1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040F310) --------------------------------------------------------
_DWORD *__thiscall sub_40F310(_DWORD *this)
{
  _DWORD *v1; // esi@1
  _DWORD *v2; // edx@1

  v1 = this;
  v2 = operator new(0x34u);
  if ( !v2 )
    std::_Xbad_alloc();
  *v2 = *v1;
  if ( v2 != (_DWORD *)-4 )
    v2[1] = *v1;
  if ( v2 != (_DWORD *)-8 )
    v2[2] = *v1;
  return v2;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (0040F350) --------------------------------------------------------
void __stdcall sub_40F350(int a1)
{
  int v1; // eax@1

  v1 = *(_DWORD *)(a1 + 40);
  if ( v1 )
  {
    sub_40DB30(v1, *(_DWORD *)(a1 + 44));
    operator delete(*(void **)(a1 + 40));
    *(_DWORD *)(a1 + 40) = 0;
    *(_DWORD *)(a1 + 44) = 0;
    *(_DWORD *)(a1 + 48) = 0;
  }
  if ( *(_DWORD *)(a1 + 36) >= 0x10u )
    operator delete(*(void **)(a1 + 16));
  *(_DWORD *)(a1 + 36) = 15;
  *(_DWORD *)(a1 + 32) = 0;
  *(_BYTE *)(a1 + 16) = 0;
  operator delete((void *)a1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040F3C0) --------------------------------------------------------
void __stdcall sub_40F3C0(int a1)
{
  if ( *(_DWORD *)(a1 + 40) )
  {
    operator delete(*(void **)(a1 + 40));
    *(_DWORD *)(a1 + 40) = 0;
    *(_DWORD *)(a1 + 44) = 0;
    *(_DWORD *)(a1 + 48) = 0;
  }
  if ( *(_DWORD *)(a1 + 36) >= 0x10u )
    operator delete(*(void **)(a1 + 16));
  *(_DWORD *)(a1 + 36) = 15;
  *(_DWORD *)(a1 + 32) = 0;
  *(_BYTE *)(a1 + 16) = 0;
  operator delete((void *)a1);
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040F420) --------------------------------------------------------
int *__thiscall sub_40F420(int this, int *a2, char a3, int a4, int a5, int a6)
{
  int v6; // edi@1
  unsigned int v7; // eax@1
  int v8; // eax@10
  int v9; // ecx@11
  int v10; // esi@11
  int v11; // edx@11
  int v12; // edx@14
  int v13; // ecx@18
  int v14; // edx@22
  int v15; // esi@22
  int v16; // ecx@22
  int v17; // ecx@26
  int v18; // edx@32
  int v19; // ecx@32
  int v20; // ecx@36
  int v21; // ecx@44
  int *result; // eax@50

  v6 = this;
  v7 = *(_DWORD *)(this + 4);
  if ( v7 >= 0x4EC4EC3 )
  {
    sub_40F2A0(a6);
    std::_Xlength_error("map/set<T> too long");
  }
  *(_DWORD *)(v6 + 4) = v7 + 1;
  *(_DWORD *)(a6 + 4) = a4;
  if ( a4 == *(_DWORD *)v6 )
  {
    *(_DWORD *)(*(_DWORD *)v6 + 4) = a6;
    **(_DWORD **)v6 = a6;
    *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  else if ( a3 )
  {
    *(_DWORD *)a4 = a6;
    if ( a4 == **(_DWORD **)v6 )
      **(_DWORD **)v6 = a6;
  }
  else
  {
    *(_DWORD *)(a4 + 8) = a6;
    if ( a4 == *(_DWORD *)(*(_DWORD *)v6 + 8) )
      *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  v8 = a6;
  while ( !*(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) )
  {
    v9 = *(_DWORD *)(v8 + 4);
    v10 = *(_DWORD *)(v9 + 4);
    v11 = *(_DWORD *)v10;
    if ( v9 == *(_DWORD *)v10 )
    {
      v11 = *(_DWORD *)(v10 + 8);
      if ( *(_BYTE *)(v11 + 12) )
      {
        if ( v8 == *(_DWORD *)(v9 + 8) )
        {
          v8 = *(_DWORD *)(v8 + 4);
          v12 = *(_DWORD *)(v9 + 8);
          *(_DWORD *)(v9 + 8) = *(_DWORD *)v12;
          if ( !*(_BYTE *)(*(_DWORD *)v12 + 13) )
            *(_DWORD *)(*(_DWORD *)v12 + 4) = v9;
          *(_DWORD *)(v12 + 4) = *(_DWORD *)(v9 + 4);
          if ( v9 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v12;
          }
          else
          {
            v13 = *(_DWORD *)(v9 + 4);
            if ( v8 == *(_DWORD *)v13 )
              *(_DWORD *)v13 = v12;
            else
              *(_DWORD *)(v13 + 8) = v12;
          }
          *(_DWORD *)v12 = v8;
          *(_DWORD *)(v8 + 4) = v12;
        }
        *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
        v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
        v15 = *(_DWORD *)v14;
        *(_DWORD *)v14 = *(_DWORD *)(*(_DWORD *)v14 + 8);
        v16 = *(_DWORD *)(v15 + 8);
        if ( !*(_BYTE *)(v16 + 13) )
          *(_DWORD *)(v16 + 4) = v14;
        *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
          *(_DWORD *)(v15 + 8) = v14;
        }
        else
        {
          v17 = *(_DWORD *)(v14 + 4);
          if ( v14 == *(_DWORD *)(v17 + 8) )
          {
            *(_DWORD *)(v17 + 8) = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
          else
          {
            *(_DWORD *)v17 = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
        }
LABEL_48:
        *(_DWORD *)(v14 + 4) = v15;
        continue;
      }
    }
    else if ( *(_BYTE *)(v11 + 12) )
    {
      if ( v8 == *(_DWORD *)v9 )
      {
        v8 = *(_DWORD *)(v8 + 4);
        v18 = *(_DWORD *)v9;
        *(_DWORD *)v9 = *(_DWORD *)(*(_DWORD *)v9 + 8);
        v19 = *(_DWORD *)(v18 + 8);
        if ( !*(_BYTE *)(v19 + 13) )
          *(_DWORD *)(v19 + 4) = v8;
        *(_DWORD *)(v18 + 4) = *(_DWORD *)(v8 + 4);
        if ( v8 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v18;
        }
        else
        {
          v20 = *(_DWORD *)(v8 + 4);
          if ( v8 == *(_DWORD *)(v20 + 8) )
            *(_DWORD *)(v20 + 8) = v18;
          else
            *(_DWORD *)v20 = v18;
        }
        *(_DWORD *)(v18 + 8) = v8;
        *(_DWORD *)(v8 + 4) = v18;
      }
      *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
      v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
      v15 = *(_DWORD *)(v14 + 8);
      *(_DWORD *)(v14 + 8) = *(_DWORD *)v15;
      if ( !*(_BYTE *)(*(_DWORD *)v15 + 13) )
        *(_DWORD *)(*(_DWORD *)v15 + 4) = v14;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
      if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
      }
      else
      {
        v21 = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)v21 )
          *(_DWORD *)v21 = v15;
        else
          *(_DWORD *)(v21 + 8) = v15;
      }
      *(_DWORD *)v15 = v14;
      goto LABEL_48;
    }
    *(_BYTE *)(v9 + 12) = 1;
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
    v8 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *a2 = a6;
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (0040F630) --------------------------------------------------------
int __thiscall sub_40F630(int *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // edi@1
  char v9; // al@1
  bool v10; // zf@1
  int v11; // eax@2
  unsigned int v12; // ebx@4
  int v13; // ecx@4
  int v14; // esi@7
  unsigned int v15; // edx@9
  unsigned int v16; // edx@12
  bool v17; // cf@16
  unsigned __int8 v18; // al@18
  unsigned __int8 v19; // al@20
  unsigned __int8 v20; // al@22
  int v21; // eax@23
  bool v22; // sf@25
  signed int v23; // eax@27
  int v24; // edi@34
  int v25; // esi@36
  int *v26; // eax@38
  int v27; // ecx@39
  int result; // eax@39
  unsigned int v29; // ebx@41
  _DWORD *v30; // ecx@41
  unsigned int v31; // edi@43
  unsigned int v32; // eax@45
  int v33; // eax@47
  int v34; // ecx@47
  bool v35; // sf@47
  signed int v36; // eax@49
  int v37; // [sp+0h] [bp-38h]@1
  int v38; // [sp+10h] [bp-28h]@1
  int *v39; // [sp+14h] [bp-24h]@1
  int v40; // [sp+18h] [bp-20h]@1
  unsigned int v41; // [sp+1Ch] [bp-1Ch]@2
  int v42; // [sp+20h] [bp-18h]@1
  int v43; // [sp+24h] [bp-14h]@2
  int *v44; // [sp+28h] [bp-10h]@1
  int v45; // [sp+34h] [bp-4h]@1

  v44 = &v37;
  v5 = (int)this;
  v39 = this;
  v45 = 0;
  v6 = *this;
  v7 = v6;
  v8 = *(_DWORD *)(v6 + 4);
  v9 = 1;
  v10 = *(_BYTE *)(v8 + 13) == 0;
  v38 = v6;
  v42 = v6;
  LOBYTE(v40) = 1;
  if ( v10 )
  {
    v11 = a4;
    v43 = a4;
    v41 = *(_DWORD *)(a4 + 16);
    while ( 1 )
    {
      v17 = *(_DWORD *)(v8 + 36) < 0x10u;
      v12 = *(_DWORD *)(v8 + 32);
      v13 = v8 + 16;
      v42 = v8;
      if ( !v17 )
        v13 = *(_DWORD *)v13;
      if ( *(_DWORD *)(v11 + 20) < 0x10u )
        v14 = v11;
      else
        v14 = *(_DWORD *)v11;
      v15 = v12;
      if ( v41 < v12 )
        v15 = v41;
      if ( v15 )
        break;
LABEL_26:
      if ( v41 >= v12 )
        v23 = v41 != v12;
      else
        v23 = -1;
      v22 = v23 < 0;
LABEL_30:
      v9 = v22;
      LOBYTE(v40) = v22;
      if ( v22 )
        v8 = *(_DWORD *)v8;
      else
        v8 = *(_DWORD *)(v8 + 8);
      if ( *(_BYTE *)(v8 + 13) )
      {
        v24 = a4;
        v7 = v42;
        v6 = v38;
        v5 = (int)v39;
        goto LABEL_36;
      }
      v11 = a4;
    }
    v17 = v15 < 4;
    v16 = v15 - 4;
    if ( v17 )
    {
LABEL_15:
      if ( v16 == -4 )
        goto LABEL_24;
    }
    else
    {
      while ( *(_DWORD *)v14 == *(_DWORD *)v13 )
      {
        v14 += 4;
        v13 += 4;
        v17 = v16 < 4;
        v16 -= 4;
        if ( v17 )
          goto LABEL_15;
      }
    }
    v17 = *(_BYTE *)v14 < *(_BYTE *)v13;
    if ( *(_BYTE *)v14 != *(_BYTE *)v13
      || v16 != -3
      && ((v18 = *(_BYTE *)(v14 + 1), v17 = v18 < *(_BYTE *)(v13 + 1), v18 != *(_BYTE *)(v13 + 1))
       || v16 != -2
       && ((v19 = *(_BYTE *)(v14 + 2), v17 = v19 < *(_BYTE *)(v13 + 2), v19 != *(_BYTE *)(v13 + 2))
        || v16 != -1 && (v20 = *(_BYTE *)(v14 + 3), v17 = v20 < *(_BYTE *)(v13 + 3), v20 != *(_BYTE *)(v13 + 3)))) )
    {
      v21 = -v17 | 1;
      goto LABEL_25;
    }
LABEL_24:
    v21 = 0;
LABEL_25:
    v22 = v21 < 0;
    if ( v21 )
      goto LABEL_30;
    goto LABEL_26;
  }
  v24 = a4;
  v43 = a4;
LABEL_36:
  v25 = v7;
  a4 = v7;
  if ( v9 )
  {
    if ( v7 == *(_DWORD *)v6 )
    {
      v26 = sub_40F420(v5, &a4, 1, v7, v7, a5);
LABEL_39:
      v27 = *v26;
      result = a2;
      *(_DWORD *)a2 = v27;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_4046A0(&a4);
    v25 = a4;
  }
  v29 = *(_DWORD *)(v24 + 16);
  v30 = (_DWORD *)(v25 + 16);
  if ( *(_DWORD *)(v24 + 20) >= 0x10u )
    v43 = *(_DWORD *)v24;
  v31 = *(_DWORD *)(v25 + 32);
  if ( *(_DWORD *)(v25 + 36) >= 0x10u )
    v30 = (_DWORD *)*v30;
  v32 = v29;
  if ( v31 < v29 )
    v32 = *(_DWORD *)(v25 + 32);
  v33 = sub_4055E0(v43, (int)v30, v32);
  v35 = v33 < 0;
  if ( !v33 )
  {
    if ( v31 >= v29 )
      v36 = v31 != v29;
    else
      v36 = -1;
    v35 = v36 < 0;
  }
  if ( v35 )
  {
    v26 = sub_40F420((int)v39, &v38, v40, v42, v34, a5);
    goto LABEL_39;
  }
  sub_40F2A0(a5);
  result = a2;
  *(_DWORD *)a2 = v25;
  *(_BYTE *)(a2 + 4) = 0;
  return result;
}

//----- (0040F840) --------------------------------------------------------
int *__thiscall sub_40F840(int this, int *a2, char a3, int a4, int a5, int a6)
{
  int v6; // edi@1
  unsigned int v7; // eax@1
  int v8; // eax@10
  int v9; // ecx@11
  int v10; // esi@11
  int v11; // edx@11
  int v12; // edx@14
  int v13; // ecx@18
  int v14; // edx@22
  int v15; // esi@22
  int v16; // ecx@22
  int v17; // ecx@26
  int v18; // edx@32
  int v19; // ecx@32
  int v20; // ecx@36
  int v21; // ecx@44
  int *result; // eax@50

  v6 = this;
  v7 = *(_DWORD *)(this + 4);
  if ( v7 >= 0x4EC4EC3 )
  {
    sub_40F350(a6);
    std::_Xlength_error("map/set<T> too long");
  }
  *(_DWORD *)(v6 + 4) = v7 + 1;
  *(_DWORD *)(a6 + 4) = a4;
  if ( a4 == *(_DWORD *)v6 )
  {
    *(_DWORD *)(*(_DWORD *)v6 + 4) = a6;
    **(_DWORD **)v6 = a6;
    *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  else if ( a3 )
  {
    *(_DWORD *)a4 = a6;
    if ( a4 == **(_DWORD **)v6 )
      **(_DWORD **)v6 = a6;
  }
  else
  {
    *(_DWORD *)(a4 + 8) = a6;
    if ( a4 == *(_DWORD *)(*(_DWORD *)v6 + 8) )
      *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  v8 = a6;
  while ( !*(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) )
  {
    v9 = *(_DWORD *)(v8 + 4);
    v10 = *(_DWORD *)(v9 + 4);
    v11 = *(_DWORD *)v10;
    if ( v9 == *(_DWORD *)v10 )
    {
      v11 = *(_DWORD *)(v10 + 8);
      if ( *(_BYTE *)(v11 + 12) )
      {
        if ( v8 == *(_DWORD *)(v9 + 8) )
        {
          v8 = *(_DWORD *)(v8 + 4);
          v12 = *(_DWORD *)(v9 + 8);
          *(_DWORD *)(v9 + 8) = *(_DWORD *)v12;
          if ( !*(_BYTE *)(*(_DWORD *)v12 + 13) )
            *(_DWORD *)(*(_DWORD *)v12 + 4) = v9;
          *(_DWORD *)(v12 + 4) = *(_DWORD *)(v9 + 4);
          if ( v9 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v12;
          }
          else
          {
            v13 = *(_DWORD *)(v9 + 4);
            if ( v8 == *(_DWORD *)v13 )
              *(_DWORD *)v13 = v12;
            else
              *(_DWORD *)(v13 + 8) = v12;
          }
          *(_DWORD *)v12 = v8;
          *(_DWORD *)(v8 + 4) = v12;
        }
        *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
        v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
        v15 = *(_DWORD *)v14;
        *(_DWORD *)v14 = *(_DWORD *)(*(_DWORD *)v14 + 8);
        v16 = *(_DWORD *)(v15 + 8);
        if ( !*(_BYTE *)(v16 + 13) )
          *(_DWORD *)(v16 + 4) = v14;
        *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
          *(_DWORD *)(v15 + 8) = v14;
        }
        else
        {
          v17 = *(_DWORD *)(v14 + 4);
          if ( v14 == *(_DWORD *)(v17 + 8) )
          {
            *(_DWORD *)(v17 + 8) = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
          else
          {
            *(_DWORD *)v17 = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
        }
LABEL_48:
        *(_DWORD *)(v14 + 4) = v15;
        continue;
      }
    }
    else if ( *(_BYTE *)(v11 + 12) )
    {
      if ( v8 == *(_DWORD *)v9 )
      {
        v8 = *(_DWORD *)(v8 + 4);
        v18 = *(_DWORD *)v9;
        *(_DWORD *)v9 = *(_DWORD *)(*(_DWORD *)v9 + 8);
        v19 = *(_DWORD *)(v18 + 8);
        if ( !*(_BYTE *)(v19 + 13) )
          *(_DWORD *)(v19 + 4) = v8;
        *(_DWORD *)(v18 + 4) = *(_DWORD *)(v8 + 4);
        if ( v8 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v18;
        }
        else
        {
          v20 = *(_DWORD *)(v8 + 4);
          if ( v8 == *(_DWORD *)(v20 + 8) )
            *(_DWORD *)(v20 + 8) = v18;
          else
            *(_DWORD *)v20 = v18;
        }
        *(_DWORD *)(v18 + 8) = v8;
        *(_DWORD *)(v8 + 4) = v18;
      }
      *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
      v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
      v15 = *(_DWORD *)(v14 + 8);
      *(_DWORD *)(v14 + 8) = *(_DWORD *)v15;
      if ( !*(_BYTE *)(*(_DWORD *)v15 + 13) )
        *(_DWORD *)(*(_DWORD *)v15 + 4) = v14;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
      if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
      }
      else
      {
        v21 = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)v21 )
          *(_DWORD *)v21 = v15;
        else
          *(_DWORD *)(v21 + 8) = v15;
      }
      *(_DWORD *)v15 = v14;
      goto LABEL_48;
    }
    *(_BYTE *)(v9 + 12) = 1;
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
    v8 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *a2 = a6;
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (0040FA50) --------------------------------------------------------
int __thiscall sub_40FA50(int *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // edi@1
  char v9; // al@1
  bool v10; // zf@1
  int v11; // eax@2
  unsigned int v12; // ebx@4
  int v13; // ecx@4
  int v14; // esi@7
  unsigned int v15; // edx@9
  unsigned int v16; // edx@12
  bool v17; // cf@16
  unsigned __int8 v18; // al@18
  unsigned __int8 v19; // al@20
  unsigned __int8 v20; // al@22
  int v21; // eax@23
  bool v22; // sf@25
  signed int v23; // eax@27
  int v24; // edi@34
  int v25; // esi@36
  int *v26; // eax@38
  int v27; // ecx@39
  int result; // eax@39
  unsigned int v29; // ebx@41
  _DWORD *v30; // ecx@41
  unsigned int v31; // edi@43
  unsigned int v32; // eax@45
  int v33; // eax@47
  int v34; // ecx@47
  bool v35; // sf@47
  signed int v36; // eax@49
  int v37; // [sp+0h] [bp-38h]@1
  int v38; // [sp+10h] [bp-28h]@1
  int *v39; // [sp+14h] [bp-24h]@1
  int v40; // [sp+18h] [bp-20h]@1
  unsigned int v41; // [sp+1Ch] [bp-1Ch]@2
  int v42; // [sp+20h] [bp-18h]@1
  int v43; // [sp+24h] [bp-14h]@2
  int *v44; // [sp+28h] [bp-10h]@1
  int v45; // [sp+34h] [bp-4h]@1

  v44 = &v37;
  v5 = (int)this;
  v39 = this;
  v45 = 0;
  v6 = *this;
  v7 = v6;
  v8 = *(_DWORD *)(v6 + 4);
  v9 = 1;
  v10 = *(_BYTE *)(v8 + 13) == 0;
  v38 = v6;
  v42 = v6;
  LOBYTE(v40) = 1;
  if ( v10 )
  {
    v11 = a4;
    v43 = a4;
    v41 = *(_DWORD *)(a4 + 16);
    while ( 1 )
    {
      v17 = *(_DWORD *)(v8 + 36) < 0x10u;
      v12 = *(_DWORD *)(v8 + 32);
      v13 = v8 + 16;
      v42 = v8;
      if ( !v17 )
        v13 = *(_DWORD *)v13;
      if ( *(_DWORD *)(v11 + 20) < 0x10u )
        v14 = v11;
      else
        v14 = *(_DWORD *)v11;
      v15 = v12;
      if ( v41 < v12 )
        v15 = v41;
      if ( v15 )
        break;
LABEL_26:
      if ( v41 >= v12 )
        v23 = v41 != v12;
      else
        v23 = -1;
      v22 = v23 < 0;
LABEL_30:
      v9 = v22;
      LOBYTE(v40) = v22;
      if ( v22 )
        v8 = *(_DWORD *)v8;
      else
        v8 = *(_DWORD *)(v8 + 8);
      if ( *(_BYTE *)(v8 + 13) )
      {
        v24 = a4;
        v7 = v42;
        v6 = v38;
        v5 = (int)v39;
        goto LABEL_36;
      }
      v11 = a4;
    }
    v17 = v15 < 4;
    v16 = v15 - 4;
    if ( v17 )
    {
LABEL_15:
      if ( v16 == -4 )
        goto LABEL_24;
    }
    else
    {
      while ( *(_DWORD *)v14 == *(_DWORD *)v13 )
      {
        v14 += 4;
        v13 += 4;
        v17 = v16 < 4;
        v16 -= 4;
        if ( v17 )
          goto LABEL_15;
      }
    }
    v17 = *(_BYTE *)v14 < *(_BYTE *)v13;
    if ( *(_BYTE *)v14 != *(_BYTE *)v13
      || v16 != -3
      && ((v18 = *(_BYTE *)(v14 + 1), v17 = v18 < *(_BYTE *)(v13 + 1), v18 != *(_BYTE *)(v13 + 1))
       || v16 != -2
       && ((v19 = *(_BYTE *)(v14 + 2), v17 = v19 < *(_BYTE *)(v13 + 2), v19 != *(_BYTE *)(v13 + 2))
        || v16 != -1 && (v20 = *(_BYTE *)(v14 + 3), v17 = v20 < *(_BYTE *)(v13 + 3), v20 != *(_BYTE *)(v13 + 3)))) )
    {
      v21 = -v17 | 1;
      goto LABEL_25;
    }
LABEL_24:
    v21 = 0;
LABEL_25:
    v22 = v21 < 0;
    if ( v21 )
      goto LABEL_30;
    goto LABEL_26;
  }
  v24 = a4;
  v43 = a4;
LABEL_36:
  v25 = v7;
  a4 = v7;
  if ( v9 )
  {
    if ( v7 == *(_DWORD *)v6 )
    {
      v26 = sub_40F840(v5, &a4, 1, v7, v7, a5);
LABEL_39:
      v27 = *v26;
      result = a2;
      *(_DWORD *)a2 = v27;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_4046A0(&a4);
    v25 = a4;
  }
  v29 = *(_DWORD *)(v24 + 16);
  v30 = (_DWORD *)(v25 + 16);
  if ( *(_DWORD *)(v24 + 20) >= 0x10u )
    v43 = *(_DWORD *)v24;
  v31 = *(_DWORD *)(v25 + 32);
  if ( *(_DWORD *)(v25 + 36) >= 0x10u )
    v30 = (_DWORD *)*v30;
  v32 = v29;
  if ( v31 < v29 )
    v32 = *(_DWORD *)(v25 + 32);
  v33 = sub_4055E0(v43, (int)v30, v32);
  v35 = v33 < 0;
  if ( !v33 )
  {
    if ( v31 >= v29 )
      v36 = v31 != v29;
    else
      v36 = -1;
    v35 = v36 < 0;
  }
  if ( v35 )
  {
    v26 = sub_40F840((int)v39, &v38, v40, v42, v34, a5);
    goto LABEL_39;
  }
  sub_40F350(a5);
  result = a2;
  *(_DWORD *)a2 = v25;
  *(_BYTE *)(a2 + 4) = 0;
  return result;
}

//----- (0040FC60) --------------------------------------------------------
_DWORD *__thiscall sub_40FC60(int this, _DWORD *a2, char a3, int a4, int a5, int a6)
{
  void (__cdecl *v6)(void *); // edi@1
  unsigned int v7; // eax@1
  int v8; // eax@14
  int v9; // ecx@15
  int v10; // esi@15
  int v11; // edx@15
  int v12; // edx@18
  int v13; // ecx@22
  int v14; // edx@26
  int v15; // esi@26
  int v16; // ecx@26
  int v17; // ecx@30
  int v18; // edx@36
  int v19; // ecx@36
  int v20; // ecx@40
  int v21; // ecx@48
  _DWORD *result; // eax@54

  v6 = (void (__cdecl *)(void *))this;
  v7 = *(_DWORD *)(this + 4);
  if ( v7 >= 0x4EC4EC3 )
  {
    v6 = operator delete;
    if ( *(_DWORD *)(a6 + 40) )
    {
      operator delete(*(void **)(a6 + 40));
      *(_DWORD *)(a6 + 40) = 0;
      *(_DWORD *)(a6 + 44) = 0;
      *(_DWORD *)(a6 + 48) = 0;
    }
    if ( *(_DWORD *)(a6 + 36) >= 0x10u )
      operator delete(*(void **)(a6 + 16));
    *(_DWORD *)(a6 + 36) = 15;
    *(_DWORD *)(a6 + 32) = 0;
    *(_BYTE *)(a6 + 16) = 0;
    operator delete((void *)a6);
    std::_Xlength_error("map/set<T> too long");
  }
  *((_DWORD *)v6 + 1) = v7 + 1;
  *(_DWORD *)(a6 + 4) = a4;
  if ( a4 == *(_DWORD *)v6 )
  {
    *(_DWORD *)(*(_DWORD *)v6 + 4) = a6;
    **(_DWORD **)v6 = a6;
    *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  else if ( a3 )
  {
    *(_DWORD *)a4 = a6;
    if ( a4 == **(_DWORD **)v6 )
      **(_DWORD **)v6 = a6;
  }
  else
  {
    *(_DWORD *)(a4 + 8) = a6;
    if ( a4 == *(_DWORD *)(*(_DWORD *)v6 + 8) )
      *(_DWORD *)(*(_DWORD *)v6 + 8) = a6;
  }
  v8 = a6;
  while ( !*(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) )
  {
    v9 = *(_DWORD *)(v8 + 4);
    v10 = *(_DWORD *)(v9 + 4);
    v11 = *(_DWORD *)v10;
    if ( v9 == *(_DWORD *)v10 )
    {
      v11 = *(_DWORD *)(v10 + 8);
      if ( *(_BYTE *)(v11 + 12) )
      {
        if ( v8 == *(_DWORD *)(v9 + 8) )
        {
          v8 = *(_DWORD *)(v8 + 4);
          v12 = *(_DWORD *)(v9 + 8);
          *(_DWORD *)(v9 + 8) = *(_DWORD *)v12;
          if ( !*(_BYTE *)(*(_DWORD *)v12 + 13) )
            *(_DWORD *)(*(_DWORD *)v12 + 4) = v9;
          *(_DWORD *)(v12 + 4) = *(_DWORD *)(v9 + 4);
          if ( v9 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v12;
          }
          else
          {
            v13 = *(_DWORD *)(v9 + 4);
            if ( v8 == *(_DWORD *)v13 )
              *(_DWORD *)v13 = v12;
            else
              *(_DWORD *)(v13 + 8) = v12;
          }
          *(_DWORD *)v12 = v8;
          *(_DWORD *)(v8 + 4) = v12;
        }
        *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
        v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
        v15 = *(_DWORD *)v14;
        *(_DWORD *)v14 = *(_DWORD *)(*(_DWORD *)v14 + 8);
        v16 = *(_DWORD *)(v15 + 8);
        if ( !*(_BYTE *)(v16 + 13) )
          *(_DWORD *)(v16 + 4) = v14;
        *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
          *(_DWORD *)(v15 + 8) = v14;
        }
        else
        {
          v17 = *(_DWORD *)(v14 + 4);
          if ( v14 == *(_DWORD *)(v17 + 8) )
          {
            *(_DWORD *)(v17 + 8) = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
          else
          {
            *(_DWORD *)v17 = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
        }
LABEL_52:
        *(_DWORD *)(v14 + 4) = v15;
        continue;
      }
    }
    else if ( *(_BYTE *)(v11 + 12) )
    {
      if ( v8 == *(_DWORD *)v9 )
      {
        v8 = *(_DWORD *)(v8 + 4);
        v18 = *(_DWORD *)v9;
        *(_DWORD *)v9 = *(_DWORD *)(*(_DWORD *)v9 + 8);
        v19 = *(_DWORD *)(v18 + 8);
        if ( !*(_BYTE *)(v19 + 13) )
          *(_DWORD *)(v19 + 4) = v8;
        *(_DWORD *)(v18 + 4) = *(_DWORD *)(v8 + 4);
        if ( v8 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v18;
        }
        else
        {
          v20 = *(_DWORD *)(v8 + 4);
          if ( v8 == *(_DWORD *)(v20 + 8) )
            *(_DWORD *)(v20 + 8) = v18;
          else
            *(_DWORD *)v20 = v18;
        }
        *(_DWORD *)(v18 + 8) = v8;
        *(_DWORD *)(v8 + 4) = v18;
      }
      *(_BYTE *)(*(_DWORD *)(v8 + 4) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
      v14 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
      v15 = *(_DWORD *)(v14 + 8);
      *(_DWORD *)(v14 + 8) = *(_DWORD *)v15;
      if ( !*(_BYTE *)(*(_DWORD *)v15 + 13) )
        *(_DWORD *)(*(_DWORD *)v15 + 4) = v14;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
      if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
      }
      else
      {
        v21 = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)v21 )
          *(_DWORD *)v21 = v15;
        else
          *(_DWORD *)(v21 + 8) = v15;
      }
      *(_DWORD *)v15 = v14;
      goto LABEL_52;
    }
    *(_BYTE *)(v9 + 12) = 1;
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + 12) = 0;
    v8 = *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *a2 = a6;
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (0040FEB0) --------------------------------------------------------
int __thiscall sub_40FEB0(int *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // edi@1
  char v9; // al@1
  bool v10; // zf@1
  int v11; // eax@2
  unsigned int v12; // ebx@4
  int v13; // ecx@4
  int v14; // esi@7
  unsigned int v15; // edx@9
  unsigned int v16; // edx@12
  bool v17; // cf@16
  unsigned __int8 v18; // al@18
  unsigned __int8 v19; // al@20
  unsigned __int8 v20; // al@22
  int v21; // eax@23
  bool v22; // sf@25
  signed int v23; // eax@27
  int v24; // edi@34
  int v25; // esi@36
  int *v26; // eax@38
  int v27; // ecx@39
  int result; // eax@39
  unsigned int v29; // ebx@41
  _DWORD *v30; // ecx@41
  unsigned int v31; // edi@43
  unsigned int v32; // eax@45
  int v33; // eax@47
  int v34; // ecx@47
  bool v35; // sf@47
  signed int v36; // eax@49
  int v37; // [sp+0h] [bp-38h]@1
  int v38; // [sp+10h] [bp-28h]@1
  int *v39; // [sp+14h] [bp-24h]@1
  int v40; // [sp+18h] [bp-20h]@1
  unsigned int v41; // [sp+1Ch] [bp-1Ch]@2
  int v42; // [sp+20h] [bp-18h]@1
  int v43; // [sp+24h] [bp-14h]@2
  int *v44; // [sp+28h] [bp-10h]@1
  int v45; // [sp+34h] [bp-4h]@1

  v44 = &v37;
  v5 = (int)this;
  v39 = this;
  v45 = 0;
  v6 = *this;
  v7 = v6;
  v8 = *(_DWORD *)(v6 + 4);
  v9 = 1;
  v10 = *(_BYTE *)(v8 + 13) == 0;
  v38 = v6;
  v42 = v6;
  LOBYTE(v40) = 1;
  if ( v10 )
  {
    v11 = a4;
    v43 = a4;
    v41 = *(_DWORD *)(a4 + 16);
    while ( 1 )
    {
      v17 = *(_DWORD *)(v8 + 36) < 0x10u;
      v12 = *(_DWORD *)(v8 + 32);
      v13 = v8 + 16;
      v42 = v8;
      if ( !v17 )
        v13 = *(_DWORD *)v13;
      if ( *(_DWORD *)(v11 + 20) < 0x10u )
        v14 = v11;
      else
        v14 = *(_DWORD *)v11;
      v15 = v12;
      if ( v41 < v12 )
        v15 = v41;
      if ( v15 )
        break;
LABEL_26:
      if ( v41 >= v12 )
        v23 = v41 != v12;
      else
        v23 = -1;
      v22 = v23 < 0;
LABEL_30:
      v9 = v22;
      LOBYTE(v40) = v22;
      if ( v22 )
        v8 = *(_DWORD *)v8;
      else
        v8 = *(_DWORD *)(v8 + 8);
      if ( *(_BYTE *)(v8 + 13) )
      {
        v24 = a4;
        v7 = v42;
        v6 = v38;
        v5 = (int)v39;
        goto LABEL_36;
      }
      v11 = a4;
    }
    v17 = v15 < 4;
    v16 = v15 - 4;
    if ( v17 )
    {
LABEL_15:
      if ( v16 == -4 )
        goto LABEL_24;
    }
    else
    {
      while ( *(_DWORD *)v14 == *(_DWORD *)v13 )
      {
        v14 += 4;
        v13 += 4;
        v17 = v16 < 4;
        v16 -= 4;
        if ( v17 )
          goto LABEL_15;
      }
    }
    v17 = *(_BYTE *)v14 < *(_BYTE *)v13;
    if ( *(_BYTE *)v14 != *(_BYTE *)v13
      || v16 != -3
      && ((v18 = *(_BYTE *)(v14 + 1), v17 = v18 < *(_BYTE *)(v13 + 1), v18 != *(_BYTE *)(v13 + 1))
       || v16 != -2
       && ((v19 = *(_BYTE *)(v14 + 2), v17 = v19 < *(_BYTE *)(v13 + 2), v19 != *(_BYTE *)(v13 + 2))
        || v16 != -1 && (v20 = *(_BYTE *)(v14 + 3), v17 = v20 < *(_BYTE *)(v13 + 3), v20 != *(_BYTE *)(v13 + 3)))) )
    {
      v21 = -v17 | 1;
      goto LABEL_25;
    }
LABEL_24:
    v21 = 0;
LABEL_25:
    v22 = v21 < 0;
    if ( v21 )
      goto LABEL_30;
    goto LABEL_26;
  }
  v24 = a4;
  v43 = a4;
LABEL_36:
  v25 = v7;
  a4 = v7;
  if ( v9 )
  {
    if ( v7 == *(_DWORD *)v6 )
    {
      v26 = sub_40FC60(v5, &a4, 1, v7, v7, a5);
LABEL_39:
      v27 = *v26;
      result = a2;
      *(_DWORD *)a2 = v27;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_4046A0(&a4);
    v25 = a4;
  }
  v29 = *(_DWORD *)(v24 + 16);
  v30 = (_DWORD *)(v25 + 16);
  if ( *(_DWORD *)(v24 + 20) >= 0x10u )
    v43 = *(_DWORD *)v24;
  v31 = *(_DWORD *)(v25 + 32);
  if ( *(_DWORD *)(v25 + 36) >= 0x10u )
    v30 = (_DWORD *)*v30;
  v32 = v29;
  if ( v31 < v29 )
    v32 = *(_DWORD *)(v25 + 32);
  v33 = sub_4055E0(v43, (int)v30, v32);
  v35 = v33 < 0;
  if ( !v33 )
  {
    if ( v31 >= v29 )
      v36 = v31 != v29;
    else
      v36 = -1;
    v35 = v36 < 0;
  }
  if ( v35 )
  {
    v26 = sub_40FC60((int)v39, &v38, v40, v42, v34, a5);
    goto LABEL_39;
  }
  sub_40F3C0(a5);
  result = a2;
  *(_DWORD *)a2 = v25;
  *(_BYTE *)(a2 + 4) = 0;
  return result;
}

//----- (004100C0) --------------------------------------------------------
void *__usercall sub_4100C0@<eax>(int a1@<ecx>, void *a2@<edx>, void *Dst)
{
  void *v3; // ebx@1
  void *v4; // edi@1
  void *v5; // esi@2
  void *result; // eax@6

  v3 = a2;
  v4 = (void *)a1;
  if ( (void *)a1 == a2 )
  {
    result = Dst;
  }
  else
  {
    v5 = Dst;
    do
    {
      if ( v5 )
        sub_405420(v5, v4, a1);
      v4 = (char *)v4 + 48;
      v5 = (char *)v5 + 48;
    }
    while ( v4 != v3 );
    result = v5;
  }
  return result;
}

//----- (00410100) --------------------------------------------------------
void *__usercall sub_410100@<eax>(int a1@<edx>, int a2@<ecx>, void *Dst)
{
  int v3; // ebx@1
  void *v4; // edi@2
  int v5; // esi@2
  void *result; // eax@10

  v3 = a1;
  if ( a2 == a1 )
  {
    result = Dst;
  }
  else
  {
    v4 = Dst;
    v5 = a2 + 16;
    do
    {
      if ( v4 )
      {
        *((_DWORD *)v4 + 5) = 15;
        *((_DWORD *)v4 + 4) = 0;
        *(_BYTE *)v4 = 0;
        if ( *(_DWORD *)(v5 + 4) >= 0x10u )
        {
          *(_DWORD *)v4 = *(_DWORD *)(v5 - 16);
          *(_DWORD *)(v5 - 16) = 0;
        }
        else if ( *(_DWORD *)v5 != -1 )
        {
          memmove(v4, (const void *)(v5 - 16), *(_DWORD *)v5 + 1);
        }
        *((_DWORD *)v4 + 4) = *(_DWORD *)v5;
        *((_DWORD *)v4 + 5) = *(_DWORD *)(v5 + 4);
        *(_DWORD *)(v5 + 4) = 15;
        *(_DWORD *)v5 = 0;
        *(_BYTE *)(v5 - 16) = 0;
      }
      v5 += 24;
      v4 = (char *)v4 + 24;
    }
    while ( v5 - 16 != v3 );
    result = v4;
  }
  return result;
}

//----- (00410190) --------------------------------------------------------
void __stdcall sub_410190(int a1)
{
  if ( *(_DWORD *)(a1 + 20) >= 0x10u )
    operator delete(*(void **)a1);
  *(_DWORD *)(a1 + 20) = 15;
  *(_DWORD *)(a1 + 16) = 0;
  *(_BYTE *)a1 = 0;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004101C0) --------------------------------------------------------
_DWORD *__thiscall sub_4101C0(_DWORD *this, int a2)
{
  _DWORD *v2; // eax@1
  _DWORD *v3; // edi@1
  _BYTE *v4; // esi@1
  int v6; // [sp+0h] [bp-28h]@1
  _DWORD *v7; // [sp+10h] [bp-18h]@1
  _DWORD *v8; // [sp+14h] [bp-14h]@1
  int *v9; // [sp+18h] [bp-10h]@1
  int v10; // [sp+24h] [bp-4h]@1

  v9 = &v6;
  v2 = sub_40F310(this);
  v3 = v2;
  v10 = 0;
  v4 = v2 + 4;
  v8 = v2;
  *((_WORD *)v2 + 6) = 0;
  v7 = v2 + 4;
  LOBYTE(v10) = 1;
  if ( v2 != (_DWORD *)-16 )
  {
    v2[9] = 15;
    v2[8] = 0;
    *v4 = 0;
    sub_405900(v2 + 4, a2, 0, 0xFFFFFFFF);
    LOBYTE(v10) = 2;
    sub_410270((int)(v4 + 24), a2 + 24);
  }
  return v3;
}

//----- (00410256) --------------------------------------------------------
void __usercall __noreturn sub_410256(int a1@<ebp>)
{
  operator delete(*(void **)(a1 - 20));
  CxxThrowException(0, 0);
}
// 411424: using guessed type int __cdecl CxxThrowException(_DWORD, _DWORD);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00410270) --------------------------------------------------------
int __thiscall sub_410270(int this, int a2)
{
  int v2; // esi@1
  int v3; // ecx@2
  int v5; // [sp+0h] [bp-24h]@1
  int v6; // [sp+10h] [bp-14h]@1
  int *v7; // [sp+14h] [bp-10h]@1
  int v8; // [sp+20h] [bp-4h]@2

  v7 = &v5;
  v2 = this;
  v6 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  if ( (unsigned __int8)((int (__stdcall *)(int))loc_410320)((*(_DWORD *)(a2 + 4) - *(_DWORD *)a2) / 24) )
  {
    v8 = 0;
    v3 = *(_DWORD *)v2;
    *(_DWORD *)(v2 + 4) = sub_410390(*(_DWORD *)a2, *(_DWORD *)(a2 + 4));
  }
  return v2;
}

//----- (00410309) --------------------------------------------------------
void __usercall __noreturn sub_410309(int a1@<ebp>)
{
  sub_40C9C0(*(_DWORD *)(a1 - 20));
  CxxThrowException(0, 0);
}
// 411424: using guessed type int __cdecl CxxThrowException(_DWORD, _DWORD);

//----- (00410390) --------------------------------------------------------
int __cdecl sub_410390(int a1, int a2)
{
  int v2; // ecx@0
  int v3; // esi@1
  int v4; // eax@1
  int v6; // [sp+0h] [bp-28h]@1
  int v7; // [sp+10h] [bp-18h]@1
  int v8; // [sp+14h] [bp-14h]@1
  int *v9; // [sp+18h] [bp-10h]@1
  int v10; // [sp+24h] [bp-4h]@1

  v9 = &v6;
  v3 = v2;
  v8 = v2;
  v10 = 0;
  v4 = a1;
  v7 = v2;
  while ( v4 != a2 )
  {
    LOBYTE(v10) = 1;
    if ( v3 )
    {
      *(_DWORD *)(v3 + 20) = 15;
      *(_DWORD *)(v3 + 16) = 0;
      *(_BYTE *)v3 = 0;
      sub_405900((void *)v3, v4, 0, 0xFFFFFFFF);
      v4 = a1;
    }
    v3 += 24;
    v4 += 24;
    LOBYTE(v10) = 0;
    v8 = v3;
    a1 = v4;
  }
  return v3;
}

//----- (0041044A) --------------------------------------------------------
int __thiscall sub_41044A(char *this)
{
  return std::basic_ostream<char,std::char_traits<char>>::_Add_vtordisp2(&this[-*((_DWORD *)this - 1) - 88]);
}
// 413158: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::_Add_vtordisp2(_DWORD);

//----- (00410456) --------------------------------------------------------
int __thiscall sub_410456(char *this)
{
  return std::basic_istream<char,std::char_traits<char>>::_Add_vtordisp1(&this[-*((_DWORD *)this - 1) - 88]);
}
// 41315C: using guessed type int __thiscall std::basic_istream<char,std::char_traits<char>>::_Add_vtordisp1(_DWORD);

//----- (00410462) --------------------------------------------------------
int __thiscall sub_410462(char *this)
{
  return std::basic_ostream<char,std::char_traits<char>>::_Add_vtordisp2(&this[-*((_DWORD *)this - 1) - 72]);
}
// 413158: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::_Add_vtordisp2(_DWORD);

//----- (0041046E) --------------------------------------------------------
char *__thiscall sub_41046E(char *this, char a2)
{
  return sub_40C190(&this[-*((_DWORD *)this - 1)], a2);
}

//----- (00410476) --------------------------------------------------------
char *__thiscall sub_410476(char *this, char a2)
{
  return sub_40C2B0(&this[-*((_DWORD *)this - 1)], a2);
}

//----- (0041047E) --------------------------------------------------------
char *__thiscall sub_41047E(char *this, char a2)
{
  return sub_40C220(&this[-*((_DWORD *)this - 1)], a2);
}

//----- (00410490) --------------------------------------------------------
void *__stdcall sub_410490(unsigned int a1)
{
  void *v1; // ecx@1

  v1 = 0;
  if ( a1 )
  {
    if ( a1 > 0x7FFFFFFF || (v1 = operator new(2 * a1)) == 0 )
      std::_Xbad_alloc();
  }
  return v1;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (004104D0) --------------------------------------------------------
int __thiscall sub_4104D0(int this, unsigned int a2, int a3)
{
  int v3; // esi@1
  unsigned int v4; // edi@1
  unsigned int v5; // ebx@3
  unsigned int v6; // ecx@3
  unsigned int v7; // eax@6
  void *v8; // ecx@6
  const void *v9; // edx@12
  int v10; // eax@18
  int result; // eax@20
  int v12; // [sp+0h] [bp-28h]@1
  int v13; // [sp+10h] [bp-18h]@1
  void *v14; // [sp+14h] [bp-14h]@6
  int *v15; // [sp+18h] [bp-10h]@1
  unsigned int v16; // [sp+24h] [bp-4h]@6
  int savedregs; // [sp+28h] [bp+0h]@9

  v15 = &v12;
  v3 = this;
  v13 = this;
  v4 = a2 | 7;
  if ( (a2 | 7) <= 0x7FFFFFFE )
  {
    v5 = *(_DWORD *)(this + 20);
    v6 = *(_DWORD *)(this + 20) >> 1;
    if ( v6 > v4 / 3 )
    {
      v4 = v6 + v5;
      if ( v5 > 2147483646 - v6 )
        v4 = 2147483646;
    }
  }
  else
  {
    v4 = a2;
  }
  v7 = v4 + 1;
  v8 = 0;
  v16 = 0;
  v14 = 0;
  if ( v4 != -1 )
  {
    if ( v7 > 0x7FFFFFFF || (v8 = operator new(2 * v7), (v14 = v8) == 0) )
    {
      std::_Xbad_alloc();
      v15 = &savedregs;
      v16 = a2 + 1;
      LOBYTE(v16) = 2;
      v14 = sub_410490(v16);
      v8 = v14;
      v3 = v13;
      v4 = a2;
    }
  }
  if ( a3 )
  {
    v9 = (const void *)(*(_DWORD *)(v3 + 20) < 8u ? v3 : *(_DWORD *)v3);
    if ( a3 )
      memcpy(v8, v9, 2 * a3);
  }
  if ( *(_DWORD *)(v3 + 20) >= 8u )
    operator delete(*(void **)v3);
  v10 = (int)v14;
  *(_DWORD *)v3 = v14;
  *(_DWORD *)(v3 + 20) = v4;
  *(_DWORD *)(v3 + 16) = a3;
  if ( v4 >= 8 )
    v3 = v10;
  result = 0;
  *(_WORD *)(v3 + 2 * a3) = 0;
  return result;
}
// 4130B8: using guessed type void __cdecl std::_Xbad_alloc();
// 4131F0: using guessed type void __cdecl operator delete(void *);
// 4131F4: using guessed type void *__cdecl operator new(unsigned int);

//----- (00410630) --------------------------------------------------------
int __thiscall sub_410630(void *Dst, int a2, int a3)
{
  void *v3; // esi@1
  unsigned int v4; // eax@3
  int result; // eax@4
  unsigned int v6; // ebx@7
  const void *v7; // ecx@10
  int v8; // [sp+14h] [bp+Ch]@10

  v3 = Dst;
  if ( (unsigned int)a2 > 0x7FFFFFFE )
    std::_Xlength_error("string too long");
  v4 = *((_DWORD *)v3 + 5);
  if ( v4 >= a2 )
  {
    if ( (_BYTE)a3 && (unsigned int)a2 < 8 )
    {
      v6 = *((_DWORD *)v3 + 4);
      if ( a2 < v6 )
        v6 = a2;
      if ( v4 >= 8 )
      {
        v7 = *(const void **)v3;
        v8 = *(_DWORD *)v3;
        if ( v6 )
        {
          memcpy(v3, v7, 2 * v6);
          v7 = (const void *)v8;
        }
        operator delete((void *)v7);
      }
      *((_DWORD *)v3 + 4) = v6;
      *((_DWORD *)v3 + 5) = 7;
      *((_WORD *)v3 + v6) = 0;
      result = (unsigned int)a2 > 0;
    }
    else
    {
      if ( !a2 )
      {
        *((_DWORD *)v3 + 4) = 0;
        if ( v4 >= 8 )
          v3 = *(void **)v3;
        *(_WORD *)v3 = 0;
      }
      result = (unsigned int)a2 > 0;
    }
  }
  else
  {
    sub_4104D0((int)Dst, a2, *((_DWORD *)v3 + 4));
    result = (unsigned int)a2 > 0;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004106F0) --------------------------------------------------------
int __thiscall sub_4106F0(int this, int a2, __int16 a3)
{
  int v3; // esi@1
  int v4; // ecx@1
  unsigned int v5; // edi@3
  unsigned int v6; // eax@5
  _WORD *v7; // ecx@8
  int result; // eax@11
  bool v9; // cf@14

  v3 = this;
  v4 = *(_DWORD *)(this + 16);
  if ( (unsigned int)(-1 - v4) <= 1 )
    std::_Xlength_error("string too long");
  v5 = v4 + 1;
  if ( (unsigned int)(v4 + 1) > 0x7FFFFFFE )
    std::_Xlength_error("string too long");
  v6 = *(_DWORD *)(v3 + 20);
  if ( v6 < v5 )
  {
    sub_4104D0(v3, v5, v4);
    if ( !v5 )
      return v3;
LABEL_7:
    if ( *(_DWORD *)(v3 + 20) < 8u )
      v7 = (_WORD *)v3;
    else
      v7 = *(_WORD **)v3;
    v7[*(_DWORD *)(v3 + 16)] = a3;
    v9 = *(_DWORD *)(v3 + 20) < 8u;
    *(_DWORD *)(v3 + 16) = v5;
    if ( !v9 )
    {
      *(_WORD *)(*(_DWORD *)v3 + 2 * v5) = 0;
      return v3;
    }
    *(_WORD *)(v3 + 2 * v5) = 0;
    return v3;
  }
  if ( v5 )
    goto LABEL_7;
  *(_DWORD *)(v3 + 16) = 0;
  if ( v6 < 8 )
  {
    result = v3;
    *(_WORD *)v3 = 0;
  }
  else
  {
    **(_WORD **)v3 = 0;
    result = v3;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (004107B0) --------------------------------------------------------
__m128i *__thiscall sub_4107B0(int this, int a2, int a3)
{
  __m128i *v3; // esi@1
  __m128i *v4; // eax@4
  bool v5; // cf@6
  __m128i *result; // eax@7

  v3 = (__m128i *)this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  if ( *(_DWORD *)(this + 20) < 8u )
    sub_405A60(this, 8, *(_DWORD *)(this + 16));
  if ( v3[1].m128i_i32[1] < 0x10u )
    v4 = v3;
  else
    v4 = (__m128i *)v3->m128i_i32[0];
  _mm_storel_epi64(v4, 0i64);
  v5 = v3[1].m128i_i32[1] < 0x10u;
  v3[1].m128i_i32[0] = 8;
  if ( v5 )
  {
    LOBYTE(v3->m128i_i32[2]) = 0;
    result = v3;
  }
  else
  {
    *(_BYTE *)(v3->m128i_i32[0] + 8) = 0;
    result = v3;
  }
  return result;
}

//----- (00410880) --------------------------------------------------------
void *__thiscall sub_410880(int this, int a2, size_t Size, char a4)
{
  int v4; // edx@1
  void *result; // eax@4

  v4 = this;
  if ( Size == 1 )
  {
    if ( *(_DWORD *)(this + 20) >= 0x10u )
      v4 = *(_DWORD *)this;
    result = (void *)a2;
    *(_BYTE *)(v4 + a2) = a4;
  }
  else
  {
    if ( *(_DWORD *)(this + 20) >= 0x10u )
      v4 = *(_DWORD *)this;
    result = memset((void *)(v4 + a2), a4, Size);
  }
  return result;
}

//----- (004108D0) --------------------------------------------------------
int __thiscall sub_4108D0(int this, size_t Size, char a3)
{
  int v3; // esi@1
  size_t v4; // ecx@1
  unsigned int v5; // edi@4
  unsigned int v6; // eax@6
  bool v7; // cf@8
  int result; // eax@9

  v3 = this;
  v4 = *(_DWORD *)(this + 16);
  if ( -1 - v4 <= Size )
    std::_Xlength_error("string too long");
  if ( !Size )
    return v3;
  v5 = v4 + Size;
  if ( v4 + Size > 0xFFFFFFFE )
    std::_Xlength_error("string too long");
  v6 = *(_DWORD *)(v3 + 20);
  if ( v6 < v5 )
  {
    sub_405A60(v3, v5, v4);
    if ( v5 )
    {
LABEL_8:
      sub_410880(v3, *(_DWORD *)(v3 + 16), Size, a3);
      v7 = *(_DWORD *)(v3 + 20) < 0x10u;
      *(_DWORD *)(v3 + 16) = v5;
      if ( !v7 )
      {
        *(_BYTE *)(*(_DWORD *)v3 + v5) = 0;
        return v3;
      }
      *(_BYTE *)(v3 + v5) = 0;
    }
    return v3;
  }
  if ( v5 )
    goto LABEL_8;
  *(_DWORD *)(v3 + 16) = 0;
  if ( v6 < 0x10 )
  {
    result = v3;
    *(_BYTE *)v3 = 0;
  }
  else
  {
    **(_BYTE **)v3 = 0;
    result = v3;
  }
  return result;
}
// 4130BC: using guessed type void __cdecl std::_Xlength_error(const char *);

//----- (004109BE) --------------------------------------------------------
void *__cdecl sub_4109BE(unsigned int a1)
{
  return operator new(a1);
}

//----- (004109DA) --------------------------------------------------------
int (__thiscall ***__thiscall sub_4109DA(int this))(_DWORD, _DWORD)
{
  int (__thiscall ***result)(_DWORD, _DWORD); // eax@1

  result = (int (__thiscall ***)(_DWORD, _DWORD))(*(int (**)(void))(**(_DWORD **)(this + 4) + 8))();
  if ( result )
    result = (int (__thiscall ***)(_DWORD, _DWORD))(**result)(result, 1);
  return result;
}

//----- (00410A13) --------------------------------------------------------
_DWORD *__cdecl sub_410A13(int a1)
{
  _DWORD *result; // eax@1

  result = operator new(8u);
  if ( result )
  {
    *result = dword_418498;
    result[1] = a1;
  }
  else
  {
    result = 0;
  }
  dword_418498 = result;
  return result;
}

//----- (00410A88) --------------------------------------------------------
signed int sub_410A88()
{
  signed int result; // eax@2
  void *v1; // esi@3

  if ( Ptr )
  {
    result = 0;
  }
  else
  {
    v1 = (void *)calloc_crt(32, 4);
    Ptr = EncodePointer(v1);
    dword_4188E0 = Ptr;
    if ( v1 )
    {
      *(_DWORD *)v1 = 0;
      result = 0;
    }
    else
    {
      result = 24;
    }
  }
  return result;
}
// 41325C: using guessed type int __cdecl calloc_crt(_DWORD, _DWORD);

//----- (00410AC4) --------------------------------------------------------
_onexit_t __cdecl sub_410AC4(_onexit_t Func)
{
  _onexit_t result; // eax@2
  PVOID v2; // eax@3
  int v3; // eax@3
  _onexit_t v4; // edi@3
  int v5; // ST1C_4@3
  int v6; // [sp+4h] [bp-30h]@0
  int v7; // [sp+8h] [bp-2Ch]@0
  int v8; // [sp+Ch] [bp-28h]@0
  PVOID v9; // [sp+14h] [bp-20h]@3
  PVOID Ptr; // [sp+18h] [bp-1Ch]@3
  CPPEH_RECORD ms_exc; // [sp+1Ch] [bp-18h]@3

  if ( DecodePointer(::Ptr) == (PVOID)-1 )
  {
    result = onexit(Func);
  }
  else
  {
    lock(8);
    ms_exc.registration.TryLevel = 0;
    Ptr = DecodePointer(::Ptr);
    v9 = DecodePointer(dword_4188E0);
    v2 = EncodePointer(Func);
    v3 = _dllonexit(v2);
    v4 = (_onexit_t)v3;
    v5 = v3;
    ::Ptr = EncodePointer(Ptr);
    dword_4188E0 = EncodePointer(v9);
    ms_exc.registration.TryLevel = -2;
    unlock(
      8,
      4262741,
      v6,
      v7,
      v8,
      v5,
      v9,
      Ptr,
      ms_exc.old_esp,
      ms_exc.exc_ptr,
      ms_exc.registration.Next,
      ms_exc.registration.ExceptionHandler,
      ms_exc.registration.ScopeTable);
    result = v4;
  }
  return result;
}
// 410FD6: using guessed type int __cdecl lock(_DWORD);
// 410FDC: using guessed type int __stdcall unlock(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 410FE2: using guessed type int __stdcall _dllonexit(_DWORD);

//----- (00410B69) --------------------------------------------------------
int __cdecl sub_410B69(_onexit_t Func)
{
  return (sub_410AC4(Func) != 0) - 1;
}

//----- (00410B84) --------------------------------------------------------
char *__thiscall sub_410B84(void *this, char a2)
{
  char *v2; // esi@1
  char *result; // eax@4

  v2 = (char *)this;
  if ( a2 & 2 )
  {
    sub_41106C((int)this, 12, *((_DWORD *)this - 1), (void (__thiscall *)(int))type_info::~type_info);
    if ( a2 & 1 )
      operator delete(v2 - 4);
    result = v2 - 4;
  }
  else
  {
    type_info::~type_info((type_info *)this);
    if ( a2 & 1 )
      operator delete(v2);
    result = v2;
  }
  return result;
}

//----- (00410BE0) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_410BE0()
{
  int v0; // eax@2

  if ( LOWORD(v400000.unused) != 23117
    || *(_DWORD *)(v40003C + 0x400000) != 17744
    || *(_WORD *)(v40003C + 4194328) != 267 )
  {
    v0 = 0;
  }
  else
  {
    v0 = 0;
    if ( *(_DWORD *)(v40003C + 4194420) > 0xEu )
      LOBYTE(v0) = *(_DWORD *)(v40003C + 4194536) != 0;
  }
  dword_4184B8 = v0;
  _set_app_type(2);
  dword_4188E0 = EncodePointer((PVOID)0xFFFFFFFF);
  Ptr = dword_4188E0;
  fmode = dword_4187EC;
  commode = dword_4187E0;
  sub_41137B();
  sub_41119C();
  if ( !dword_418020 )
    _setusermatherr(sub_41119C);
  sub_4113BB();
  if ( dword_418024 == -1 )
    configthreadlocale(-1);
  return 0;
}
// 410C51: write access to const memory at 4131A8 has been detected
// 410C5E: write access to const memory at 4131A4 has been detected
// 4131B8: using guessed type int __cdecl _setusermatherr(_DWORD);
// 4131BC: using guessed type int __cdecl configthreadlocale(_DWORD);
// 4131D0: using guessed type int __cdecl _set_app_type(_DWORD);
// 418020: using guessed type int dword_418020;
// 418024: using guessed type int dword_418024;
// 4184B8: using guessed type int dword_4184B8;
// 4187E0: using guessed type int dword_4187E0;
// 4187EC: using guessed type int dword_4187EC;

//----- (00410C99) --------------------------------------------------------
int sub_410C99()
{
  int result; // eax@1

  sub_410B69((_onexit_t)Func);
  dword_4184BC = dword_4187E8;
  result = _getmainargs(&unk_4184A8, &unk_4184AC, &unk_4184B0, dword_4187E4, &dword_4184BC);
  dword_4184B4 = result;
  if ( result < 0 )
    result = amsg_exit(8);
  return result;
}
// 411196: using guessed type int __cdecl amsg_exit(_DWORD);
// 4131D4: using guessed type int __cdecl _getmainargs(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4184B4: using guessed type int dword_4184B4;
// 4184BC: using guessed type int dword_4184BC;
// 4187E4: using guessed type int dword_4187E4;
// 4187E8: using guessed type int dword_4187E8;

//----- (00410E9F) --------------------------------------------------------
int __cdecl sub_410E9F(int a1)
{
  dword_4187DC = IsDebuggerPresent();
  crt_debugger_hook(1);
  _crtUnhandledException(a1);
  if ( !dword_4187DC )
    crt_debugger_hook(1);
  return _crtTerminateProcess(-1073740791);
}
// 4113EE: using guessed type int __cdecl crt_debugger_hook(_DWORD);
// 4113F4: using guessed type int __cdecl _crtUnhandledException(_DWORD);
// 4113FA: using guessed type int __cdecl _crtTerminateProcess(_DWORD);
// 4187DC: using guessed type int dword_4187DC;

//----- (00410EDC) --------------------------------------------------------
int __usercall sub_410EDC@<eax>(int a1@<ebx>, int a2@<edi>, int a3@<esi>, char a4)
{
  int v4; // edx@1
  int v5; // ecx@1
  unsigned int v6; // et0@3
  int vars0; // [sp+324h] [bp+0h]@0
  int retaddr; // [sp+328h] [bp+4h]@3

  if ( IsProcessorFeaturePresent(0x17u) )
    __fastfail(2u);
  dword_4185C0 = 0;
  dword_4185BC = v5;
  dword_4185B8 = v4;
  dword_4185B4 = a1;
  dword_4185B0 = a3;
  dword_4185AC = a2;
  word_4185D8 = __SS__;
  word_4185CC = __CS__;
  word_4185A8 = __DS__;
  word_4185A4 = __ES__;
  word_4185A0 = __FS__;
  word_41859C = __GS__;
  v6 = __readeflags();
  dword_4185D0 = v6;
  dword_4185C4 = vars0;
  dword_4185C8 = retaddr;
  dword_4185D4 = (int)&a4;
  dword_418510 = 65537;
  dword_4184CC = retaddr;
  dword_4184C0 = -1073740791;
  dword_4184C4 = 1;
  dword_4184D0 = 1;
  dword_4184D4 = 2;
  return sub_410E9F((int)off_413348);
}
// 413348: using guessed type int *off_413348[2];
// 41801C: using guessed type int dword_41801C;
// 4184C0: using guessed type int dword_4184C0;
// 4184C4: using guessed type int dword_4184C4;
// 4184CC: using guessed type int dword_4184CC;
// 4184D0: using guessed type int dword_4184D0;
// 4184D4: using guessed type int dword_4184D4;
// 418510: using guessed type int dword_418510;
// 41859C: using guessed type __int16 word_41859C;
// 4185A0: using guessed type __int16 word_4185A0;
// 4185A4: using guessed type __int16 word_4185A4;
// 4185A8: using guessed type __int16 word_4185A8;
// 4185AC: using guessed type int dword_4185AC;
// 4185B0: using guessed type int dword_4185B0;
// 4185B4: using guessed type int dword_4185B4;
// 4185B8: using guessed type int dword_4185B8;
// 4185BC: using guessed type int dword_4185BC;
// 4185C0: using guessed type int dword_4185C0;
// 4185C4: using guessed type int dword_4185C4;
// 4185C8: using guessed type int dword_4185C8;
// 4185CC: using guessed type __int16 word_4185CC;
// 4185D0: using guessed type int dword_4185D0;
// 4185D4: using guessed type int dword_4185D4;
// 4185D8: using guessed type __int16 word_4185D8;

//----- (00411049) --------------------------------------------------------
int __cdecl sub_411049(int a1, int a2, int a3, int a4)
{
  return except_handler4_common(&__security_cookie, __security_check_cookie, a1, a2, a3, a4);
}
// 410A6C: using guessed type int __security_check_cookie();
// 411400: using guessed type int __cdecl except_handler4_common(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0041106C) --------------------------------------------------------
signed int __stdcall sub_41106C(int a1, int a2, int a3, void (__thiscall *a4)(int))
{
  int v4; // edi@1
  int i; // esi@1

  v4 = a3;
  for ( i = a3 * a2 + a1; --v4 >= 0; a4(i) )
    i -= a2;
  return 1;
}

//----- (004110DB) --------------------------------------------------------
int __stdcall sub_4110DB(int a1, int a2, int a3, int (*a4)(void))
{
  int result; // eax@2

  while ( --a3 >= 0 )
  {
    a1 -= a2;
    result = a4();
  }
  return result;
}

//----- (00411140) --------------------------------------------------------
int __stdcall sub_411140(_DWORD *a1)
{
  _DWORD *v1; // eax@1
  int v2; // eax@3

  v1 = (_DWORD *)*a1;
  if ( *(_DWORD *)*a1 == -529697949 && v1[4] == 3 )
  {
    v2 = v1[5];
    if ( v2 == 429065504 || v2 == 429065505 || v2 == 429065506 || v2 == 26820608 )
      terminate();
  }
  return 0;
}

//----- (00411181) --------------------------------------------------------
int sub_411181()
{
  _crtSetUnhandledExceptionFilter(sub_411140);
  return 0;
}
// 41140C: using guessed type int __cdecl _crtSetUnhandledExceptionFilter(_DWORD);

//----- (0041119C) --------------------------------------------------------
int sub_41119C()
{
  return 0;
}

//----- (004111A0) --------------------------------------------------------
int __cdecl sub_4111A0(int a1, unsigned int a2)
{
  int v2; // ecx@1
  unsigned int v3; // edx@1
  int result; // eax@1
  unsigned int v5; // esi@2

  v2 = a1 + *(_DWORD *)(a1 + 60);
  v3 = 0;
  result = v2 + *(_WORD *)(v2 + 20) + 24;
  if ( *(_WORD *)(v2 + 6) )
  {
    while ( 1 )
    {
      v5 = *(_DWORD *)(result + 12);
      if ( a2 >= v5 && a2 < v5 + *(_DWORD *)(result + 8) )
        break;
      ++v3;
      result += 40;
      if ( v3 >= *(_WORD *)(v2 + 6) )
        goto LABEL_5;
    }
  }
  else
  {
LABEL_5:
    result = 0;
  }
  return result;
}

//----- (004111F0) --------------------------------------------------------
int __cdecl sub_4111F0(int a1)
{
  int v1; // eax@1
  int v2; // eax@2
  int result; // eax@3

  LOBYTE(v1) = sub_4112B0(0x400000);
  if ( v1 && (v2 = sub_4111A0(0x400000, a1 - 0x400000)) != 0 )
    result = ~(unsigned __int8)(*(_DWORD *)(v2 + 36) >> 31) & 1;
  else
    result = 0;
  return result;
}

//----- (004112B0) --------------------------------------------------------
bool __cdecl sub_4112B0(int a1)
{
  bool result; // al@2
  int v2; // ecx@3

  if ( *(_WORD *)a1 == 23117 )
  {
    v2 = a1 + *(_DWORD *)(a1 + 60);
    result = 0;
    if ( *(_DWORD *)v2 == 17744 )
      result = *(_WORD *)(v2 + 24) == 267;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004112E1) --------------------------------------------------------
int sub_4112E1()
{
  int result; // eax@3
  DWORD v1; // ecx@4
  LARGE_INTEGER PerformanceCount; // [sp+8h] [bp-14h]@4
  struct _FILETIME SystemTimeAsFileTime; // [sp+10h] [bp-Ch]@1
  DWORD v4; // [sp+18h] [bp-4h]@4

  SystemTimeAsFileTime.dwLowDateTime = 0;
  SystemTimeAsFileTime.dwHighDateTime = 0;
  if ( __security_cookie != -1153374642 && __security_cookie & 0xFFFF0000 )
  {
    result = ~__security_cookie;
    dword_41801C = ~__security_cookie;
  }
  else
  {
    GetSystemTimeAsFileTime(&SystemTimeAsFileTime);
    v4 = SystemTimeAsFileTime.dwLowDateTime ^ SystemTimeAsFileTime.dwHighDateTime;
    v4 ^= GetCurrentThreadId();
    v4 ^= GetCurrentProcessId();
    QueryPerformanceCounter(&PerformanceCount);
    result = (int)&v4;
    v1 = (unsigned int)&v4 ^ v4 ^ PerformanceCount.LowPart ^ PerformanceCount.HighPart;
    if ( v1 == -1153374642 )
    {
      v1 = -1153374641;
    }
    else if ( !(v1 & 0xFFFF0000) )
    {
      result = (v1 | 0x4711) << 16;
      v1 |= result;
    }
    __security_cookie = v1;
    dword_41801C = ~v1;
  }
  return result;
}
// 41801C: using guessed type int dword_41801C;

//----- (0041137B) --------------------------------------------------------
void sub_41137B()
{
  void (**i)(void); // esi@1

  for ( i = (void (**)(void))&unk_414524; i < (void (**)(void))&unk_414524; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (0041139B) --------------------------------------------------------
void __cdecl Func()
{
  void (**i)(void); // esi@1

  for ( i = (void (**)(void))&unk_41452C; i < (void (**)(void))&unk_41452C; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (004113BB) --------------------------------------------------------
errno_t sub_4113BB()
{
  errno_t result; // eax@1
  int v1; // [sp+0h] [bp-4h]@0

  result = controlfp_s(0, 0x10000u, 0x30000u);
  if ( result )
  {
    invoke_watson(0, 0, 0, 0, 0, v1);
    __debugbreak();
    JUMPOUT(initterm_e);
  }
  return result;
}
// 411412: using guessed type int __stdcall invoke_watson(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00411440) --------------------------------------------------------
int __cdecl sub_411440(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411460) --------------------------------------------------------
int __cdecl sub_411460(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411480) --------------------------------------------------------
int __cdecl sub_411480(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004114A0) --------------------------------------------------------
int __cdecl sub_4114A0(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 44));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004114C0) --------------------------------------------------------
int __cdecl sub_4114C0(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 44));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004114E0) --------------------------------------------------------
int __cdecl sub_4114E0(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 44));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411500) --------------------------------------------------------
void __usercall sub_411500(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411508) --------------------------------------------------------
int __cdecl sub_411508(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 64);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411530) --------------------------------------------------------
void __usercall sub_411530(int a1@<ebp>)
{
  sub_4021F0(a1 - 52);
}

//----- (00411538) --------------------------------------------------------
void __usercall sub_411538(int a1@<ebp>)
{
  sub_402CB0(a1 - 112);
}

//----- (00411540) --------------------------------------------------------
int __cdecl sub_411540(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 128);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411570) --------------------------------------------------------
void __usercall sub_411570(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411578) --------------------------------------------------------
void __usercall sub_411578(int a1@<ebp>)
{
  sub_402C30(a1 - 92);
}

//----- (00411580) --------------------------------------------------------
int __cdecl sub_411580(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 112);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004115B0) --------------------------------------------------------
void __usercall sub_4115B0(int a1@<ebp>)
{
  sub_402C80(a1 + 12);
}

//----- (004115B8) --------------------------------------------------------
void __usercall sub_4115B8(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (004115C0) --------------------------------------------------------
void __usercall sub_4115C0(int a1@<ebp>)
{
  sub_402C80(a1 - 92);
}

//----- (004115C8) --------------------------------------------------------
void __usercall sub_4115C8(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (004115D0) --------------------------------------------------------
void __usercall sub_4115D0(int a1@<ebp>)
{
  sub_402C80(a1 - 116);
}

//----- (004115D8) --------------------------------------------------------
int __cdecl sub_4115D8(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 176);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411600) --------------------------------------------------------
void __usercall sub_411600(int a1@<ebp>)
{
  sub_402190((void **)(a1 - 184));
}

//----- (0041160B) --------------------------------------------------------
void __usercall sub_41160B(int a1@<ebp>)
{
  sub_4021C0((void **)(a1 - 192));
}

//----- (00411616) --------------------------------------------------------
void __usercall sub_411616(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (0041161E) --------------------------------------------------------
void __usercall sub_41161E(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (00411629) --------------------------------------------------------
void __usercall sub_411629(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (00411631) --------------------------------------------------------
void __usercall sub_411631(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (0041163C) --------------------------------------------------------
void __usercall sub_41163C(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (00411644) --------------------------------------------------------
void __usercall sub_411644(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (0041164F) --------------------------------------------------------
void __usercall sub_41164F(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (00411657) --------------------------------------------------------
void __usercall sub_411657(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (00411662) --------------------------------------------------------
void __usercall sub_411662(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (0041166A) --------------------------------------------------------
void __usercall sub_41166A(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (00411675) --------------------------------------------------------
void __usercall sub_411675(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (0041167D) --------------------------------------------------------
void __usercall sub_41167D(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (00411688) --------------------------------------------------------
void __usercall sub_411688(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (00411690) --------------------------------------------------------
void __usercall sub_411690(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (0041169B) --------------------------------------------------------
void __usercall sub_41169B(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (004116A3) --------------------------------------------------------
void __usercall sub_4116A3(int a1@<ebp>)
{
  sub_4021F0(a1 - 160);
}

//----- (004116AE) --------------------------------------------------------
void __usercall sub_4116AE(int a1@<ebp>)
{
  sub_402C80(a1 - 160);
}

//----- (004116B9) --------------------------------------------------------
void __usercall sub_4116B9(int a1@<ebp>)
{
  sub_4021F0(a1 - 124);
}

//----- (004116C1) --------------------------------------------------------
void __usercall sub_4116C1(int a1@<ebp>)
{
  sub_402C80(a1 - 160);
}

//----- (004116CC) --------------------------------------------------------
void __usercall sub_4116CC(int a1@<ebp>)
{
  sub_402C80(a1 - 124);
}

//----- (004116D4) --------------------------------------------------------
void __usercall sub_4116D4(int a1@<ebp>)
{
  int v1; // esi@1

  v1 = a1 - 176;
  if ( *(_DWORD *)(a1 - 176) )
  {
    operator delete(*(void **)(a1 - 176));
    *(_DWORD *)v1 = 0;
    *(_DWORD *)(v1 + 4) = 0;
    *(_DWORD *)(v1 + 8) = 0;
  }
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004116DF) --------------------------------------------------------
int __cdecl sub_4116DF(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 - 204) ^ *(_DWORD *)(a2 - 208);
  return _CxxFrameHandler3((a2 - 204 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411710) --------------------------------------------------------
int __cdecl sub_411710(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411730) --------------------------------------------------------
void __usercall sub_411730(int a1@<ebp>)
{
  sub_402C80(a1 + 8);
}

//----- (00411738) --------------------------------------------------------
void __usercall sub_411738(int a1@<ebp>)
{
  sub_4021F0(a1 - 52);
}

//----- (00411740) --------------------------------------------------------
int __cdecl sub_411740(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 60);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411770) --------------------------------------------------------
void __usercall sub_411770(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16));
}

//----- (00411778) --------------------------------------------------------
int __cdecl sub_411778(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 20));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004117A0) --------------------------------------------------------
int __usercall sub_4117A0@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int result; // eax@1
  int v3; // ecx@1

  v1 = *(_DWORD *)(a1 - 48);
  result = *(_DWORD *)(*(_DWORD *)v1 + 4);
  v3 = *(_DWORD *)(result + v1 + 56);
  if ( v3 )
    result = (*(int (**)(void))(*(_DWORD *)v3 + 8))();
  return result;
}

//----- (004117A8) --------------------------------------------------------
int __usercall sub_4117A8@<eax>(int a1@<ebp>)
{
  _DWORD *v1; // esi@1
  int result; // eax@3
  int v3; // ecx@3

  v1 = (_DWORD *)(a1 - 48);
  if ( !std::uncaught_exception() )
    std::basic_ostream<char,std::char_traits<char>>::_Osfx(*v1);
  result = *(_DWORD *)(*(_DWORD *)*v1 + 4);
  v3 = *(_DWORD *)(result + *v1 + 56);
  if ( v3 )
    result = (*(int (**)(void))(*(_DWORD *)v3 + 8))();
  return result;
}
// 4130E8: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::_Osfx(_DWORD);
// 4130EC: using guessed type bool __cdecl std::uncaught_exception();

//----- (004117B0) --------------------------------------------------------
int __cdecl sub_4117B0(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 52));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004117D0) --------------------------------------------------------
void __usercall sub_4117D0(int a1@<ebp>)
{
  if ( *(_DWORD *)(a1 - 16) & 1 )
  {
    *(_DWORD *)(a1 - 16) &= 0xFFFFFFFE;
    sub_402C80(*(_DWORD *)(a1 - 20));
  }
}

//----- (004117E9) --------------------------------------------------------
int __cdecl sub_4117E9(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 24));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411810) --------------------------------------------------------
void __usercall sub_411810(int a1@<ebp>)
{
  if ( *(_DWORD *)(a1 - 16) & 1 )
  {
    *(_DWORD *)(a1 - 16) &= 0xFFFFFFFE;
    sub_402C80(*(_DWORD *)(a1 - 24));
  }
}

//----- (00411829) --------------------------------------------------------
int __cdecl sub_411829(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411855) --------------------------------------------------------
void __usercall sub_411855(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 24));
}

//----- (0041185D) --------------------------------------------------------
int __cdecl sub_41185D(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411880) --------------------------------------------------------
int __cdecl sub_411880(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 24));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004118A0) --------------------------------------------------------
int __cdecl sub_4118A0(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 24));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004118C0) --------------------------------------------------------
int __cdecl sub_4118C0(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004118E0) --------------------------------------------------------
int __cdecl sub_4118E0(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411900) --------------------------------------------------------
int __cdecl sub_411900(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411920) --------------------------------------------------------
int __cdecl sub_411920(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 44));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411940) --------------------------------------------------------
int __cdecl sub_411940(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 44));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411960) --------------------------------------------------------
int __cdecl sub_411960(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 44));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411985) --------------------------------------------------------
int __cdecl sub_411985(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004119A0) --------------------------------------------------------
int __usercall sub_4119A0@<eax>(int a1@<ebp>)
{
  return std::_Lockit::~_Lockit((std::_Lockit *)(a1 - 20));
}
// 413108: using guessed type _DWORD __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);

//----- (004119A9) --------------------------------------------------------
int __cdecl sub_4119A9(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 36));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004119D0) --------------------------------------------------------
void __usercall sub_4119D0(int a1@<ebp>)
{
  operator delete(**(void ***)(a1 - 24));
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004119D8) --------------------------------------------------------
int __cdecl sub_4119D8(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411A00) --------------------------------------------------------
int __usercall sub_411A00@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
  {
    *(_DWORD *)(a1 - 16) &= 0xFFFFFFFE;
    result = std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(*(_DWORD *)(a1 - 20) + 112);
  }
  return result;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);

//----- (00411A1D) --------------------------------------------------------
int __usercall sub_411A1D@<eax>(int a1@<ebp>)
{
  return std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(*(_DWORD *)(a1 - 20) + 24);
}
// 413128: using guessed type int __thiscall std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(_DWORD);

//----- (00411A29) --------------------------------------------------------
int __usercall sub_411A29@<eax>(int a1@<ebp>)
{
  return std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(*(_DWORD *)(a1 - 24));
}
// 413120: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(_DWORD);

//----- (00411A32) --------------------------------------------------------
int __usercall sub_411A32@<eax>(int a1@<ebp>)
{
  return sub_40B530(*(_DWORD *)(a1 - 20) + 16);
}

//----- (00411A3D) --------------------------------------------------------
int __cdecl sub_411A3D(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 24));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411A60) --------------------------------------------------------
int __usercall sub_411A60@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
  {
    *(_DWORD *)(a1 - 16) &= 0xFFFFFFFE;
    result = std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(*(_DWORD *)(a1 - 20) + 96);
  }
  return result;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);

//----- (00411A7D) --------------------------------------------------------
int __usercall sub_411A7D@<eax>(int a1@<ebp>)
{
  return std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(*(_DWORD *)(a1 - 20) + 8);
}
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);

//----- (00411A89) --------------------------------------------------------
int __usercall sub_411A89@<eax>(int a1@<ebp>)
{
  return std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(*(_DWORD *)(a1 - 24));
}
// 413120: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(_DWORD);

//----- (00411A92) --------------------------------------------------------
int __cdecl sub_411A92(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 24));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411AB0) --------------------------------------------------------
int __usercall sub_411AB0@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
  {
    *(_DWORD *)(a1 - 16) &= 0xFFFFFFFE;
    result = std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(*(_DWORD *)(a1 - 20) + 80);
  }
  return result;
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);

//----- (00411ACD) --------------------------------------------------------
int __usercall sub_411ACD@<eax>(int a1@<ebp>)
{
  return std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(*(_DWORD *)(a1 - 20) + 8);
}
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);

//----- (00411AD9) --------------------------------------------------------
int __usercall sub_411AD9@<eax>(int a1@<ebp>)
{
  return std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(*(_DWORD *)(a1 - 24));
}
// 413120: using guessed type int __thiscall std::basic_streambuf<char,std::char_traits<char>>::~basic_streambuf<char,std::char_traits<char>>(_DWORD);

//----- (00411AE2) --------------------------------------------------------
int __cdecl sub_411AE2(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 24));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411B00) --------------------------------------------------------
void __usercall sub_411B00(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16));
}

//----- (00411B08) --------------------------------------------------------
int __cdecl sub_411B08(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 16));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411B30) --------------------------------------------------------
int __cdecl sub_411B30(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 24));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411B50) --------------------------------------------------------
void __usercall sub_411B50(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608));
}

//----- (00411B5B) --------------------------------------------------------
void __usercall sub_411B5B(int a1@<ebp>)
{
  sub_407540((void **)(*(_DWORD *)(a1 - 608) + 24));
}

//----- (00411B69) --------------------------------------------------------
void __usercall sub_411B69(int a1@<ebp>)
{
  sub_407570((int **)(*(_DWORD *)(a1 - 608) + 32));
}

//----- (00411B77) --------------------------------------------------------
void __usercall sub_411B77(int a1@<ebp>)
{
  sub_407570((int **)(*(_DWORD *)(a1 - 608) + 40));
}

//----- (00411B85) --------------------------------------------------------
void __usercall sub_411B85(int a1@<ebp>)
{
  sub_4075A0((void **)(*(_DWORD *)(a1 - 608) + 48));
}

//----- (00411B93) --------------------------------------------------------
void __usercall sub_411B93(int a1@<ebp>)
{
  sub_4075D0((void **)(*(_DWORD *)(a1 - 608) + 56));
}

//----- (00411BA1) --------------------------------------------------------
void __usercall sub_411BA1(int a1@<ebp>)
{
  sub_4075A0((void **)(*(_DWORD *)(a1 - 608) + 64));
}

//----- (00411BAF) --------------------------------------------------------
void __usercall sub_411BAF(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608) + 72);
}

//----- (00411BBD) --------------------------------------------------------
void __usercall sub_411BBD(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 608);
  JUMPOUT(&loc_4109B0);
}

//----- (00411BCB) --------------------------------------------------------
void __usercall sub_411BCB(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608) + 104);
}

//----- (00411BD9) --------------------------------------------------------
void __usercall sub_411BD9(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 608);
  JUMPOUT(&loc_4109B0);
}

//----- (00411BEA) --------------------------------------------------------
void __usercall sub_411BEA(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 608);
  JUMPOUT(&loc_407600);
}

//----- (00411BFB) --------------------------------------------------------
void __usercall sub_411BFB(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608) + 416);
}

//----- (00411C0C) --------------------------------------------------------
void __usercall sub_411C0C(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608) + 440);
}

//----- (00411C1D) --------------------------------------------------------
void __usercall sub_411C1D(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608) + 464);
}

//----- (00411C2E) --------------------------------------------------------
void __usercall sub_411C2E(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608) + 488);
}

//----- (00411C3F) --------------------------------------------------------
void __usercall sub_411C3F(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 608) + 512);
}

//----- (00411C50) --------------------------------------------------------
int __usercall sub_411C50@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v3; // ecx@1

  v3 = *(_DWORD *)(a1 - 608) + 544;
  v1 = *(_DWORD *)(a1 - 608) + 640;
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v3 + 4) + v1 - 96) = &off_413E84;
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v3 + 4) + v1 - 100) = *(_DWORD *)(*(_DWORD *)v3 + 4) - 96;
  sub_40B530(v3 + 4);
  std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(v1 - 88);
  return std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v1);
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);
// 413E84: using guessed type int (*off_413E84)();

//----- (00411C61) --------------------------------------------------------
void __usercall sub_411C61(int a1@<ebp>)
{
  sub_402C30(a1 - 116);
}

//----- (00411C69) --------------------------------------------------------
void __usercall sub_411C69(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411C71) --------------------------------------------------------
void __usercall sub_411C71(int a1@<ebp>)
{
  sub_402C30(a1 - 116);
}

//----- (00411C79) --------------------------------------------------------
void __usercall sub_411C79(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411C81) --------------------------------------------------------
void __usercall sub_411C81(int a1@<ebp>)
{
  sub_402C30(a1 - 116);
}

//----- (00411C89) --------------------------------------------------------
void __usercall sub_411C89(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411C91) --------------------------------------------------------
void __usercall sub_411C91(int a1@<ebp>)
{
  sub_402C30(a1 - 116);
}

//----- (00411C99) --------------------------------------------------------
void __usercall sub_411C99(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411CA1) --------------------------------------------------------
void __usercall sub_411CA1(int a1@<ebp>)
{
  sub_402C30(a1 - 116);
}

//----- (00411CA9) --------------------------------------------------------
void __usercall sub_411CA9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411CB1) --------------------------------------------------------
void __usercall sub_411CB1(int a1@<ebp>)
{
  sub_402C30(a1 - 116);
}

//----- (00411CB9) --------------------------------------------------------
void __usercall sub_411CB9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411CC1) --------------------------------------------------------
void __usercall sub_411CC1(int a1@<ebp>)
{
  sub_402C30(a1 - 116);
}

//----- (00411CC9) --------------------------------------------------------
void __usercall sub_411CC9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411CD1) --------------------------------------------------------
void __usercall sub_411CD1(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411CD9) --------------------------------------------------------
void __usercall sub_411CD9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411CE1) --------------------------------------------------------
void __usercall sub_411CE1(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411CE9) --------------------------------------------------------
void __usercall sub_411CE9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411CF1) --------------------------------------------------------
void __usercall sub_411CF1(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411CF9) --------------------------------------------------------
void __usercall sub_411CF9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D01) --------------------------------------------------------
void __usercall sub_411D01(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D09) --------------------------------------------------------
void __usercall sub_411D09(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D11) --------------------------------------------------------
void __usercall sub_411D11(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D19) --------------------------------------------------------
void __usercall sub_411D19(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D21) --------------------------------------------------------
void __usercall sub_411D21(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D29) --------------------------------------------------------
void __usercall sub_411D29(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D31) --------------------------------------------------------
void __usercall sub_411D31(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D39) --------------------------------------------------------
void __usercall sub_411D39(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D41) --------------------------------------------------------
void __usercall sub_411D41(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D49) --------------------------------------------------------
void __usercall sub_411D49(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D51) --------------------------------------------------------
void __usercall sub_411D51(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D59) --------------------------------------------------------
void __usercall sub_411D59(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D61) --------------------------------------------------------
void __usercall sub_411D61(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D69) --------------------------------------------------------
void __usercall sub_411D69(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D71) --------------------------------------------------------
void __usercall sub_411D71(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D79) --------------------------------------------------------
void __usercall sub_411D79(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D81) --------------------------------------------------------
void __usercall sub_411D81(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D89) --------------------------------------------------------
void __usercall sub_411D89(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411D91) --------------------------------------------------------
void __usercall sub_411D91(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411D99) --------------------------------------------------------
void __usercall sub_411D99(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411DA1) --------------------------------------------------------
void __usercall sub_411DA1(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411DA9) --------------------------------------------------------
void __usercall sub_411DA9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411DB1) --------------------------------------------------------
void __usercall sub_411DB1(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411DB9) --------------------------------------------------------
void __usercall sub_411DB9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411DC1) --------------------------------------------------------
void __usercall sub_411DC1(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411DC9) --------------------------------------------------------
void __usercall sub_411DC9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411DD1) --------------------------------------------------------
void __usercall sub_411DD1(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411DD9) --------------------------------------------------------
void __usercall sub_411DD9(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411DE1) --------------------------------------------------------
void __usercall sub_411DE1(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00411DE9) --------------------------------------------------------
void __usercall sub_411DE9(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411DF1) --------------------------------------------------------
void __usercall sub_411DF1(int a1@<ebp>)
{
  sub_402C80(a1 - 140);
}

//----- (00411DFC) --------------------------------------------------------
void __usercall sub_411DFC(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (00411E04) --------------------------------------------------------
void __usercall sub_411E04(int a1@<ebp>)
{
  sub_402C80(a1 - 428);
}

//----- (00411E0F) --------------------------------------------------------
void __usercall sub_411E0F(int a1@<ebp>)
{
  sub_402C80(a1 - 140);
}

//----- (00411E1A) --------------------------------------------------------
void __usercall sub_411E1A(int a1@<ebp>)
{
  sub_402C80(a1 - 236);
}

//----- (00411E25) --------------------------------------------------------
void __usercall sub_411E25(int a1@<ebp>)
{
  sub_402C80(a1 - 524);
}

//----- (00411E30) --------------------------------------------------------
void __usercall sub_411E30(int a1@<ebp>)
{
  sub_402C80(a1 - 284);
}

//----- (00411E3B) --------------------------------------------------------
void __usercall sub_411E3B(int a1@<ebp>)
{
  sub_402C80(a1 - 476);
}

//----- (00411E46) --------------------------------------------------------
void __usercall sub_411E46(int a1@<ebp>)
{
  sub_402C80(a1 - 332);
}

//----- (00411E51) --------------------------------------------------------
void __usercall sub_411E51(int a1@<ebp>)
{
  sub_402C80(a1 - 380);
}

//----- (00411E5C) --------------------------------------------------------
void __usercall sub_411E5C(int a1@<ebp>)
{
  sub_402C80(a1 - 164);
}

//----- (00411E67) --------------------------------------------------------
void __usercall sub_411E67(int a1@<ebp>)
{
  sub_402C80(a1 - 404);
}

//----- (00411E72) --------------------------------------------------------
void __usercall sub_411E72(int a1@<ebp>)
{
  sub_402C80(a1 - 188);
}

//----- (00411E7D) --------------------------------------------------------
void __usercall sub_411E7D(int a1@<ebp>)
{
  sub_402C80(a1 - 212);
}

//----- (00411E88) --------------------------------------------------------
void __usercall sub_411E88(int a1@<ebp>)
{
  sub_402C80(a1 - 260);
}

//----- (00411E93) --------------------------------------------------------
void __usercall sub_411E93(int a1@<ebp>)
{
  sub_402C80(a1 - 308);
}

//----- (00411E9E) --------------------------------------------------------
void __usercall sub_411E9E(int a1@<ebp>)
{
  sub_402C80(a1 - 356);
}

//----- (00411EA9) --------------------------------------------------------
void __usercall sub_411EA9(int a1@<ebp>)
{
  sub_402C80(a1 - 452);
}

//----- (00411EB4) --------------------------------------------------------
void __usercall sub_411EB4(int a1@<ebp>)
{
  sub_402C80(a1 - 500);
}

//----- (00411EBF) --------------------------------------------------------
void __usercall sub_411EBF(int a1@<ebp>)
{
  sub_402C80(a1 - 548);
}

//----- (00411ECA) --------------------------------------------------------
void __usercall sub_411ECA(int a1@<ebp>)
{
  sub_402C80(a1 - 596);
}

//----- (00411ED5) --------------------------------------------------------
void __usercall sub_411ED5(int a1@<ebp>)
{
  sub_402C80(a1 - 572);
}

//----- (00411EE0) --------------------------------------------------------
void __usercall sub_411EE0(int a1@<ebp>)
{
  sub_402C80(a1 - 92);
}

//----- (00411EE8) --------------------------------------------------------
int __cdecl sub_411EE8(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 616);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00411F20) --------------------------------------------------------
void __usercall sub_411F20(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16));
}

//----- (00411F28) --------------------------------------------------------
void __usercall sub_411F28(int a1@<ebp>)
{
  sub_407540((void **)(*(_DWORD *)(a1 - 16) + 24));
}

//----- (00411F33) --------------------------------------------------------
void __usercall sub_411F33(int a1@<ebp>)
{
  sub_407570((int **)(*(_DWORD *)(a1 - 16) + 32));
}

//----- (00411F3E) --------------------------------------------------------
void __usercall sub_411F3E(int a1@<ebp>)
{
  sub_407570((int **)(*(_DWORD *)(a1 - 16) + 40));
}

//----- (00411F49) --------------------------------------------------------
void __usercall sub_411F49(int a1@<ebp>)
{
  sub_4075A0((void **)(*(_DWORD *)(a1 - 16) + 48));
}

//----- (00411F54) --------------------------------------------------------
void __usercall sub_411F54(int a1@<ebp>)
{
  sub_4075D0((void **)(*(_DWORD *)(a1 - 16) + 56));
}

//----- (00411F5F) --------------------------------------------------------
void __usercall sub_411F5F(int a1@<ebp>)
{
  sub_4075A0((void **)(*(_DWORD *)(a1 - 16) + 64));
}

//----- (00411F6A) --------------------------------------------------------
void __usercall sub_411F6A(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16) + 72);
}

//----- (00411F75) --------------------------------------------------------
void __usercall sub_411F75(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_4109B0);
}

//----- (00411F80) --------------------------------------------------------
void __usercall sub_411F80(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16) + 104);
}

//----- (00411F8B) --------------------------------------------------------
void __usercall sub_411F8B(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_4109B0);
}

//----- (00411F99) --------------------------------------------------------
void __usercall sub_411F99(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_407600);
}

//----- (00411FA7) --------------------------------------------------------
void __usercall sub_411FA7(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16) + 416);
}

//----- (00411FB5) --------------------------------------------------------
void __usercall sub_411FB5(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16) + 440);
}

//----- (00411FC3) --------------------------------------------------------
void __usercall sub_411FC3(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16) + 464);
}

//----- (00411FD1) --------------------------------------------------------
void __usercall sub_411FD1(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16) + 488);
}

//----- (00411FDF) --------------------------------------------------------
void __usercall sub_411FDF(int a1@<ebp>)
{
  sub_402C80(*(_DWORD *)(a1 - 16) + 512);
}

//----- (00411FED) --------------------------------------------------------
void __usercall sub_411FED(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_407640);
}

//----- (00411FFB) --------------------------------------------------------
int __cdecl sub_411FFB(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412020) --------------------------------------------------------
void sub_412020()
{
  JUMPOUT(&loc_402C00);
}

//----- (00412028) --------------------------------------------------------
void __usercall sub_412028(int a1@<ebp>)
{
  sub_4021F0(a1 - 52);
}

//----- (00412030) --------------------------------------------------------
int __cdecl sub_412030(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 80);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412060) --------------------------------------------------------
void sub_412060()
{
  JUMPOUT(&loc_402C00);
}

//----- (00412068) --------------------------------------------------------
void __usercall sub_412068(int a1@<ebp>)
{
  sub_4021F0(a1 - 52);
}

//----- (00412070) --------------------------------------------------------
int __cdecl sub_412070(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 80);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004120A0) --------------------------------------------------------
void __usercall sub_4120A0(int a1@<ebp>)
{
  sub_40C8E0((int *)(a1 - 72));
}

//----- (004120A8) --------------------------------------------------------
void __usercall sub_4120A8(int a1@<ebp>)
{
  sub_40C0B0(a1 - 52);
}

//----- (004120B0) --------------------------------------------------------
int __cdecl sub_4120B0(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 80);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004120E0) --------------------------------------------------------
void __usercall sub_4120E0(int a1@<ebp>)
{
  sub_40C9C0(a1 - 72);
}

//----- (004120E8) --------------------------------------------------------
void __usercall sub_4120E8(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // eax@1

  v1 = a1 - 52;
  v2 = *(_DWORD *)(a1 - 52 + 24);
  if ( v2 )
  {
    sub_40DB30(v2, *(_DWORD *)(a1 - 52 + 28));
    operator delete(*(void **)(v1 + 24));
    *(_DWORD *)(v1 + 24) = 0;
    *(_DWORD *)(v1 + 28) = 0;
    *(_DWORD *)(v1 + 32) = 0;
  }
  if ( *(_DWORD *)(v1 + 20) >= 0x10u )
    operator delete(*(void **)v1);
  *(_DWORD *)(v1 + 20) = 15;
  *(_DWORD *)(v1 + 16) = 0;
  *(_BYTE *)v1 = 0;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (004120F0) --------------------------------------------------------
int __cdecl sub_4120F0(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 80);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412120) --------------------------------------------------------
void __usercall sub_412120(int a1@<ebp>)
{
  sub_402C80(a1 - 40);
}

//----- (00412128) --------------------------------------------------------
int __usercall sub_412128@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v3; // ecx@1

  v3 = a1 - 232;
  v1 = a1 - 232 + 112;
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v3 + 4) + v1 - 112) = off_413E28;
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v3 + 4) + v1 - 116) = *(_DWORD *)(*(_DWORD *)v3 + 4) - 112;
  sub_40B530(a1 - 232 + 16);
  std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(a1 - 232 + 24);
  return std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v1);
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 413128: using guessed type int __thiscall std::basic_istream<char,std::char_traits<char>>::~basic_istream<char,std::char_traits<char>>(_DWORD);
// 413E28: using guessed type int (*off_413E28[2])();

//----- (00412133) --------------------------------------------------------
int __cdecl sub_412133(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 236);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412160) --------------------------------------------------------
int __cdecl sub_412160(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 28));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412180) --------------------------------------------------------
void __usercall sub_412180(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00412188) --------------------------------------------------------
int __cdecl sub_412188(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 - 52) ^ *(_DWORD *)(a2 - 56);
  return _CxxFrameHandler3((a2 - 52 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004121B0) --------------------------------------------------------
void __usercall sub_4121B0(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (004121B8) --------------------------------------------------------
void __usercall sub_4121B8(int a1@<ebp>)
{
  sub_402C80(a1 - 68);
}

//----- (004121C0) --------------------------------------------------------
int __cdecl sub_4121C0(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 80);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004121F0) --------------------------------------------------------
BOOL __usercall sub_4121F0@<eax>(int a1@<ebp>)
{
  BOOL result; // eax@1

  result = *(_DWORD *)(a1 - 464);
  if ( *(_DWORD *)(a1 - 464) )
    result = CloseHandle(*(HANDLE *)(a1 - 464));
  return result;
}

//----- (004121FB) --------------------------------------------------------
void __usercall sub_4121FB(int a1@<ebp>)
{
  sub_407570((int **)(a1 - 444));
}

//----- (00412206) --------------------------------------------------------
void __usercall sub_412206(int a1@<ebp>)
{
  sub_402C80(a1 - 64);
}

//----- (0041220E) --------------------------------------------------------
void __usercall sub_41220E(int a1@<ebp>)
{
  sub_402C80(a1 - 496);
}

//----- (00412219) --------------------------------------------------------
void __usercall sub_412219(int a1@<ebp>)
{
  sub_402C80(a1 - 136);
}

//----- (00412224) --------------------------------------------------------
void __usercall sub_412224(int a1@<ebp>)
{
  sub_402C80(a1 - 64);
}

//----- (0041222C) --------------------------------------------------------
void __usercall sub_41222C(int a1@<ebp>)
{
  sub_402C80(a1 - 112);
}

//----- (00412234) --------------------------------------------------------
void __usercall sub_412234(int a1@<ebp>)
{
  sub_402C80(a1 - 88);
}

//----- (0041223C) --------------------------------------------------------
void __usercall sub_41223C(int a1@<ebp>)
{
  sub_402C80(a1 - 40);
}

//----- (00412244) --------------------------------------------------------
int __cdecl sub_412244(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 500);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412270) --------------------------------------------------------
void __usercall sub_412270(int a1@<ebp>)
{
  if ( *(_DWORD *)(a1 - 72) & 1 )
  {
    *(_DWORD *)(a1 - 72) &= 0xFFFFFFFE;
    sub_402C80(*(_DWORD *)(a1 - 76));
  }
}

//----- (00412289) --------------------------------------------------------
void __usercall sub_412289(int a1@<ebp>)
{
  sub_402C80(a1 - 40);
}

//----- (00412291) --------------------------------------------------------
int __cdecl sub_412291(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 84);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004122C0) --------------------------------------------------------
void sub_4122C0()
{
  JUMPOUT(&loc_407600);
}

//----- (004122CB) --------------------------------------------------------
int __cdecl sub_4122CB(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 1212);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412300) --------------------------------------------------------
int __usercall sub_412300@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int result; // eax@3

  v1 = a1 - 40;
  if ( *(_DWORD *)(a1 - 40 + 20) >= 8u )
    operator delete(*(void **)(a1 - 40));
  *(_DWORD *)(v1 + 20) = 7;
  *(_DWORD *)(v1 + 16) = 0;
  result = 0;
  *(_WORD *)v1 = 0;
  return result;
}
// 4131F0: using guessed type void __cdecl operator delete(void *);

//----- (00412308) --------------------------------------------------------
void __usercall sub_412308(int a1@<ebp>)
{
  sub_402C80(a1 - 96);
}

//----- (00412310) --------------------------------------------------------
int __usercall sub_412310@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v3; // ecx@1

  v3 = a1 - 248;
  v1 = a1 - 248 + 80;
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v3 + 4) + v1 - 80) = &off_413EDC;
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v3 + 4) + v1 - 84) = *(_DWORD *)(*(_DWORD *)v3 + 4) - 80;
  sub_40ADE0(a1 - 248 + 4);
  std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(a1 - 248 + 8);
  return std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(v1);
}
// 4130D0: using guessed type int __thiscall std::basic_ios<char,std::char_traits<char>>::~basic_ios<char,std::char_traits<char>>(_DWORD);
// 41311C: using guessed type int __thiscall std::basic_ostream<char,std::char_traits<char>>::~basic_ostream<char,std::char_traits<char>>(_DWORD);
// 413EDC: using guessed type int (*off_413EDC)();

//----- (0041231B) --------------------------------------------------------
void __usercall sub_41231B(int a1@<ebp>)
{
  sub_402C80(a1 - 64);
}

//----- (00412323) --------------------------------------------------------
int __cdecl sub_412323(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 252);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412350) --------------------------------------------------------
void __usercall sub_412350(int a1@<ebp>)
{
  int v1; // ecx@1
  void (__thiscall ***v2)(_DWORD, _DWORD); // eax@2

  v1 = *(_DWORD *)(a1 + 12);
  if ( v1 )
  {
    v2 = (void (__thiscall ***)(_DWORD, _DWORD))(*(int (**)(void))(*(_DWORD *)v1 + 8))();
    if ( v2 )
      (**v2)(v2, 1);
  }
}

//----- (00412358) --------------------------------------------------------
int __cdecl sub_412358(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 12));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412380) --------------------------------------------------------
void __usercall sub_412380(int a1@<ebp>)
{
  operator delete[](*(void **)(a1 - 48));
}
// 413208: using guessed type void __cdecl operator delete[](void *);

//----- (00412388) --------------------------------------------------------
void __usercall sub_412388(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (00412390) --------------------------------------------------------
int __cdecl sub_412390(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 56);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004123C0) --------------------------------------------------------
void __usercall sub_4123C0(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (004123C8) --------------------------------------------------------
int __cdecl sub_4123C8(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 40);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004123F0) --------------------------------------------------------
void __usercall sub_4123F0(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (004123F8) --------------------------------------------------------
int __cdecl sub_4123F8(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 - 60) ^ *(_DWORD *)(a2 - 64);
  return _CxxFrameHandler3((a2 - 60 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412420) --------------------------------------------------------
void __usercall sub_412420(int a1@<ebp>)
{
  sub_402C80(a1 - 40);
}

//----- (00412428) --------------------------------------------------------
void __usercall sub_412428(int a1@<ebp>)
{
  sub_402C80(a1 - 96);
}

//----- (00412430) --------------------------------------------------------
void __usercall sub_412430(int a1@<ebp>)
{
  sub_402C80(a1 - 40);
}

//----- (00412438) --------------------------------------------------------
void __usercall sub_412438(int a1@<ebp>)
{
  sub_402C80(a1 - 64);
}

//----- (00412440) --------------------------------------------------------
int __cdecl sub_412440(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 100);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412470) --------------------------------------------------------
void __usercall sub_412470(int a1@<ebp>)
{
  sub_402C80(a1 - 88);
}

//----- (00412478) --------------------------------------------------------
void __usercall sub_412478(int a1@<ebp>)
{
  sub_402C80(a1 - 64);
}

//----- (00412480) --------------------------------------------------------
int __cdecl sub_412480(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 92);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004124B0) --------------------------------------------------------
void __usercall sub_4124B0(int a1@<ebp>)
{
  sub_402C80(a1 - 44);
}

//----- (004124B8) --------------------------------------------------------
int __cdecl sub_4124B8(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 48));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (004124E0) --------------------------------------------------------
void __usercall sub_4124E0(int a1@<ebp>)
{
  sub_402C80(a1 + 8);
}

//----- (004124E8) --------------------------------------------------------
int __cdecl sub_4124E8(int a1, int a2)
{
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 12));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412510) --------------------------------------------------------
void __usercall sub_412510(int a1@<ebp>)
{
  sub_402C80(a1 + 12);
}

//----- (00412518) --------------------------------------------------------
int __cdecl sub_412518(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 48);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 8));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412540) --------------------------------------------------------
void __usercall sub_412540(int a1@<ebp>)
{
  sub_402C80(a1 + 8);
}

//----- (00412548) --------------------------------------------------------
void __usercall sub_412548(int a1@<ebp>)
{
  sub_402C80(a1 - 672);
}

//----- (00412553) --------------------------------------------------------
void __usercall sub_412553(int a1@<ebp>)
{
  sub_402C80(a1 - 648);
}

//----- (0041255E) --------------------------------------------------------
void __usercall sub_41255E(int a1@<ebp>)
{
  sub_402C80(a1 - 696);
}

//----- (00412569) --------------------------------------------------------
void __usercall sub_412569(int a1@<ebp>)
{
  sub_402C80(a1 - 64);
}

//----- (00412571) --------------------------------------------------------
void __usercall sub_412571(int a1@<ebp>)
{
  sub_402C80(a1 - 304);
}

//----- (0041257C) --------------------------------------------------------
void __usercall sub_41257C(int a1@<ebp>)
{
  sub_402C80(a1 - 40);
}

//----- (00412584) --------------------------------------------------------
void __usercall sub_412584(int a1@<ebp>)
{
  sub_402C80(a1 - 280);
}

//----- (0041258F) --------------------------------------------------------
void __usercall sub_41258F(int a1@<ebp>)
{
  sub_402C80(a1 - 160);
}

//----- (0041259A) --------------------------------------------------------
void __usercall sub_41259A(int a1@<ebp>)
{
  sub_402C30(a1 - 496);
}

//----- (004125A5) --------------------------------------------------------
void __usercall sub_4125A5(int a1@<ebp>)
{
  sub_402C80(a1 - 232);
}

//----- (004125B0) --------------------------------------------------------
void __usercall sub_4125B0(int a1@<ebp>)
{
  sub_402C80(a1 - 448);
}

//----- (004125BB) --------------------------------------------------------
void __usercall sub_4125BB(int a1@<ebp>)
{
  sub_402C80(a1 - 376);
}

//----- (004125C6) --------------------------------------------------------
void __usercall sub_4125C6(int a1@<ebp>)
{
  sub_402C80(a1 - 352);
}

//----- (004125D1) --------------------------------------------------------
void __usercall sub_4125D1(int a1@<ebp>)
{
  sub_402C80(a1 - 424);
}

//----- (004125DC) --------------------------------------------------------
void __usercall sub_4125DC(int a1@<ebp>)
{
  sub_402C80(a1 - 520);
}

//----- (004125E7) --------------------------------------------------------
int __cdecl sub_4125E7(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 788);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412610) --------------------------------------------------------
void __usercall sub_412610(int a1@<ebp>)
{
  sub_402C80(a1 + 8);
}

//----- (00412618) --------------------------------------------------------
void __usercall sub_412618(int a1@<ebp>)
{
  sub_402C80(a1 - 40);
}

//----- (00412620) --------------------------------------------------------
void __usercall sub_412620(int a1@<ebp>)
{
  sub_402C80(a1 - 64);
}

//----- (00412628) --------------------------------------------------------
void __usercall sub_412628(int a1@<ebp>)
{
  sub_402C80(a1 - 112);
}

//----- (00412630) --------------------------------------------------------
void __usercall sub_412630(int a1@<ebp>)
{
  sub_402C80(a1 - 184);
}

//----- (0041263B) --------------------------------------------------------
void __usercall sub_41263B(int a1@<ebp>)
{
  sub_402C80(a1 - 160);
}

//----- (00412646) --------------------------------------------------------
void __usercall sub_412646(int a1@<ebp>)
{
  sub_402C80(a1 - 136);
}

//----- (00412651) --------------------------------------------------------
void __usercall sub_412651(int a1@<ebp>)
{
  sub_402C80(a1 - 112);
}

//----- (00412659) --------------------------------------------------------
int __cdecl sub_412659(int a1, int a2)
{
  int v2; // ecx@1

  v2 = (a2 + 12) ^ *(_DWORD *)(a2 - 244);
  return _CxxFrameHandler3((a2 + 12) ^ *(_DWORD *)(a2 - 4));
}
// 41142A: using guessed type int __thiscall _CxxFrameHandler3(_DWORD);

//----- (00412690) --------------------------------------------------------
int sub_412690()
{
  return sub_410B69((_onexit_t)sub_412710);
}

//----- (004126A0) --------------------------------------------------------
int sub_4126A0()
{
  return sub_410B69((_onexit_t)sub_412700);
}

//----- (004126B0) --------------------------------------------------------
int sub_4126B0()
{
  return sub_410B69((_onexit_t)sub_4126F0);
}

//----- (004126C0) --------------------------------------------------------
void sub_4126C0()
{
  dword_4188CC = 0;
}
// 4188CC: using guessed type int dword_4188CC;

//----- (004126D0) --------------------------------------------------------
void sub_4126D0()
{
  dword_4188C8 = 0;
}
// 4188C8: using guessed type int dword_4188C8;

//----- (004126DB) --------------------------------------------------------
int sub_4126DB()
{
  return sub_410B69((_onexit_t)sub_41271B);
}

//----- (004126F0) --------------------------------------------------------
void __cdecl sub_4126F0()
{
  off_418488[0] = &off_4136D8;
}
// 4136D8: using guessed type int (__stdcall *off_4136D8)(char);
// 418488: using guessed type int (__stdcall **off_418488[3])(char);

//----- (00412700) --------------------------------------------------------
void __cdecl sub_412700()
{
  off_418490 = &off_4136D8;
}
// 4136D8: using guessed type int (__stdcall *off_4136D8)(char);
// 418490: using guessed type int (__stdcall **off_418490)(char);

//----- (00412710) --------------------------------------------------------
void __cdecl sub_412710()
{
  off_41848C[0] = &off_4136D8;
}
// 4136D8: using guessed type int (__stdcall *off_4136D8)(char);
// 41848C: using guessed type int (__stdcall **off_41848C[2])(char);

//----- (0041271B) --------------------------------------------------------
void __cdecl sub_41271B()
{
  void *v0; // ecx@2
  void *v1; // esi@3

  while ( 1 )
  {
    v1 = dword_418498;
    if ( !dword_418498 )
      break;
    v0 = dword_418498;
    dword_418498 = *(void **)dword_418498;
    sub_4109DA((int)v0);
    operator delete(v1);
  }
}

#error "There were 1 decompilation failure(s) on 562 function(s)"
